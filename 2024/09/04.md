# Spack Upgrade Notes

```
[mkandes@login02 spack]$ pwd
/home/mkandes/software/spack/repos/mkandes/spack
[mkandes@login02 spack]$ git branch
  sdsc-0.17.3
  sdsc-0.17.3-gh-124-inst-exp-cpu-dev
  sdsc-0.17.3-gh-125-spec-exp-cpu-pgi-netcdf
* sdsc-0.17.3-gh-127-spec-exp-cpu-intel-tbb
[mkandes@login02 spack]$ git log -1
commit 8cac7a7b4b0d14661a64ed7f05d77b239b3dfc4d (HEAD -> sdsc-0.17.3-gh-127-spec-exp-cpu-intel-tbb, origin/sdsc-0.17.3-gh-127-spec-exp-cpu-intel-tbb)
Author: Marty Kandes <mkandes@sdsc.edu>
Date:   Tue Aug 27 16:05:38 2024 -0700

    Add intel-tbb@2020.3 % intel@19.1.3.304 to exp/0.17.3/cpu/b
    
    This explicit installation of intel-tbb@2020.3 % intel@19.1.3.304 is to
    satisfy a user request [1]. Note, however, it also appears as if the TBB
    libraries are already included inplicitly within the existing Intel MKL
    variants already deployed on Expanse.
    
    [1] https://github.com/sdsc/spack/issues/127
[mkandes@login02 spack]$
```

```
[mkandes@login02 spack]$ git checkout sdsc-0.17.3
Switched to branch 'sdsc-0.17.3'
Your branch is up to date with 'origin/sdsc-0.17.3'.
[mkandes@login02 spack]$ git branch
* sdsc-0.17.3
  sdsc-0.17.3-gh-124-inst-exp-cpu-dev
  sdsc-0.17.3-gh-125-spec-exp-cpu-pgi-netcdf
  sdsc-0.17.3-gh-127-spec-exp-cpu-intel-tbb
[mkandes@login02 spack]$ git log -1
commit a3029ae4c3bc806522bf34949c3e4ed995e6206b (HEAD -> sdsc-0.17.3, upstream/sdsc-0.17.3, origin/sdsc-0.17.3, origin/HEAD)
Author: Marty Kandes <mkandes@sdsc.edu>
Date:   Sat Aug 17 07:58:30 2024 -0700

    fftw@3.3.10 % gcc@10.2.0 +mpi +openmp failed builds
    
    Unfortauntely, I have not been able to resolve this issue yet. It's a
    bit odd that enabling +openmp causes the package build to fail when we
    already have successful builds with +mpi ~openmp. We will need to
    investigate this further in the future. For the time being, I will
    invetigate alternative compiler, MPI, and FFTW options for QE.
[mkandes@login02 spack]$
```

```
[mkandes@login02 spack]$ git pull upstream
remote: Enumerating objects: 14, done.
remote: Counting objects: 100% (14/14), done.
remote: Compressing objects: 100% (6/6), done.
remote: Total 14 (delta 5), reused 14 (delta 5), pack-reused 0 (from 0)
Unpacking objects: 100% (14/14), 9.92 KiB | 14.00 KiB/s, done.
From https://github.com/sdsc/spack
   a3029ae4c3..1189ec7462  sdsc-0.17.3 -> upstream/sdsc-0.17.3
You asked to pull from the remote 'upstream', but did not specify
a branch. Because this is not the default configured remote
for your current branch, you must specify a branch on the command line.
[mkandes@login02 spack]$ git remote -v
origin	https://github.com/mkandes/spack.git (fetch)
origin	https://github.com/mkandes/spack.git (push)
upstream	https://github.com/sdsc/spack.git (fetch)
upstream	https://github.com/sdsc/spack.git (push)
[mkandes@login02 spack]$
```
