# [ARA OTA OAI 5G SA Experiment @ Agronomy Farm](https://arawireless.readthedocs.io/en/latest/ara_experiments/araran_experiments/OAI_OTA_Outdoor.html#araran-experiment-oai-outdoor)

### OAI 5G Core Network on DataCenter-Compute-000
- https://openairinterface.org/oai-5g-core-network-project
- https://kb.ettus.com/OAI_Reference_Architecture_for_5G_and_6G_Research_with_USRP
```
mckandes@ara-jbox:~$ ssh root@10.189.11.14
Welcome to Ubuntu 22.04.3 LTS (GNU/Linux 5.19.17-051917-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

This system has been minimized by removing packages and content that are
not required on a system that users do not log into.

To restore this content, you can run the 'unminimize' command.
Last login: Thu Apr 18 02:46:44 2024 from 10.64.43.53
root@DataCenterCompute000:~# top

Tasks:   9 total,   1 running,   8 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.3 us,  0.1 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
MiB Mem : 386420.9 total, 325031.5 free,   9249.4 used,  52139.9 buff/cache
MiB Swap:   8192.0 total,   8180.4 free,     11.6 used. 374574.7 avail Mem 
Change delay from 3.0 to q
    PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND                                  
    128 root      20   0  753872  39348  25304 S   0.7   0.0   0:01.01 containerd                               
      1 root      20   0    4352   3264   3012 S   0.0   0.0   0:00.02 entrypoint.sh                            
      9 root      20   0   34200  27304  10196 S   0.0   0.0   0:00.13 supervisord                              
     89 root      20   0    4620   3600   3160 S   0.0   0.0   0:00.00 bash                                     
     92 root      20   0 4091540  56776  38952 S   0.0   0.0   0:00.20 dockerd                                  
  11715 root      20   0   15424   5476   3848 S   0.0   0.0   0:00.00 sshd                                     
  11740 root      20   0   17176  11212   8836 S   0.0   0.0   0:00.00 sshd                                     
  11795 root      20   0    6068   5136   3472 S   0.0   0.0   0:00.00 bash                                     
  11812 root      20   0    7824   3692   3076 R   0.0   0.0   0:00.00 top                                      

root@DataCenterCompute000:~# ls
oai-cn5g
root@DataCenterCompute000:~# pwd
/root
root@DataCenterCompute000:~# cd oai-cn5g/
root@DataCenterCompute000:~/oai-cn5g# ls
conf  database  docker-compose.yaml  docker-compose.yaml~  healthscripts
root@DataCenterCompute000:~/oai-cn5g# ls -lahtr
total 36K
drwxr-xr-x 2 root root 4.0K Apr 16 06:09 healthscripts
drwxr-xr-x 2 root root 4.0K Apr 16 06:09 database
drwxr-xr-x 2 root root 4.0K Apr 16 06:09 conf
-rw-r--r-- 1 root root 5.2K Apr 18 03:07 docker-compose.yaml~
-rw-r--r-- 1 root root 5.2K Apr 18 03:07 docker-compose.yaml
drwxr-xr-x 5 root root 4.0K Apr 18 03:07 .
drwx------ 1 root root 4.0K Aug 18 18:34 ..
root@DataCenterCompute000:~/oai-cn5g# less docker-compose.yaml
root@DataCenterCompute000:~/oai-cn5g# top -u $USER

top - 18:37:34 up 448 days, 22:46,  0 users,  load average: 0.24, 0.31, 0.26
Tasks:   9 total,   1 running,   8 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.1 us,  0.0 sy,  0.0 ni, 99.9 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
MiB Mem : 386420.9 total, 325037.8 free,   9239.2 used,  52143.9 buff/cache
MiB Swap:   8192.0 total,   8180.4 free,     11.6 used. 374584.9 avail Mem 

    PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND                                  
    128 root      20   0  753872  38904  25560 S   0.3   0.0   0:01.73 containerd                               
      1 root      20   0    4352   3264   3012 S   0.0   0.0   0:00.02 entrypoint.sh                            
      9 root      20   0   34200  27304  10196 S   0.0   0.0   0:00.14 supervisord                              
     89 root      20   0    4620   3600   3160 S   0.0   0.0   0:00.00 bash                                     
     92 root      20   0 4091540  56036  38952 S   0.0   0.0   0:00.23 dockerd                                  
  11715 root      20   0   15424   5476   3848 S   0.0   0.0   0:00.00 sshd                                     
  11740 root      20   0   17176  11212   8836 S   0.0   0.0   0:00.01 sshd                                     
  11795 root      20   0    6200   5328   3536 S   0.0   0.0   0:00.00 bash                                     
  11828 root      20   0    7824   3848   3236 R   0.0   0.0   0:00.00 top                                      

root@DataCenterCompute000:~/oai-cn5g# docker compose up -d
[+] Running 34/34
 ✔ oai-udm 1 layers [⣿]      0B/0B      Pulled                                                             5.3s 
   ✔ 97fba3c09d7e Pull complete                                                                            2.8s 
 ✔ oai-upf 1 layers [⣿]      0B/0B      Pulled                                                             3.4s 
   ✔ 662b6028e8ed Pull complete                                                                            1.1s 
 ✔ oai-udr 1 layers [⣿]      0B/0B      Pulled                                                             7.2s 
   ✔ 25d271dfcfeb Pull complete                                                                            4.5s 
 ✔ oai-amf 1 layers [⣿]      0B/0B      Pulled                                                             7.4s 
   ✔ a22e4b0d5844 Pull complete                                                                            4.7s 
 ✔ oai-smf 1 layers [⣿]      0B/0B      Pulled                                                             7.8s 
   ✔ fe3917d30655 Pull complete                                                                            5.1s 
 ✔ mysql 11 layers [⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿]      0B/0B      Pulled                                                   13.4s 
   ✔ d9a40b27c30f Pull complete                                                                            6.4s 
   ✔ 7d8ccc83ce1d Pull complete                                                                            5.6s 
   ✔ f98ae2ef29c4 Pull complete                                                                            5.8s 
   ✔ 2e1aa9898aa1 Pull complete                                                                            6.2s 
   ✔ d0229fb4f83e Pull complete                                                                            6.3s 
   ✔ bdfea4c359d4 Pull complete                                                                            6.5s 
   ✔ d6fe59aa1e5c Pull complete                                                                            7.6s 
   ✔ 7336dce1c47f Pull complete                                                                            6.6s 
   ✔ 1c71c9d185d1 Pull complete                                                                            8.1s 
   ✔ e63d4802c63b Pull complete                                                                            6.8s 
   ✔ 383f329967ab Pull complete                                                                            7.0s 
 ✔ oai-ext-dn 4 layers [⣿⣿⣿⣿]      0B/0B      Pulled                                                       8.9s 
   ✔ 29202e855b20 Pull complete                                                                            5.2s 
   ✔ 2a974b1faaa0 Pull complete                                                                            6.4s 
   ✔ 4f4fb700ef54 Pull complete                                                                            5.3s 
   ✔ 4a5eee922ab5 Pull complete                                                                            5.4s 
 ✔ oai-nrf 1 layers [⣿]      0B/0B      Pulled                                                             5.1s 
   ✔ a3e353733557 Pull complete                                                                            2.6s 
 ✔ oai-ausf 1 layers [⣿]      0B/0B      Pulled                                                            6.1s 
   ✔ ed19f4c1ebb7 Pull complete                                                                            3.5s 
 ✔ ims 2 layers [⣿⣿]      0B/0B      Pulled                                                                5.8s 
   ✔ 445a6a12be2b Pull complete                                                                            1.0s 
   ✔ f4b0f034d8fa Pull complete                                                                            2.4s 
[+] Building 0.0s (0/0)                                                                          docker:default
[+] Running 11/11
 ✔ Network demo-oai-public-net  Created                                                                    0.0s 
 ✔ Container oai-ext-dn         Started                                                                    0.0s 
 ✔ Container ims                Started                                                                    0.0s 
 ✔ Container mysql              Started                                                                    0.0s 
 ✔ Container oai-nrf            Started                                                                    0.0s 
 ✔ Container oai-udr            Started                                                                    0.0s 
 ✔ Container oai-udm            Started                                                                    0.0s 
 ✔ Container oai-ausf           Started                                                                    0.0s 
 ✔ Container oai-amf            Started                                                                    0.0s 
 ✔ Container oai-smf            Started                                                                    0.0s 
 ✔ Container oai-upf            Started                                                                    0.0s 
root@DataCenterCompute000:~/oai-cn5g# top -u $USER

top - 18:38:12 up 448 days, 22:47,  0 users,  load average: 2.64, 1.03, 0.51
Tasks:  30 total,   1 running,  29 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.1 us,  0.1 sy,  0.0 ni, 99.9 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
MiB Mem : 386420.9 total, 321852.3 free,   9868.8 used,  54699.8 buff/cache
MiB Swap:   8192.0 total,   8180.4 free,     11.6 used. 373955.3 avail Mem 

    PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND                                  
  12581 root      20   0  264728  19676  17680 S   0.7   0.0   0:00.12 oai_udm                                  
     92 root      20   0 6285632  86392  44772 S   0.3   0.0   0:49.94 dockerd                                  
    128 root      20   0  757168  43308  26460 S   0.3   0.0   0:02.08 containerd                               
  12212 root      20   0  253708  16856  15052 S   0.3   0.0   0:00.12 oai_nrf                                  
  12468 root      20   0  289124  29584  26172 S   0.3   0.0   0:00.09 oai_udr                                  
  12657 root      20   0  261340  17152  15320 S   0.3   0.0   0:00.11 oai_ausf                                 
      1 root      20   0    4352   3264   3012 S   0.0   0.0   0:00.02 entrypoint.sh                            
      9 root      20   0   34200  27304  10196 S   0.0   0.0   0:00.14 supervisord                              
     89 root      20   0    4620   3600   3160 S   0.0   0.0   0:00.00 bash                                     
  11715 root      20   0   15424   5476   3848 S   0.0   0.0   0:00.00 sshd                                     
  11740 root      20   0   17176  11212   8836 S   0.0   0.0   0:00.06 sshd                                     
  11795 root      20   0    6200   5328   3536 S   0.0   0.0   0:00.00 bash                                     
  12077 root      20   0  722568  12660   9408 S   0.0   0.0   0:00.02 containerd-shim                          
  12125 root      20   0  722824  12508   9408 S   0.0   0.0   0:00.01 containerd-shim                          
  12151 root      20   0  722824  11576   8696 S   0.0   0.0   0:00.01 containerd-shim                          
  12159 root      20   0  722312  12912   9728 S   0.0   0.0   0:00.01 containerd-shim                          
  12203 root      20   0 5281416  79948  40544 S   0.0   0.0   0:00.55 asterisk                                 
  12211 root      20   0    1128      4      0 S   0.0   0.0   0:00.01 docker-init                              
  12425 root      20   0    2784   1012    924 S   0.0   0.0   0:00.00 sleep                                    
  12435 root      20   0  722568  13156   9856 S   0.0   0.0   0:00.01 containerd-shim                          
  12536 root      20   0  722568  11696   8576 S   0.0   0.0   0:00.00 containerd-shim                          
  12633 root      20   0  722568  11532   8696 S   0.0   0.0   0:00.01 containerd-shim                          
  12695 root      20   0  722568  11888   8704 S   0.0   0.0   0:00.01 containerd-shim                          
  12719 root      20   0  517864  26404  22840 S   0.0   0.0   0:00.05 oai_amf                                  
  12761 root      20   0  722824  11724   8760 S   0.0   0.0   0:00.00 containerd-shim                          
  12791 root      20   0  780596  25160  21756 S   0.0   0.0   0:00.05 oai_smf                                  
  12830 root      20   0  722568  12072   8888 S   0.0   0.0   0:00.01 containerd-shim                          
  12859 root      20   0  419776  19772  17000 S   0.0   0.0   0:00.04 oai_upf                                  
  13288 root      20   0    8132   4012   3332 R   0.0   0.0   0:00.00 top                                      

root@DataCenterCompute000:~/oai-cn5g#
```

```
root@DataCenterCompute000:~/oai-cn5g# ifconfig
demo-oai: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.70.129  netmask 255.255.255.192  broadcast 192.168.70.191
        ether 02:42:dc:d3:b3:77  txqueuelen 0  (Ethernet)
        RX packets 8  bytes 224 (224.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 1  bytes 54 (54.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

docker0: flags=4099<UP,BROADCAST,MULTICAST>  mtu 1500
        inet 172.17.0.1  netmask 255.255.0.0  broadcast 172.17.255.255
        ether 02:42:a6:fc:1c:1d  txqueuelen 0  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1350
        inet 10.0.4.194  netmask 255.255.255.0  broadcast 10.0.4.255
        ether fa:16:3e:74:81:e1  txqueuelen 1000  (Ethernet)
        RX packets 261147  bytes 1147682121 (1.1 GB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 196904  bytes 14201938 (14.2 MB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        loop  txqueuelen 1000  (Local Loopback)
        RX packets 440  bytes 51615 (51.6 KB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 440  bytes 51615 (51.6 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

veth0e81d3e: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        ether 86:fe:af:fc:67:6c  txqueuelen 0  (Ethernet)
        RX packets 245  bytes 22727 (22.7 KB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 209  bytes 17108 (17.1 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

veth4dfa77a: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        ether d2:8a:e9:87:51:cc  txqueuelen 0  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 8  bytes 336 (336.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

veth9a2fc8b: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        ether f6:97:ff:43:24:0f  txqueuelen 0  (Ethernet)
        RX packets 27  bytes 4464 (4.4 KB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 36  bytes 2964 (2.9 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

veth9a4b2d9: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        ether 4e:df:71:ad:34:c0  txqueuelen 0  (Ethernet)
        RX packets 1259  bytes 104231 (104.2 KB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 1503  bytes 138556 (138.5 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

veth9fb9882: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        ether ce:ce:91:1a:d4:d0  txqueuelen 0  (Ethernet)
        RX packets 251  bytes 22809 (22.8 KB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 216  bytes 17247 (17.2 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

vethb2dbeb2: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        ether 16:8e:95:86:a9:78  txqueuelen 0  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 8  bytes 336 (336.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

vethd15b386: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        ether 72:b4:5c:77:3d:08  txqueuelen 0  (Ethernet)
        RX packets 271  bytes 23949 (23.9 KB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 233  bytes 18235 (18.2 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

vethdf2a6b4: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        ether 8e:17:34:d4:53:31  txqueuelen 0  (Ethernet)
        RX packets 255  bytes 23559 (23.5 KB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 219  bytes 17756 (17.7 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

vethfd690de: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        ether 42:f2:31:01:27:51  txqueuelen 0  (Ethernet)
        RX packets 271  bytes 25017 (25.0 KB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 236  bytes 21321 (21.3 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

vethffeebd8: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        ether 56:ab:7d:00:4c:32  txqueuelen 0  (Ethernet)
        RX packets 294  bytes 26158 (26.1 KB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 256  bytes 21209 (21.2 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

root@DataCenterCompute000:~/oai-cn5g#
```

```
root@DataCenterCompute000:~/oai-cn5g# cat docker-compose.yaml
version: '3.8'
services:
    mysql:
        container_name: "mysql"
        image: mysql:8.0
        volumes:
            - ./database/oai_db.sql:/docker-entrypoint-initdb.d/oai_db.sql
            - ./healthscripts/mysql-healthcheck.sh:/tmp/mysql-healthcheck.sh
        environment:
            - TZ=Europe/Paris
            - MYSQL_DATABASE=oai_db
            - MYSQL_USER=test
            - MYSQL_PASSWORD=test
            - MYSQL_ROOT_PASSWORD=linux
        healthcheck:
            test: /bin/bash -c "/tmp/mysql-healthcheck.sh"
            interval: 5s
            timeout: 2s
            retries: 10
        networks:
            public_net:
                ipv4_address: 192.168.70.131
                
    ims:
        container_name: "ims"
        image: oaisoftwarealliance/ims:latest
        volumes:
            - ./conf/sip.conf:/etc/asterisk/sip.conf
            - ./conf/users.conf:/etc/asterisk/users.conf
        healthcheck:
            test: /bin/bash -c "pgrep asterisk"
            interval: 5s
            timeout: 2s
            retries: 10
        networks:
            public_net:
                ipv4_address: 192.168.70.139
    oai-udr:
        container_name: "oai-udr"
        image: oaisoftwarealliance/oai-udr:develop
        expose:
            - 80/tcp
            - 8080/tcp
        volumes:
            - ./conf/config.yaml:/openair-udr/etc/config.yaml
        environment:
            - TZ=Europe/Paris
        depends_on:
            - mysql
            - oai-nrf
        networks:
            public_net:
                ipv4_address: 192.168.70.136
    oai-udm:
        container_name: "oai-udm"
        image: oaisoftwarealliance/oai-udm:develop
        expose:
            - 80/tcp
            - 8080/tcp
        volumes:
            - ./conf/config.yaml:/openair-udm/etc/config.yaml
        environment:
            - TZ=Europe/Paris
        depends_on:
            - oai-udr
        networks:
            public_net:
                ipv4_address: 192.168.70.137
    oai-ausf:
        container_name: "oai-ausf"
        image: oaisoftwarealliance/oai-ausf:develop
        expose:
            - 80/tcp
            - 8080/tcp
        volumes:
            - ./conf/config.yaml:/openair-ausf/etc/config.yaml
        environment:
            - TZ=Europe/Paris
        depends_on:
            - oai-udm
        networks:
            public_net:
                ipv4_address: 192.168.70.138
    oai-nrf:
        container_name: "oai-nrf"
        image: oaisoftwarealliance/oai-nrf:develop
        expose:
            - 80/tcp
            - 8080/tcp
        volumes:
            - ./conf/config.yaml:/openair-nrf/etc/config.yaml
        environment:
            - TZ=Europe/Paris
        networks:
            public_net:
                ipv4_address: 192.168.70.130
    oai-amf:
        container_name: "oai-amf"
        image: oaisoftwarealliance/oai-amf:develop
        expose:
            - 80/tcp
            - 8080/tcp
            - 38412/sctp
        volumes:
            - ./conf/config.yaml:/openair-amf/etc/config.yaml
        environment:
            - TZ=Europe/Paris
        depends_on:
            - mysql
            - oai-nrf
            - oai-ausf
        networks:
            public_net:
                ipv4_address: 192.168.70.132
    oai-smf:
        container_name: "oai-smf"
        image: oaisoftwarealliance/oai-smf:develop
        expose:
            - 80/tcp
            - 8080/tcp
            - 8805/udp
        volumes:
            - ./conf/config.yaml:/openair-smf/etc/config.yaml
        environment:
            - TZ=Europe/Paris
        depends_on:
            - oai-nrf
            - oai-amf
        networks:
            public_net:
                ipv4_address: 192.168.70.133
    oai-upf:
        container_name: "oai-upf"
        image: oaisoftwarealliance/oai-upf:develop
        sysctls:
            - net.ipv4.ip_forward=1
        expose:
            - 2152/udp
            - 8805/udp
        volumes:
            - ./conf/config.yaml:/openair-upf/etc/config.yaml
        environment:
            - TZ=Europe/Paris
        depends_on:
            - oai-nrf
            - oai-smf
        cap_add:
            - NET_ADMIN
            - SYS_ADMIN
        cap_drop:
            - ALL
        privileged: true
        networks:
            public_net:
                ipv4_address: 192.168.70.134
    oai-ext-dn:
        privileged: true
        init: true
        container_name: oai-ext-dn
        image: oaisoftwarealliance/trf-gen-cn5g:jammy
        entrypoint: /bin/bash -c \
              "ip route add 10.0.0.0/16 via 192.168.70.134 dev eth0; ip route; sleep infinity"
        command: ["/bin/bash", "-c", "trap : SIGTERM SIGINT; sleep infinity & wait"]
        healthcheck:
            test: /bin/bash -c "ip r | grep 10.0.0"
            interval: 5s
            timeout: 2s
            retries: 10
        networks:
            public_net:
                ipv4_address: 192.168.70.135
networks:
    # public_net:
    #     external:
    #         name: demo-oai-public-net
    public_net:
        driver: bridge
        name: demo-oai-public-net
        ipam:
            config:
                - subnet: 192.168.70.128/26
        driver_opts:
            com.docker.network.bridge.name: "demo-oai"
```

```
root@DataCenterCompute000:~/oai-cn5g# cat docker-compose.yaml
version: '3.8'
services:
    mysql:
        container_name: "mysql"
        image: mysql:8.0
        volumes:
            - ./database/oai_db.sql:/docker-entrypoint-initdb.d/oai_db.sql
            - ./healthscripts/mysql-healthcheck.sh:/tmp/mysql-healthcheck.sh
        environment:
            - TZ=Europe/Paris
            - MYSQL_DATABASE=oai_db
            - MYSQL_USER=test
            - MYSQL_PASSWORD=test
            - MYSQL_ROOT_PASSWORD=linux
        healthcheck:
            test: /bin/bash -c "/tmp/mysql-healthcheck.sh"
            interval: 5s
            timeout: 2s
            retries: 10
        networks:
            public_net:
                ipv4_address: 192.168.70.131
                
    ims:
        container_name: "ims"
        image: oaisoftwarealliance/ims:latest
        volumes:
            - ./conf/sip.conf:/etc/asterisk/sip.conf
            - ./conf/users.conf:/etc/asterisk/users.conf
        healthcheck:
            test: /bin/bash -c "pgrep asterisk"
            interval: 5s
            timeout: 2s
            retries: 10
        networks:
            public_net:
                ipv4_address: 192.168.70.139
    oai-udr:
        container_name: "oai-udr"
        image: oaisoftwarealliance/oai-udr:develop
        expose:
            - 80/tcp
            - 8080/tcp
        volumes:
            - ./conf/config.yaml:/openair-udr/etc/config.yaml
        environment:
            - TZ=Europe/Paris
        depends_on:
            - mysql
            - oai-nrf
        networks:
            public_net:
                ipv4_address: 192.168.70.136
    oai-udm:
        container_name: "oai-udm"
        image: oaisoftwarealliance/oai-udm:develop
        expose:
            - 80/tcp
            - 8080/tcp
        volumes:
            - ./conf/config.yaml:/openair-udm/etc/config.yaml
        environment:
            - TZ=Europe/Paris
        depends_on:
            - oai-udr
        networks:
            public_net:
                ipv4_address: 192.168.70.137
    oai-ausf:
        container_name: "oai-ausf"
        image: oaisoftwarealliance/oai-ausf:develop
        expose:
            - 80/tcp
            - 8080/tcp
        volumes:
            - ./conf/config.yaml:/openair-ausf/etc/config.yaml
        environment:
            - TZ=Europe/Paris
        depends_on:
            - oai-udm
        networks:
            public_net:
                ipv4_address: 192.168.70.138
    oai-nrf:
        container_name: "oai-nrf"
        image: oaisoftwarealliance/oai-nrf:develop
        expose:
            - 80/tcp
            - 8080/tcp
        volumes:
            - ./conf/config.yaml:/openair-nrf/etc/config.yaml
        environment:
            - TZ=Europe/Paris
        networks:
            public_net:
                ipv4_address: 192.168.70.130
    oai-amf:
        container_name: "oai-amf"
        image: oaisoftwarealliance/oai-amf:develop
        expose:
            - 80/tcp
            - 8080/tcp
            - 38412/sctp
        volumes:
            - ./conf/config.yaml:/openair-amf/etc/config.yaml
        environment:
            - TZ=Europe/Paris
        depends_on:
            - mysql
            - oai-nrf
            - oai-ausf
        networks:
            public_net:
                ipv4_address: 192.168.70.132
    oai-smf:
        container_name: "oai-smf"
        image: oaisoftwarealliance/oai-smf:develop
        expose:
            - 80/tcp
            - 8080/tcp
            - 8805/udp
        volumes:
            - ./conf/config.yaml:/openair-smf/etc/config.yaml
        environment:
            - TZ=Europe/Paris
        depends_on:
            - oai-nrf
            - oai-amf
        networks:
            public_net:
                ipv4_address: 192.168.70.133
    oai-upf:
        container_name: "oai-upf"
        image: oaisoftwarealliance/oai-upf:develop
        sysctls:
            - net.ipv4.ip_forward=1
        expose:
            - 2152/udp
            - 8805/udp
        volumes:
            - ./conf/config.yaml:/openair-upf/etc/config.yaml
        environment:
            - TZ=Europe/Paris
        depends_on:
            - oai-nrf
            - oai-smf
        cap_add:
            - NET_ADMIN
            - SYS_ADMIN
        cap_drop:
            - ALL
        privileged: true
        networks:
            public_net:
                ipv4_address: 192.168.70.134
    oai-ext-dn:
        privileged: true
        init: true
        container_name: oai-ext-dn
        image: oaisoftwarealliance/trf-gen-cn5g:jammy
        entrypoint: /bin/bash -c \
              "ip route add 10.0.0.0/16 via 192.168.70.134 dev eth0; ip route; sleep infinity"
        command: ["/bin/bash", "-c", "trap : SIGTERM SIGINT; sleep infinity & wait"]
        healthcheck:
            test: /bin/bash -c "ip r | grep 10.0.0"
            interval: 5s
            timeout: 2s
            retries: 10
        networks:
            public_net:
                ipv4_address: 192.168.70.135
networks:
    # public_net:
    #     external:
    #         name: demo-oai-public-net
    public_net:
        driver: bridge
        name: demo-oai-public-net
        ipam:
            config:
                - subnet: 192.168.70.128/26
        driver_opts:
            com.docker.network.bridge.name: "demo-oai"
root@DataCenterCompute000:~/oai-cn5g# ip route show table all
default via 10.0.4.1 dev eth0 
10.0.4.0/24 dev eth0 proto kernel scope link src 10.0.4.194 
172.17.0.0/16 dev docker0 proto kernel scope link src 172.17.0.1 linkdown 
192.168.70.128/26 dev demo-oai proto kernel scope link src 192.168.70.129 
broadcast 10.0.4.0 dev eth0 table local proto kernel scope link src 10.0.4.194 
local 10.0.4.194 dev eth0 table local proto kernel scope host src 10.0.4.194 
broadcast 10.0.4.255 dev eth0 table local proto kernel scope link src 10.0.4.194 
broadcast 127.0.0.0 dev lo table local proto kernel scope link src 127.0.0.1 
local 127.0.0.0/8 dev lo table local proto kernel scope host src 127.0.0.1 
local 127.0.0.1 dev lo table local proto kernel scope host src 127.0.0.1 
broadcast 127.255.255.255 dev lo table local proto kernel scope link src 127.0.0.1 
broadcast 172.17.0.0 dev docker0 table local proto kernel scope link src 172.17.0.1 linkdown 
local 172.17.0.1 dev docker0 table local proto kernel scope host src 172.17.0.1 
broadcast 172.17.255.255 dev docker0 table local proto kernel scope link src 172.17.0.1 linkdown 
broadcast 192.168.70.128 dev demo-oai table local proto kernel scope link src 192.168.70.129 
local 192.168.70.129 dev demo-oai table local proto kernel scope host src 192.168.70.129 
broadcast 192.168.70.191 dev demo-oai table local proto kernel scope link src 192.168.70.129 
root@DataCenterCompute000:~/oai-cn5g#
```

```
root@DataCenterCompute000:~/oai-cn5g/conf# iptables -S
# Warning: iptables-legacy tables present, use iptables-legacy to see them
-P INPUT ACCEPT
-P FORWARD ACCEPT
-P OUTPUT ACCEPT
-N DOCKER
-N DOCKER-ISOLATION-STAGE-1
-N DOCKER-ISOLATION-STAGE-2
-N DOCKER-USER
-A FORWARD -j DOCKER-USER
-A FORWARD -j DOCKER-ISOLATION-STAGE-1
-A FORWARD -o docker0 -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT
-A FORWARD -o docker0 -j DOCKER
-A FORWARD -i docker0 ! -o docker0 -j ACCEPT
-A FORWARD -i docker0 -o docker0 -j ACCEPT
-A FORWARD -o demo-oai -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT
-A FORWARD -o demo-oai -j DOCKER
-A FORWARD -i demo-oai ! -o demo-oai -j ACCEPT
-A FORWARD -i demo-oai -o demo-oai -j ACCEPT
-A DOCKER-ISOLATION-STAGE-1 -i docker0 ! -o docker0 -j DOCKER-ISOLATION-STAGE-2
-A DOCKER-ISOLATION-STAGE-1 -i demo-oai ! -o demo-oai -j DOCKER-ISOLATION-STAGE-2
-A DOCKER-ISOLATION-STAGE-1 -j RETURN
-A DOCKER-ISOLATION-STAGE-2 -o docker0 -j DROP
-A DOCKER-ISOLATION-STAGE-2 -o demo-oai -j DROP
-A DOCKER-ISOLATION-STAGE-2 -j RETURN
-A DOCKER-USER -j RETURN
root@DataCenterCompute000:~/oai-cn5g/conf#
```

```
root@DataCenterCompute000:~/oai-cn5g/conf# iptables-legacy -S
-P INPUT ACCEPT
-P FORWARD ACCEPT
-P OUTPUT ACCEPT
root@DataCenterCompute000:~/oai-cn5g/conf#
```

### OAI 5G gNB on AgronomyFarm-BS-000

```
root@AgronomyFarmBS000:~# ifconfig
eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1350
        inet 10.0.4.107  netmask 255.255.255.0  broadcast 10.0.4.255
        ether fa:16:3e:d1:57:d9  txqueuelen 1000  (Ethernet)
        RX packets 25057  bytes 121135897 (121.1 MB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 20092  bytes 1381456 (1.3 MB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

eth1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.20.4  netmask 255.255.255.0  broadcast 192.168.20.255
        ether 02:42:c0:a8:14:04  txqueuelen 0  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

eth2: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.30.4  netmask 255.255.255.0  broadcast 192.168.30.255
        ether 02:42:c0:a8:1e:04  txqueuelen 0  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 0  bytes 0 (0.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        loop  txqueuelen 1000  (Local Loopback)
        RX packets 52  bytes 5452 (5.4 KB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 52  bytes 5452 (5.4 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

```

```
root@AgronomyFarmBS000:~# ip a show
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
329: eth0@if330: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1350 qdisc noqueue state UP group default qlen 1000
    link/ether fa:16:3e:d1:57:d9 brd ff:ff:ff:ff:ff:ff link-netnsid 0
    inet 10.0.4.107/24 brd 10.0.4.255 scope global eth0
       valid_lft forever preferred_lft forever
334: eth1@if7: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default 
    link/ether 02:42:c0:a8:14:04 brd ff:ff:ff:ff:ff:ff link-netnsid 0
    inet 192.168.20.4/24 brd 192.168.20.255 scope global eth1
       valid_lft forever preferred_lft forever
335: eth2@if6: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default 
    link/ether 02:42:c0:a8:1e:04 brd ff:ff:ff:ff:ff:ff link-netnsid 0
    inet 192.168.30.4/24 brd 192.168.30.255 scope global eth2
       valid_lft forever preferred_lft forever
root@AgronomyFarmBS000:~#
```

```
root@AgronomyFarmBS000:~# ip route show table all
default via 10.0.4.1 dev eth0 
10.0.4.0/24 dev eth0 proto kernel scope link src 10.0.4.107 
192.168.20.0/24 dev eth1 proto kernel scope link src 192.168.20.4 
192.168.30.0/24 dev eth2 proto kernel scope link src 192.168.30.4 
broadcast 10.0.4.0 dev eth0 table local proto kernel scope link src 10.0.4.107 
local 10.0.4.107 dev eth0 table local proto kernel scope host src 10.0.4.107 
broadcast 10.0.4.255 dev eth0 table local proto kernel scope link src 10.0.4.107 
broadcast 127.0.0.0 dev lo table local proto kernel scope link src 127.0.0.1 
local 127.0.0.0/8 dev lo table local proto kernel scope host src 127.0.0.1 
local 127.0.0.1 dev lo table local proto kernel scope host src 127.0.0.1 
broadcast 127.255.255.255 dev lo table local proto kernel scope link src 127.0.0.1 
broadcast 192.168.20.0 dev eth1 table local proto kernel scope link src 192.168.20.4 
local 192.168.20.4 dev eth1 table local proto kernel scope host src 192.168.20.4 
broadcast 192.168.20.255 dev eth1 table local proto kernel scope link src 192.168.20.4 
broadcast 192.168.30.0 dev eth2 table local proto kernel scope link src 192.168.30.4 
local 192.168.30.4 dev eth2 table local proto kernel scope host src 192.168.30.4 
broadcast 192.168.30.255 dev eth2 table local proto kernel scope link src 192.168.30.4 
root@AgronomyFarmBS000:~#
```

```
root@AgronomyFarmBS000:~# uhd_find_devices 
[INFO] [UHD] linux; GNU C++ version 9.4.0; Boost_107100; UHD_4.4.0.HEAD-0-g5fac246b
--------------------------------------------------
-- UHD Device 0
--------------------------------------------------
Device Address:
    serial: 335FEAC
    addr: 192.168.20.2
    claimed: False
    fpga: HG
    mgmt_addr: 192.168.20.2
    name: ni-n3xx-335FEAC
    product: n320
    type: n3xx


--------------------------------------------------
-- UHD Device 1
--------------------------------------------------
Device Address:
    serial: 335FEAF
    addr: 192.168.30.2
    claimed: False
    fpga: HG
    mgmt_addr: 192.168.30.2
    name: ni-n3xx-335FEAF
    product: n320
    type: n3xx


root@AgronomyFarmBS000:~#
```

```
root@AgronomyFarmBS000:~# cat ~/openairinterface5g/targets/PROJECTS/GENERIC-NR-5GC/CONF/gnb.sa.band78.fr1.106PRB.usrpb210.conf
Active_gNBs = ( "gNB-OAI");
# Asn1_verbosity, choice in: none, info, annoying
Asn1_verbosity = "none";

gNBs =
(
 {
    ////////// Identification parameters:
    gNB_ID    =  0xe00;
    gNB_name  =  "gNB-OAI";

    // Tracking area code, 0x0000 and 0xfffe are reserved values
    tracking_area_code  =  1;
    plmn_list = ({ mcc = 001; mnc = 01; mnc_length = 2; snssaiList = ({ sst = 1; sd = 0xffffff; }) });

    nr_cellid = 12345678L;

    ////////// Physical parameters:

    pdsch_AntennaPorts_XP                                     = 2;
    pusch_AntennaPorts                                        = 2;
    do_CSIRS                                                  = 1;
    do_SRS                                                    = 1;

    servingCellConfigCommon = (
    {
 #spCellConfigCommon

      physCellId                                                    = 0;

#  downlinkConfigCommon
    #frequencyInfoDL
      # this is 3600 MHz + 43 PRBs@30kHz SCS (same as initial BWP)
      absoluteFrequencySSB                                             = 627744;  //641280;
      dl_frequencyBand                                                 = 78;
      # this is 3600 MHz
      dl_absoluteFrequencyPointA                                       = 626472;  //640008;
      #scs-SpecificCarrierList
        dl_offstToCarrier                                              = 0;
# subcarrierSpacing
# 0=kHz15, 1=kHz30, 2=kHz60, 3=kHz120
        dl_subcarrierSpacing                                           = 1;
        dl_carrierBandwidth                                            = 106;
     #initialDownlinkBWP
      #genericParameters
        # this is RBstart=27,L=48 (275*(L-1))+RBstart
        initialDLBWPlocationAndBandwidth                               = 28875; # 6366 12925 12956 28875 12952
# subcarrierSpacing
# 0=kHz15, 1=kHz30, 2=kHz60, 3=kHz120
        initialDLBWPsubcarrierSpacing                                   = 1;
      #pdcch-ConfigCommon
        initialDLBWPcontrolResourceSetZero                              = 12;
        initialDLBWPsearchSpaceZero                                     = 0;

  #uplinkConfigCommon
     #frequencyInfoUL
      ul_frequencyBand                                              = 78;
      #scs-SpecificCarrierList
      ul_offstToCarrier                                             = 0;
# subcarrierSpacing
# 0=kHz15, 1=kHz30, 2=kHz60, 3=kHz120
      ul_subcarrierSpacing                                          = 1;
      ul_carrierBandwidth                                           = 106;
      pMax                                                          = 20;
     #initialUplinkBWP
      #genericParameters
        initialULBWPlocationAndBandwidth                            = 28875;
# subcarrierSpacing
# 0=kHz15, 1=kHz30, 2=kHz60, 3=kHz120
        initialULBWPsubcarrierSpacing                               = 1;
      #rach-ConfigCommon
        #rach-ConfigGeneric
          prach_ConfigurationIndex                                  = 98;
#prach_msg1_FDM
#0 = one, 1=two, 2=four, 3=eight
          prach_msg1_FDM                                            = 0;
          prach_msg1_FrequencyStart                                 = 0;
          zeroCorrelationZoneConfig                                 = 13;
          preambleReceivedTargetPower                               = -96;
#preamblTransMax (0...10) = (3,4,5,6,7,8,10,20,50,100,200)
          preambleTransMax                                          = 6;
#powerRampingStep
# 0=dB0,1=dB2,2=dB4,3=dB6
        powerRampingStep                                            = 1;
#ra_ReponseWindow
#1,2,4,8,10,20,40,80
        ra_ResponseWindow                                           = 4;
#ssb_perRACH_OccasionAndCB_PreamblesPerSSB_PR
#1=oneeighth,2=onefourth,3=half,4=one,5=two,6=four,7=eight,8=sixteen
        ssb_perRACH_OccasionAndCB_PreamblesPerSSB_PR                = 4;
#oneHalf (0..15) 4,8,12,16,...60,64
        ssb_perRACH_OccasionAndCB_PreamblesPerSSB                   = 14;
#ra_ContentionResolutionTimer
#(0..7) 8,16,24,32,40,48,56,64
        ra_ContentionResolutionTimer                                = 7;
        rsrp_ThresholdSSB                                           = 19;
#prach-RootSequenceIndex_PR
#1 = 839, 2 = 139
        prach_RootSequenceIndex_PR                                  = 2;
        prach_RootSequenceIndex                                     = 1;
        # SCS for msg1, can only be 15 for 30 kHz < 6 GHz, takes precendence over the one derived from prach-ConfigIndex
        #
        msg1_SubcarrierSpacing                                      = 1,
# restrictedSetConfig
# 0=unrestricted, 1=restricted type A, 2=restricted type B
        restrictedSetConfig                                         = 0,

        msg3_DeltaPreamble                                          = 1;
        p0_NominalWithGrant                                         =-90;

# pucch-ConfigCommon setup :
# pucchGroupHopping
# 0 = neither, 1= group hopping, 2=sequence hopping
        pucchGroupHopping                                           = 0;
        hoppingId                                                   = 40;
        p0_nominal                                                  = -90;
# ssb_PositionsInBurs_BitmapPR
# 1=short, 2=medium, 3=long
      ssb_PositionsInBurst_PR                                       = 2;
      ssb_PositionsInBurst_Bitmap                                   = 1;

# ssb_periodicityServingCell
# 0 = ms5, 1=ms10, 2=ms20, 3=ms40, 4=ms80, 5=ms160, 6=spare2, 7=spare1
      ssb_periodicityServingCell                                    = 2;

# dmrs_TypeA_position
# 0 = pos2, 1 = pos3
      dmrs_TypeA_Position                                           = 0;

# subcarrierSpacing
# 0=kHz15, 1=kHz30, 2=kHz60, 3=kHz120
      subcarrierSpacing                                             = 1;


  #tdd-UL-DL-ConfigurationCommon
# subcarrierSpacing
# 0=kHz15, 1=kHz30, 2=kHz60, 3=kHz120
      referenceSubcarrierSpacing                                    = 1;
      # pattern1
      # dl_UL_TransmissionPeriodicity
      # 0=ms0p5, 1=ms0p625, 2=ms1, 3=ms1p25, 4=ms2, 5=ms2p5, 6=ms5, 7=ms10
      dl_UL_TransmissionPeriodicity                                 = 6;
      nrofDownlinkSlots                                             = 7;
      nrofDownlinkSymbols                                           = 6;
      nrofUplinkSlots                                               = 2;
      nrofUplinkSymbols                                             = 4;

      ssPBCH_BlockPower                                             = -25;
  }

  );


    # ------- SCTP definitions
    SCTP :
    {
        # Number of streams to use in input/output
        SCTP_INSTREAMS  = 2;
        SCTP_OUTSTREAMS = 2;
    };


    ////////// AMF parameters:
    amf_ip_address      = ( { ipv4       = "192.168.70.132";
                              ipv6       = "192:168:30::17";
                              active     = "yes";
                              preference = "ipv4";
                            }
                          );


    NETWORK_INTERFACES :
    {
        GNB_INTERFACE_NAME_FOR_NG_AMF            = "eth0";
        GNB_IPV4_ADDRESS_FOR_NG_AMF              = "10.0.4.107/24";
        GNB_INTERFACE_NAME_FOR_NGU               = "eth0";
        GNB_IPV4_ADDRESS_FOR_NGU                 = "10.0.4.107/24";
        GNB_PORT_FOR_S1U                         = 2152; # Spec 2152
    };

  }
);

MACRLCs = (
{
  num_cc                      = 1;
  tr_s_preference             = "local_L1";
  tr_n_preference             = "local_RRC";
  pusch_TargetSNRx10          = 150;
  pucch_TargetSNRx10          = 200;
  ulsch_max_frame_inactivity  = 0;
  dl_max_mcs                  = 28;
}
);

L1s = (
{
  num_cc = 1;
  tr_n_preference       = "local_mac";
  prach_dtx_threshold   = 120;
  pucch0_dtx_threshold  = 100;
  ofdm_offset_divisor   = 8; #set this to UINT_MAX for offset 0
}
);

RUs = (
{
  local_rf       = "yes"
  nb_tx          = 2
  nb_rx          = 2
  att_tx         = 0;
  att_rx         = 0;
  bands          = [78];
  max_pdschReferenceSignalPower = -27;
  max_rxgain                    = 60;
  eNB_instances  = [0];
  #beamforming 1x4 matrix:
  bf_weights = [0x00007fff, 0x0000, 0x0000, 0x0000];
  clock_src = "internal";
  sdr_addrs = "addr=192.168.20.2";
}
);

THREAD_STRUCT = (
{
  #three config for level of parallelism "PARALLEL_SINGLE_THREAD", "PARALLEL_RU_L1_SPLIT", or "PARALLEL_RU_L1_TRX_SPLIT"
  parallel_config    = "PARALLEL_SINGLE_THREAD";
  #two option for worker "WORKER_DISABLE" or "WORKER_ENABLE"
  worker_config      = "WORKER_ENABLE";
}
);

rfsimulator :
{
  serveraddr = "server";
  serverport = "4043";
  options = (); #("saviq"); or/and "chanmod"
  modelname = "AWGN";
  IQfile = "/tmp/rfsimulator.iqs";
};

security = {
  # preferred ciphering algorithms
  # the first one of the list that an UE supports in chosen
  # valid values: nea0, nea1, nea2, nea3
  ciphering_algorithms = ( "nea0" );

  # preferred integrity algorithms
  # the first one of the list that an UE supports in chosen
  # valid values: nia0, nia1, nia2, nia3
  integrity_algorithms = ( "nia2", "nia0" );

  # setting 'drb_ciphering' to "no" disables ciphering for DRBs, no matter
  # what 'ciphering_algorithms' configures; same thing for 'drb_integrity'
  drb_ciphering = "yes";
  drb_integrity = "no";
};

log_config :
{
  global_log_level                      ="info";
  hw_log_level                          ="info";
  phy_log_level                         ="info";
  mac_log_level                         ="info";
  rlc_log_level                         ="info";
  pdcp_log_level                        ="info";
  rrc_log_level                         ="info";
  ngap_log_level                        ="debug";
  f1ap_log_level                        ="debug";
};

root@AgronomyFarmBS000:~#
```

```
root@AgronomyFarmBS000:~#  ip route add 192.168.70.128/26 via 10.0.4.194 dev eth0
root@AgronomyFarmBS000:~# ip route show table all
default via 10.0.4.1 dev eth0 
10.0.4.0/24 dev eth0 proto kernel scope link src 10.0.4.107 
192.168.20.0/24 dev eth1 proto kernel scope link src 192.168.20.4 
192.168.30.0/24 dev eth2 proto kernel scope link src 192.168.30.4 
192.168.70.128/26 via 10.0.4.194 dev eth0 
broadcast 10.0.4.0 dev eth0 table local proto kernel scope link src 10.0.4.107 
local 10.0.4.107 dev eth0 table local proto kernel scope host src 10.0.4.107 
broadcast 10.0.4.255 dev eth0 table local proto kernel scope link src 10.0.4.107 
broadcast 127.0.0.0 dev lo table local proto kernel scope link src 127.0.0.1 
local 127.0.0.0/8 dev lo table local proto kernel scope host src 127.0.0.1 
local 127.0.0.1 dev lo table local proto kernel scope host src 127.0.0.1 
broadcast 127.255.255.255 dev lo table local proto kernel scope link src 127.0.0.1 
broadcast 192.168.20.0 dev eth1 table local proto kernel scope link src 192.168.20.4 
local 192.168.20.4 dev eth1 table local proto kernel scope host src 192.168.20.4 
broadcast 192.168.20.255 dev eth1 table local proto kernel scope link src 192.168.20.4 
broadcast 192.168.30.0 dev eth2 table local proto kernel scope link src 192.168.30.4 
local 192.168.30.4 dev eth2 table local proto kernel scope host src 192.168.30.4 
broadcast 192.168.30.255 dev eth2 table local proto kernel scope link src 192.168.30.4 
root@AgronomyFarmBS000:~#
```
