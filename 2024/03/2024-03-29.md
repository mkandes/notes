# Transferring Data on OSG with stashcp

Example Dockerfile(s) with stashcp installation: https://github.com/osg-htc/htc-images/blob/main/htc/ubuntu%3A20.04/Dockerfile

Be aware that OSDF aggressively caches data based on filenames. If you need make quick changes, please version the files such that the caches will see a "new" filename. If you do not label new data, some caches will serve the old version of the file while other caches will serve the new version. Prevent this type of distribution inconsitency by creating a new filenames and versioning your datasets.

 
*Command:*
```
stashcp --help
```
*Output:*
```
[mkandes@ap20 ~]$ stashcp --help
Copy a file to/from the OSDF

Usage:
  stashcp {source ...} {destination} [flags]

Flags:
  -c, --cache string             Cache to use
  -n, --cache-list-name string   (Deprecated) Cache list to use, currently either xroot or xroots; may be ignored (default "xroot")
  -j, --caches-json string       A JSON file containing the list of caches
      --closest                  Return the closest cache and exit
  -d, --debug                    Enable debug logs
  -h, --help                     help for stashcp
      --list-names               Return the names of pre-configured cache lists and exit
      --methods string           Comma separated list of methods to try, in order (default "http")
      --namespaces               Print the namespace information and exit
  -r, --recursive                Recursively copy a directory.  Forces methods to only be http to get the freshest directory contents
  -t, --token string             Token file to use for transfer
  -v, --version                  Print the version and exit
[mkandes@ap20 ~]$
```

 
*Command:*
```
stashcp --closest
```
*Output:*
```
osg-chicago-stashcache.nrp.internet2.edu
```

 
```
Filesystem quota report
Storage      Used (GB)    Limit (GB)    Files (#)    Quota (%)
---------  -----------  ------------  -----------  -----------
$HOME            10.07            50         6883        20.15
$DATA           188.31           500        60243        37.66
$SCRATCH

[mkandes@ap20 ~]$
```
