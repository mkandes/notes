# Developing a new Spack instance

To begin the development of a new Spack instance that will be merged into one of SDSC's deployment branches, login into the HPC system where the new instance will be developed, tested, and, eventually, deployed. 

```
mkandes@hardtack:~$ ssh mkandes@login.expanse.sdsc.edu
Welcome to Bright release         9.0

                                                         Based on Rocky Linux 8
                                                                    ID: #000002

--------------------------------------------------------------------------------

                                 WELCOME TO
                  _______  __ ____  ___    _   _______ ______
                 / ____/ |/ // __ \/   |  / | / / ___// ____/
                / __/  |   // /_/ / /| | /  |/ /\__ \/ __/
               / /___ /   |/ ____/ ___ |/ /|  /___/ / /___
              /_____//_/|_/_/   /_/  |_/_/ |_//____/_____/

--------------------------------------------------------------------------------

Use the following commands to adjust your environment:

'module avail'            - show available modules
'module add <module>'     - adds a module to your environment for this session
'module initadd <module>' - configure module to be loaded at every login

-------------------------------------------------------------------------------
Last login: Thu Apr 18 07:32:18 2024 from 208.58.212.11
[mkandes@login02 ~]$
```

If you do not have a copy of your personal fork of the sdsc/spack repository on this system, then clone the fork to your HOME directory.

```
[mkandes@login02 ~]$ cd software/spack/
[mkandes@login02 spack]$ ls
releases  repositories
[mkandes@login02 spack]$ cd repositories/
[mkandes@login02 repositories]$ ls
sdsc  spack
[mkandes@login02 repositories]$ mkdir mkandes
[mkandes@login02 repositories]$ cd mkandes/
[mkandes@login02 mkandes]$ git clone https://github.com/mkandes/spack.git
Cloning into 'spack'...
remote: Enumerating objects: 563831, done.
remote: Total 563831 (delta 0), reused 0 (delta 0), pack-reused 563831
Receiving objects: 100% (563831/563831), 241.70 MiB | 38.24 MiB/s, done.
Resolving deltas: 100% (260856/260856), done.
Updating files: 100% (12424/12424), done.
[mkandes@login02 mkandes]$
```

Once your fork is cloned, enter the top-level directory of the repository and check that the current default branch in your fork is the deployment branch to which the new instance should be added.

```
[mkandes@login02 mkandes]$ cd spack/
[mkandes@login02 spack]$ git branch
* sdsc-0.17.3
[mkandes@login02 spack]$
```

If it is, then before you proceed make sure to fetch any changes and resync your copy of the deployment branch with the sdsc/spack upstream repository. 

```
[mkandes@login02 spack]$ git remote -v
origin	https://github.com/mkandes/spack.git (fetch)
origin	https://github.com/mkandes/spack.git (push)
[mkandes@login02 spack]$ git remote add upstream https://github.com/sdsc/spack.git
[mkandes@login02 spack]$ git remote -v
origin	https://github.com/mkandes/spack.git (fetch)
origin	https://github.com/mkandes/spack.git (push)
upstream	https://github.com/sdsc/spack.git (fetch)
upstream	https://github.com/sdsc/spack.git (push)
[mkandes@login02 spack]$ git fetch upstream
remote: Enumerating objects: 16388, done.
remote: Counting objects: 100% (4993/4993), done.
remote: Total 16388 (delta 4993), reused 4993 (delta 4993), pack-reused 11395
Receiving objects: 100% (16388/16388), 196.24 MiB | 28.61 MiB/s, done.
Resolving deltas: 100% (9867/9867), completed with 1190 local objects.
From https://github.com/sdsc/spack
 * [new branch]            FASTMath/ATPESC18                     -> upstream/FASTMath/ATPESC18
 * [new branch]            FASTMath/ATPESC19                     -> upstream/FASTMath/ATPESC19
 * [new branch]            PR/openblas                           -> upstream/PR/openblas
 * [new branch]            PR/pymock                             -> upstream/PR/pymock
 * [new branch]            add-miniconda3@4.8.2-and-revert-4.7.12.1 -> upstream/add-miniconda3@4.8.2-and-revert-4.7.12.1
 * [new branch]            amklinv/amanzi                        -> upstream/amklinv/amanzi
 * [new branch]            ascent                                -> upstream/ascent
 * [new branch]            autotools-cflags                      -> upstream/autotools-cflags
 * [new branch]            barry/ceed                            -> upstream/barry/ceed
 * [new branch]            boost-intel-toolset                   -> upstream/boost-intel-toolset
 * [new branch]            bugfix/buildable-true-override-virtual -> upstream/bugfix/buildable-true-override-virtual
 * [new branch]            bugfix/bz2-libs                       -> upstream/bugfix/bz2-libs
 * [new branch]            bugfix/compare-abstract-specs         -> upstream/bugfix/compare-abstract-specs
 * [new branch]            bugfix/cray-no-module-preloaded       -> upstream/bugfix/cray-no-module-preloaded
 * [new branch]            bugfix/env-activate-only-installed-concrete-specs -> upstream/bugfix/env-activate-only-installed-concrete-specs
 * [new branch]            bugfix/improved-uid-detection         -> upstream/bugfix/improved-uid-detection
 * [new branch]            bugfix/m4_sierra_gcc_2                -> upstream/bugfix/m4_sierra_gcc_2
 * [new branch]            bugfix/multiarch-detection            -> upstream/bugfix/multiarch-detection
 * [new branch]            bugfix/ordered-compiler-names         -> upstream/bugfix/ordered-compiler-names
 * [new branch]            bugfix/sbang-filter-non-ascii-python-3 -> upstream/bugfix/sbang-filter-non-ascii-python-3
 * [new branch]            bugfix/setup-env                      -> upstream/bugfix/setup-env
 * [new branch]            bugfix/shasta-hotfix-live-branch      -> upstream/bugfix/shasta-hotfix-live-branch
 * [new branch]            bugfix/target-args-cray-compilers     -> upstream/bugfix/target-args-cray-compilers
 * [new branch]            cdash/xsdk                            -> upstream/cdash/xsdk
 * [new branch]            chain-doc-minor-improvement           -> upstream/chain-doc-minor-improvement
 * [new branch]            concretizer                           -> upstream/concretizer
 * [new branch]            cray-libsci-and-ver                   -> upstream/cray-libsci-and-ver
 * [new branch]            dependabot/github_actions/actions/setup-python-4.6.0 -> upstream/dependabot/github_actions/actions/setup-python-4.6.0
 * [new branch]            dependabot/github_actions/docker/build-push-action-4.0.0 -> upstream/dependabot/github_actions/docker/build-push-action-4.0.0
 * [new branch]            dependabot/github_actions/docker/login-action-2.1.0 -> upstream/dependabot/github_actions/docker/login-action-2.1.0
 * [new branch]            dependabot/github_actions/docker/setup-buildx-action-2.5.0 -> upstream/dependabot/github_actions/docker/setup-buildx-action-2.5.0
 * [new branch]            dependabot/github_actions/docker/setup-qemu-action-2.1.0 -> upstream/dependabot/github_actions/docker/setup-qemu-action-2.1.0
 * [new branch]            develop                               -> upstream/develop
 * [new branch]            docs/environment-scopes               -> upstream/docs/environment-scopes
 * [new branch]            documentation/asp_based_solver        -> upstream/documentation/asp_based_solver
 * [new branch]            eaf/200402-SpackEnvironmentDocs       -> upstream/eaf/200402-SpackEnvironmentDocs
 * [new branch]            efischer/190121-SetupEnv              -> upstream/efischer/190121-SetupEnv
 * [new branch]            efischer/190923-MultiPackagePrototype -> upstream/efischer/190923-MultiPackagePrototype
 * [new branch]            efischer/docs2                        -> upstream/efischer/docs2
 * [new branch]            features/add-buildcache-list-to-database -> upstream/features/add-buildcache-list-to-database
 * [new branch]            features/anonymous_specs-fix          -> upstream/features/anonymous_specs-fix
 * [new branch]            features/arch-swapping                -> upstream/features/arch-swapping
 * [new branch]            features/cached-cmake-build-system    -> upstream/features/cached-cmake-build-system
 * [new branch]            features/cflags-resuse                -> upstream/features/cflags-resuse
 * [new branch]            features/cmake_deps                   -> upstream/features/cmake_deps
 * [new branch]            features/compil                       -> upstream/features/compil
 * [new branch]            features/detect-and-swap-current-python -> upstream/features/detect-and-swap-current-python
 * [new branch]            features/env-improvements-release     -> upstream/features/env-improvements-release
 * [new branch]            features/env-pre-cmd                  -> upstream/features/env-pre-cmd
 * [new branch]            features/find-linux-compilers-by-module -> upstream/features/find-linux-compilers-by-module
 * [new branch]            features/fix-cc-wrapper               -> upstream/features/fix-cc-wrapper
 * [new branch]            features/improved-python-detection    -> upstream/features/improved-python-detection
 * [new branch]            features/libs-command                 -> upstream/features/libs-command
 * [new branch]            features/make-platform-command-line-option -> upstream/features/make-platform-command-line-option
 * [new branch]            features/more-coverage                -> upstream/features/more-coverage
 * [new branch]            features/multi-download               -> upstream/features/multi-download
 * [new branch]            features/parallel-mirror              -> upstream/features/parallel-mirror
 * [new branch]            features/rstudio                      -> upstream/features/rstudio
 * [new branch]            features/sandbox-builds               -> upstream/features/sandbox-builds
 * [new branch]            features/setup_py                     -> upstream/features/setup_py
 * [new branch]            features/shebang-warning-to-msg       -> upstream/features/shebang-warning-to-msg
 * [new branch]            features/solver                       -> upstream/features/solver
 * [new branch]            features/spack-mirror-verify          -> upstream/features/spack-mirror-verify
 * [new branch]            features/spack-test-add-show-subcommand -> upstream/features/spack-test-add-show-subcommand
 * [new branch]            features/spack-test-hdf5-fix          -> upstream/features/spack-test-hdf5-fix
 * [new branch]            features/spack-test-openmpi           -> upstream/features/spack-test-openmpi
 * [new branch]            features/spack-test-openmpi-add-tests -> upstream/features/spack-test-openmpi-add-tests
 * [new branch]            features/stat_coral_test              -> upstream/features/stat_coral_test
 * [new branch]            features/tty-output                   -> upstream/features/tty-output
 * [new branch]            features/view-with-env                -> upstream/features/view-with-env
 * [new branch]            features/virtual-packages             -> upstream/features/virtual-packages
 * [new branch]            fish-shell-1                          -> upstream/fish-shell-1
 * [new branch]            fix_cc                                -> upstream/fix_cc
 * [new branch]            flake8-sha256                         -> upstream/flake8-sha256
 * [new branch]            fugaku-cross-compilation              -> upstream/fugaku-cross-compilation
 * [new branch]            gh-pages                              -> upstream/gh-pages
 * [new branch]            github/pr_templates                   -> upstream/github/pr_templates
 * [new branch]            implicit-variables-setup              -> upstream/implicit-variables-setup
 * [new branch]            legion-update                         -> upstream/legion-update
 * [new branch]            libfabric-191-seems-to-work-on-darwin -> upstream/libfabric-191-seems-to-work-on-darwin
 * [new branch]            mfem                                  -> upstream/mfem
 * [new branch]            mfem-updates                          -> upstream/mfem-updates
 * [new branch]            mfu-cmake                             -> upstream/mfu-cmake
 * [new branch]            mpbelhorn-aomp-3.9.0-wip-patch        -> upstream/mpbelhorn-aomp-3.9.0-wip-patch
 * [new branch]            package/archer                        -> upstream/package/archer
 * [new branch]            packages/gsl-external-cblas           -> upstream/packages/gsl-external-cblas
 * [new branch]            packages/pruners-mpi                  -> upstream/packages/pruners-mpi
 * [new branch]            packages/tulip                        -> upstream/packages/tulip
 * [new branch]            parse-oneapi-version                  -> upstream/parse-oneapi-version
 * [new branch]            pipelines-fix-develop-ambiguity       -> upstream/pipelines-fix-develop-ambiguity
 * [new branch]            pipelines-improve-ci-job-label        -> upstream/pipelines-improve-ci-job-label
 * [new branch]            proto/sys-packages-old                -> upstream/proto/sys-packages-old
 * [new branch]            py-cffi-fix-checksum                  -> upstream/py-cffi-fix-checksum
 * [new branch]            py26-bootstrap                        -> upstream/py26-bootstrap
 * [new branch]            release_pipeline                      -> upstream/release_pipeline
 * [new branch]            releases/v0.10.0                      -> upstream/releases/v0.10.0
 * [new branch]            releases/v0.11.0                      -> upstream/releases/v0.11.0
 * [new branch]            releases/v0.11.1                      -> upstream/releases/v0.11.1
 * [new branch]            releases/v0.11.2                      -> upstream/releases/v0.11.2
 * [new branch]            releases/v0.12                        -> upstream/releases/v0.12
 * [new branch]            releases/v0.13                        -> upstream/releases/v0.13
 * [new branch]            releases/v0.13-hwlloc-master          -> upstream/releases/v0.13-hwlloc-master
 * [new branch]            releases/v0.14                        -> upstream/releases/v0.14
 * [new branch]            releases/v0.15                        -> upstream/releases/v0.15
 * [new branch]            releases/v0.16                        -> upstream/releases/v0.16
 * [new branch]            retry_serial                          -> upstream/retry_serial
 * [new branch]            revert-4.7.12.1                       -> upstream/revert-4.7.12.1
 * [new branch]            sdsc-0.15.4                           -> upstream/sdsc-0.15.4
 * [new branch]            sdsc-0.17.1                           -> upstream/sdsc-0.17.1
 * [new branch]            sdsc-0.17.2                           -> upstream/sdsc-0.17.2
 * [new branch]            sdsc-0.17.3                           -> upstream/sdsc-0.17.3
 * [new branch]            sdsc-0.18.0                           -> upstream/sdsc-0.18.0
 * [new branch]            sdsc-0.19.1                           -> upstream/sdsc-0.19.1
 * [new branch]            separate-wrapper-decorator            -> upstream/separate-wrapper-decorator
 * [new branch]            shorten-install-status-help           -> upstream/shorten-install-status-help
 * [new branch]            silo-qt4                              -> upstream/silo-qt4
 * [new branch]            spacktivate                           -> upstream/spacktivate
 * [new branch]            spec-language-ideas                   -> upstream/spec-language-ideas
 * [new branch]            spec-parse-inequalities               -> upstream/spec-parse-inequalities
 * [new branch]            spec-target-flag-option               -> upstream/spec-target-flag-option
 * [new branch]            stacks-debugging                      -> upstream/stacks-debugging
 * [new branch]            test-gitlab-check-stays-pending       -> upstream/test-gitlab-check-stays-pending
 * [new branch]            test/v0.13-with-fast-environments     -> upstream/test/v0.13-with-fast-environments
 * [new branch]            testing/wip_xsdk                      -> upstream/testing/wip_xsdk
 * [new branch]            tests/vtk-m-smoke-test-fix            -> upstream/tests/vtk-m-smoke-test-fix
 * [new branch]            topic-libSplash160                    -> upstream/topic-libSplash160
 * [new branch]            tutorials/advanced_packaging          -> upstream/tutorials/advanced_packaging
 * [new branch]            update/ipopt                          -> upstream/update/ipopt
 * [new branch]            v-dobrev/extend-default-spec-queries  -> upstream/v-dobrev/extend-default-spec-queries
 * [new branch]            vendor-clingo                         -> upstream/vendor-clingo
 * [new branch]            z3-bootstrap-2.6                      -> upstream/z3-bootstrap-2.6
 * [new branch]            z3-concretizer                        -> upstream/z3-concretizer
[mkandes@login02 spack]$ git push
Username for 'https://github.com': mkandes
Password for 'https://mkandes@github.com': 
Everything up-to-date
[mkandes@login02 spack]$
```

Now create a new branch where the new Spack instance will be developed and tested prior to submitting it back as a pull request to be merged into the upstream sdsc/spack repository. 

```
[mkandes@login02 spack]$ git branch
* sdsc-0.17.3
  sdsc-0.17.3-gh-124-inst-exp-cpu-dev
[mkandes@login02 spack]$
```

Then checkout the new branch and start development of the new instance.

```
[mkandes@login02 spack]$ git checkout sdsc-0.17.3-gh-124-inst-exp-cpu-dev
Switched to branch 'sdsc-0.17.3-gh-124-inst-exp-cpu-dev'
[mkandes@login02 spack]$ git branch
  sdsc-0.17.3
* sdsc-0.17.3-gh-124-inst-exp-cpu-dev
[mkandes@login02 spack]$
```

Here, in this case, we want to create development versions of the latest existing production Spack instances on Expanse, namely, `expanse/0.17.3/cpu/b` and `expanse/0.17.3/gpu/b`. These instances will allow us to more quickly test system changes and their possible affects on the already depolyed production Spack instances. In addition, they will serve as the basis of all new Spack instances moving forward as we update to newer versions of Spack. The inention here is to pull out of the poroduction instances all of the benchmark applications we used as part of acceptance testing for Expanse. We'll create this new subset of instances as special versions of the named `cpu` and `gpu` production instances, where they will be labelled by `SPACK_INSTANCE_VERSION='dev'`. 

```
[mkandes@login02 spack]$ ls
activate-shared-spack-instance.sh   CONTRIBUTING.md  lib             pyproject.toml  share
bin                                 COPYRIGHT        LICENSE-APACHE  pytest.ini      var
CHANGELOG.md                        DEPLOYMENT.md    LICENSE-MIT     README.md
configure-shared-spack-instance.sh  etc              NOTICE          SECURITY.md
[mkandes@login02 spack]$ cd etc/spack/sdsc/
[mkandes@login02 sdsc]$ ls
expanse  tscc
[mkandes@login02 sdsc]$ cd expanse/
[mkandes@login02 expanse]$ ls
0.17.3
[mkandes@login02 expanse]$ cd 0.17.3/
[mkandes@login02 0.17.3]$ ls
cpu  gpu
[mkandes@login02 0.17.3]$ cd cpu/
[mkandes@login02 cpu]$ ls
b
[mkandes@login02 cpu]$ mkdir dev
[mkandes@login02 cpu]$
```

With the new subdirectory for the `cpu/dev` instance created, we can start replicating the production `cpu/b` instance by making a copy of its `*.yaml` configuration files. 

```
[mkandes@login02 cpu]$ ls
b  dev
[mkandes@login02 cpu]$ ls b/
specs  SPECS.md  yamls
[mkandes@login02 cpu]$ cp -rp b/yamls/ dev/yamls
[mkandes@login02 cpu]$ cd dev/yamls/
[mkandes@login02 yamls]$ ls
compilers.yaml  modules.yaml  packages.yaml
[mkandes@login02 yamls]$
```

Next, we'll reinitialize the configuration files by removing all entires that are either not necessary for a base Spack instance and/or this `dev` instance. Starting with the `compilers.yaml` file, remove all compilers, except the `gcc` compiler from the operating system, which will serve as the base compiler upon which the instance will be boostraped. 

```
[mkandes@login02 yamls]$ cat compilers.yaml 
compilers:
- compiler:
    spec: gcc@8.5.0
    paths:
      cc: /usr/bin/gcc
      cxx: /usr/bin/g++
      f77: /usr/bin/gfortran
      fc: /usr/bin/gfortran
    flags:
      cflags: -O2 -march=native
      cxxflags: -O2 -march=native
      fflags: -O2 -march=native
    operating_system: rocky8
    target: x86_64
    modules: []
    environment: {}
    extra_rpaths: []
- compiler:
    spec: gcc@10.2.0
    paths:
      cc: /cm/shared/apps/spack/0.17.3/cpu/b/opt/spack/linux-rocky8-zen/gcc-8.5.0/gcc-10.2.0-npcyll4gxjhf4tejksmdzlsl3d3usqpd/bin/gcc
      cxx: /cm/shared/apps/spack/0.17.3/cpu/b/opt/spack/linux-rocky8-zen/gcc-8.5.0/gcc-10.2.0-npcyll4gxjhf4tejksmdzlsl3d3usqpd/bin/g++
      f77: /cm/shared/apps/spack/0.17.3/cpu/b/opt/spack/linux-rocky8-zen/gcc-8.5.0/gcc-10.2.0-npcyll4gxjhf4tejksmdzlsl3d3usqpd/bin/gfortran
      fc: /cm/shared/apps/spack/0.17.3/cpu/b/opt/spack/linux-rocky8-zen/gcc-8.5.0/gcc-10.2.0-npcyll4gxjhf4tejksmdzlsl3d3usqpd/bin/gfortran
    flags:
      cflags: -O2 -march=native
      cxxflags: -O2 -march=native
      fflags: -O2 -march=native
    operating_system: rocky8
    target: x86_64
    modules: []
    environment: {}
    extra_rpaths: []
- compiler:
    spec: aocc@3.2.0
    paths:
      cc: /cm/shared/apps/spack/0.17.3/cpu/b/opt/spack/linux-rocky8-zen/gcc-8.5.0/aocc-3.2.0-io3s466wsnnichqc2o2rikbuloev5bmq/bin/clang
      cxx: /cm/shared/apps/spack/0.17.3/cpu/b/opt/spack/linux-rocky8-zen/gcc-8.5.0/aocc-3.2.0-io3s466wsnnichqc2o2rikbuloev5bmq/bin/clang++
      f77: /cm/shared/apps/spack/0.17.3/cpu/b/opt/spack/linux-rocky8-zen/gcc-8.5.0/aocc-3.2.0-io3s466wsnnichqc2o2rikbuloev5bmq/bin/flang
      fc: /cm/shared/apps/spack/0.17.3/cpu/b/opt/spack/linux-rocky8-zen/gcc-8.5.0/aocc-3.2.0-io3s466wsnnichqc2o2rikbuloev5bmq/bin/flang
    flags:
      cflags: -O2 -march=native
      cxxflags: -O2 -march=native
      fflags: -O2 -march=native
    operating_system: rocky8
    target: x86_64
    modules: []
    environment: {}
    extra_rpaths: []
- compiler:
    spec: intel@19.1.3.304
    paths:
      cc: /cm/shared/apps/spack/0.17.3/cpu/b/opt/spack/linux-rocky8-zen/gcc-8.5.0/intel-19.1.3.304-6pv46sozip5o35ezrswc4p77gsiawktn/bin/icc
      cxx: /cm/shared/apps/spack/0.17.3/cpu/b/opt/spack/linux-rocky8-zen/gcc-8.5.0/intel-19.1.3.304-6pv46sozip5o35ezrswc4p77gsiawktn/bin/icpc
      f77: /cm/shared/apps/spack/0.17.3/cpu/b/opt/spack/linux-rocky8-zen/gcc-8.5.0/intel-19.1.3.304-6pv46sozip5o35ezrswc4p77gsiawktn/bin/ifort
      fc: /cm/shared/apps/spack/0.17.3/cpu/b/opt/spack/linux-rocky8-zen/gcc-8.5.0/intel-19.1.3.304-6pv46sozip5o35ezrswc4p77gsiawktn/bin/ifort
    flags:
      cflags: -O2 -march=native
      cxxflags: -O2 -march=native
      fflags: -O2 -march=native
    operating_system: rocky8
    target: x86_64
    modules: []
    environment: {}
    extra_rpaths: []
[mkandes@login02 yamls]$ which gcc
/usr/bin/gcc
[mkandes@login02 yamls]$ gcc --version
gcc (GCC) 8.5.0 20210514 (Red Hat 8.5.0-18)
Copyright (C) 2018 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

[mkandes@login02 yamls]$ vi compilers.yaml 
[mkandes@login02 yamls]$ cat compilers.yaml 
compilers:
- compiler:
    spec: gcc@8.5.0
    paths:
      cc: /usr/bin/gcc
      cxx: /usr/bin/g++
      f77: /usr/bin/gfortran
      fc: /usr/bin/gfortran
    flags:
      cflags: -O2 -march=native
      cxxflags: -O2 -march=native
      fflags: -O2 -march=native
    operating_system: rocky8
    target: x86_64
    modules: []
    environment: {}
    extra_rpaths: []
[mkandes@login02 yamls]$
```

The `modules.yaml` configruation file could likely remain as-is. However, we would also like to implement a few changes to the module enviornment on Expanse moving forward, both cosmetic and pratical. For example, the major change here will be to use a dash instead of a slash between a package's version number and the Spack hash. This is the format currently in use on TSCC and will remove the requirement that users explicitly specify the version when loading a module. This may also help with reducing the maintanence on the latest version of the example batch job scripts provided for users.

```
[mkandes@login02 yamls]$ cat modules.yaml 
modules:
  default:
    enable::
      - lmod
    lmod:
      core_compilers:
        - 'gcc@8.5.0'
      hierarchy:
        - mpi
      hash_length: 0
      blacklist_implicits: true
      whitelist: ['py-jupyter-core', 'hadoop']
      naming_scheme: '{name}/{version}/{hash:7}'
      projections:
        all: '{name}/{version}/{hash:7}'
      all:
        suffixes:
          '+openmp': omp
          'threads=openmp': omp
          '+ipl64': i64
        environment:
          set:
            '{name}HOME': '{prefix}'
      intel:
        environment:
          set:
            INTEL_LICENSE_FILE: '40000@elprado.sdsc.edu:40200@elprado.sdsc.edu'
      petsc:
        suffixes:
          '+complex': cmplx
      slepc:
        suffixes:
          '^petsc +complex': cmplx
      ^python:
        autoload: 'direct'
      ^ucx:
        autoload: 'direct'
[mkandes@login02 yamls]$ vi modules.yaml 
[mkandes@login02 yamls]$ cat modules.yaml 
modules:
  default:
    enable::
      - lmod
    lmod:
      core_compilers:
        - 'gcc@8.5.0'
      hierarchy:
        - mpi
      hash_length: 0
      blacklist_implicits: true
      naming_scheme: '{name}/{version}-{hash:7}'
      projections:
        all: '{name}/{version}-{hash:7}'
      all:
        suffixes:
          '+openmp': omp
          'threads=openmp': omp
          '+ipl64': i64
        environment:
          set:
            '{name}_ROOT': '{prefix}'
      intel:
        environment:
          set:
            INTEL_LICENSE_FILE: '40000@elprado.sdsc.edu:40200@elprado.sdsc.edu'
      petsc:
        suffixes:
          '+complex': cmplx
      slepc:
        suffixes:
          '^petsc +complex': cmplx
      ^python:
        autoload: 'direct'
      ^ucx:
        autoload: 'direct'
[mkandes@login02 yamls]$
```

Similarly, we'll clean up the `packages.yaml` configuration file to only include the essential external packages required for the `dev` instances and update them as needed to reflect their current state on Expanse.

```
[mkandes@login02 yamls]$ cat packages.yaml 
packages:
  lmod:
    externals:
      - spec: 'lmod@8.2.4'
        prefix: /usr
    buildable: false
  lustre:
    externals:
      - spec: 'lustre@2.15.2'
        prefix: /usr
    buildable: false
  openssl:
    externals:
      - spec: 'openssl@1.1.1k'
        prefix: /usr
    buildable: false
  rdma-core:
    externals:
      - spec: 'rdma-core@43.0'
        prefix: /usr
    buildable: false
  slurm:
    externals:
      - spec: 'slurm@21.08.8'
        prefix: /cm/shared/apps/slurm/21.08.8
    buildable: false
  librsvg:
    externals:
      - spec: 'librsvg@2.42.7'
        prefix: /usr
    buildable: false
  ghostscript:
    externals:
      - spec: 'ghostscript@9.27'
        prefix: /usr
    buildable: false
  gaussian:
    permissions:
      read: group
      group: gaussian
  vasp6:
    permissions:
      read: group
      group: vasp-6

[mkandes@login02 yamls]$ module --version

Modules based on Lua: Version 8.2.4  2019-11-14 12:45 -06:00
    by Robert McLay mclay@tacc.utexas.edu

[mkandes@login02 yamls]$ lfs --version
lfs 2.15.2
[mkandes@login02 yamls]$ openssl
OpenSSL> version
OpenSSL 1.1.1k  FIPS 25 Mar 2021
OpenSSL> exit
[mkandes@login02 yamls]$ find /usr -name 'librdma*'
/usr/share/doc/librdmacm
/usr/share/doc/librdmacm/librdmacm.md
find: ‘/usr/share/polkit-1/rules.d’: Permission denied
find: ‘/usr/share/selinux/targeted/default/active’: Permission denied
find: ‘/usr/libexec/initscripts/legacy-actions/auditd’: Permission denied
/usr/lib64/librdmacm.so.1.3.43.0
/usr/lib64/pkgconfig/librdmacm.pc
/usr/lib64/librdmacm.a
/usr/lib64/librdmacm.so.1
/usr/lib64/librdmacm.so
find: ‘/usr/lib64/security/pam_bright’: Permission denied
[mkandes@login02 yamls]$ sbatch --version
slurm 23.02.7
[mkandes@login02 yamls]$ which sbatch
/cm/shared/apps/slurm/current/bin/sbatch
[mkandes@login02 yamls]$ ls -lahtr $(which sbatch)
-rwxr-xr-x 1 root root 444K Dec 17 10:03 /cm/shared/apps/slurm/current/bin/sbatch
[mkandes@login02 yamls]$ ls -lahtr /cm/shared/apps/slurm
total 512
drwxr-xr-x  5 root root  3 Aug 26  2020 var
drwxr-xr-x  3 root root  6 Sep 28  2020 slurmctld_stats
drwxr-xr-x  3 root root  5 Aug 11  2021 jobstate
drwxr-xr-x  2 root root  6 May 12  2022 scripts
drwxr-xr-x  3 root root  6 Oct 24  2022 nodestate
drwxr-xr-x 43 root root 42 Apr 14  2023 ..
drwxr-xr-x  7 root root  5 Dec 18 08:59 21.08.8
drwxr-xr-x  8 root root  6 Feb 12 09:00 23.02.7
drwxr-xr-x  7 root root  5 Feb 12 09:00 23.02.6
lrwxrwxrwx  1 root root  7 Feb 12 09:02 current -> 23.02.7
drwxr-xr-x 10 root root  9 Feb 12 09:02 .
[mkandes@login02 yamls]$ find /usr -name 'librsvg*'
/usr/share/licenses/librsvg2
/usr/share/thumbnailers/librsvg.thumbnailer
/usr/share/doc/librsvg2
find: ‘/usr/share/polkit-1/rules.d’: Permission denied
find: ‘/usr/share/selinux/targeted/default/active’: Permission denied
find: ‘/usr/libexec/initscripts/legacy-actions/auditd’: Permission denied
/usr/lib64/librsvg-2.so.2.42.7
/usr/lib64/librsvg-2.so.2
find: ‘/usr/lib64/security/pam_bright’: Permission denied
[mkandes@login02 yamls]$ gs --version
9.27
[mkandes@login02 yamls]$ vi packages.yaml 
[mkandes@login02 yamls]$ cat packages.yaml 
packages:
  lmod:
    externals:
      - spec: 'lmod@8.2.4'
        prefix: /usr
    buildable: false
  lustre:
    externals:
      - spec: 'lustre@2.15.2'
        prefix: /usr
    buildable: false
  openssl:
    externals:
      - spec: 'openssl@1.1.1k'
        prefix: /usr
    buildable: false
  rdma-core:
    externals:
      - spec: 'rdma-core@43.0'
        prefix: /usr
    buildable: false
  slurm:
    externals:
      - spec: 'slurm@23.02.7'
        prefix: /cm/shared/apps/slurm/current
    buildable: false
[mkandes@login02 yamls]$
```

Now that we have the configruation files ready to begin developing the `cpu/dev` instance, let's try and plan out an initial deployment by creating a pared down version of the SPECS.md file. 

```
[mkandes@login02 dev]$ cat SPECS.md 
# expanse/0.17.3/cpu


| Core (gcc@8.5.0)           |
| -------------------------- |
| parallel@20210922          |
| pigz@2.6                   |
| git@2.31.1                 |
| git-lfs@2.11.0             |
| gh@2.0.0                   |
| subversion@1.14.0          |
| mercurial@5.8              |
| aria2@1.35.0               |
| rclone@1.56.2              |
| sratoolkit@2.10.9          |
| entrezdirect@10.7.20190114 |
| anaconda3@2021.05          |
| matlab@2022b               | 



| gcc@10.2.0               | openmpi@4.1.3              | openmpi@3.1.6              | intel-mpi@2019.10.317      | mvapich2@2.3.7             | openmpi@4.1.1 |
| ------------------------ | -------------------------- | -------------------------- | -------------------------- | -------------------------- | ------------- |
| cmake@3.21.4             | hpl@2.3                    | hpl@2.3                    | hpl@2.3                    | hpl@2.3                    | orca@5.0.4    |
| perl@5.32.0              | hpl@2.3-omp                | hpl@2.3-omp                | hpl@2.3-omp                | hpl@2.3-omp                |
| tcl@8.6.11               | osu-micro-benchmarks@5.7.1 | osu-micro-benchmarks@5.7.1 | osu-micro-benchmarks@5.7.1 | osu-micro-benchmarks@5.7.1 |
| tcl@8.5.9                | netlib-scalapack@2.1.0     | netlib-scalapack@2.1.0     | netlib-scalapack@2.1.0     | netlib-scalapack@2.1.0     |
| sqlite@3.36.0            | fftw@3.3.10                | fftw@3.3.10                | fftw@3.3.10                | fftw@3.3.10                |
| python@3.8.12            | hdf5@1.10.7                | hdf5@1.10.7                | hdf5@1.10.7                | hdf5@1.10.7                |
| py-setuptools@58.2.0     | parmetis@4.0.3             | parmetis@4.0.3             | parmetis@4.0.3             | parmetis@4.0.3             |
| py-pip@21.1.2            | parallel-netcdf@1.12.2     | parallel-netcdf@1.12.2     | parallel-netcdf@1.12.2     | parallel-netcdf@1.12.2     |
| py-virtualenv@16.7.6     | ior@3.3.0                  | ior@3.3.0                  | ior@3.3.0                  | ior@3.3.0                  |
| py-cython@0.29.24        | netcdf-c@4.8.1             | netcdf-c@4.8.1             | netcdf-c@4.8.1             | netcdf-c@4.8.1             |
| gdb@11.1                 | netcdf-cxx4@4.3.1          | netcdf-cxx4@4.3.1          | netcdf-cxx4@4.3.1          | netcdf-cxx4@4.3.1          |
| ninja@1.10.2             | netcdf-fortran@4.5.3       | netcdf-fortran@4.5.3       | netcdf-fortran@4.5.3       | netcdf-fortran@4.5.3       |
| meson@0.60.0             | py-mpi4py@3.1.2            | py-mpi4py@3.1.2            | py-mpi4py@3.1.2            | py-mpi4py@3.1.2            |
| openjdk@11.0.12\_7       | py-h5py@3.4.0              | py-h5py@3.4.0              | py-h5py@3.4.0              | py-h5py@3.4.0              |
| openjdk@1.8.0\_265-b01   | py-netcdf4@1.5.3           | py-netcdf4@1.5.3           | py-netcdf4@1.5.3           | py-netcdf4@1.5.3           |
| ant@1.10.7               | arpack-ng@3.7.0            | arpack-ng@3.7.0            | arpack-ng@3.7.0            | arpack-ng@3.7.0            |
| ffmpeg@4.3.2             | boost@1.77.0               | boost@1.77.0               | boost@1.77.0               | boost@1.77.0               |
| imagemagick@7.0.8-7      | superlu-dist@7.1.1         | superlu-dist@7.1.1         | superlu-dist@7.1.1         | superlu-dist@7.1.1         |
| gnuplot@5.4.2            | hypre@2.23.0               | hypre@2.23.0               | hypre@2.23.0               | hypre@2.23.0               |
| eigen@3.4.0              | valgrind@3.17.0            | valgrind@3.17.0            | valgrind@3.17.0            | valgrind@3.17.0            |
| openblas@0.3.18          | mpip@3.5                   | mpip@3.5                   | mpip@3.5                   | mpip@3.5                   |
| openblas@0.3.18-omp      | tau@2.30.2                 | tau@2.30.2                 | tau@2.30.2                 | tau@2.30.2                 |
| netlib-lapack@3.9.1      | scotch@6.1.1               | sprng@5.0                  |                            |                            |
| intel-mkl@2020.4.304     | mumps@5.4.0                |                            |                            | qchem@6.0                  |
| gsl@2.7                  | adios2@2.7.1               |
| fftw@3.3.10              | petsc@3.16.1               |
| fftw@2.1.5               | petsc@3.16.1-cmplx         |
| hdf5@1.10.7              | slepc@3.16.0               |
| metis@5.1.0              | slepc@3.16.0-cmplx         |
| netcdf-c@4.8.1           | py-petsc4py@3.16.1         |
| netcdf-cxx4@4.3.1        | py-slepc4py@3.16.0         |
| netcdf-fortran@4.5.3     | mrbayes@3.2.7a             |
| ncview@2.1.8             | raxml@8.2.12               | 
| nco@5.0.1                | relion@3.1.4               |
| glpk@4.65                | relion@4.0.0               | 
| qhull@2020.2             | plumed@2.6.3               |
| qrupdate@1.1.2           | gromacs@2020.4             |
| geos@3.9.1               | charmpp@6.10.2             | 
| py-numpy@1.20.3          | namd@2.14                  |
| py-scipy@1.5.4           | lammps@20210310            |
| py-sympy@1.8             | nwchem@7.0.2               |
| py-pandas@1.3.4          | siesta@4.0.2               | 
| py-h5py@3.4.0            | quantum-espresso@7.0       |
| py-netcdf4@1.5.3         | paraview@5.9.1             | 
| py-scikit-learn@1.0.1    | openfoam@2106              | 
| py-matplotlib@3.4.3      | wrf@4.2                    | 
| py-scikit-optimize@0.5.2 | wps@4.2                    |
| py-statsmodels@0.12.2    | neuron@8.0.0               |
| py-seaborn@0.11.2        |                            |
| py-dask@2021.6.2         | amber@22                   |
| py-jupyterlab@3.2.1      | vasp6@6.2.1                |
| arpack-ng@3.8.0          |
| boost@1.77.0             |
| adol-c@2.7.2             |
| hypre@2.23.0             |
| suite-sparse@5.10.1      | 
| superlu@5.3.0            |
| sprng@5.0                |
| libmatheval@1.1.11       |
| papi@6.0.0.1             |
| valgrind@3.17.0          |
| petsc@3.16.1             |
| petsc@3.16.1-cmplx       |
| slepc@3.16.0             |
| slepc@3.16.0-cmplx       |  
| py-petsc4py@3.16.1       |
| py-slepc4py@3.16.0       |
| r@4.1.1                  |
| julia@1.6.3              |
| octave@6.3.0             |
| esmf@8.1.1               |
| gdal@3.3.3               |
| adios2@2.7.1             |
| kokkos@3.4.01            |
| cgal@5.0.3               |
| cgal@4.13                |
| libxc@5.1.5              |
| molden@6.7               |
| vmd@1.9.3                |
| py-ase@3.21.1            |
| py-pyscf@1.7.5           |
| libbeagle@3.1.2          |
| beast1@1.8.4             |
| beast1@1.10.4            |
| beast2@2.5.2             |
| beast2@2.6.4             | 
| htslib@1.13              |
| htslib@1.12              |
| bcftools@1.12            |
| samtools@1.13            |
| bedtools2@2.30.0         |
| blast-plus@2.12.0        |
| fastp@0.20.0             |
| gatk@4.2.2.0             |
| kallisto@0.46.2          |
| picard@2.26.2            | 
| raxml-ng@1.0.2           |
| spades@3.15.3            |
| star@2.7.10a             |
| stringtie@1.3.4d         |
| trimmomatic@0.39         | 
| bowtie2@2.4.2            |
| bismark@0.23.0           |
| jellyfish@2.2.7          |
| salmon@1.4.0             |
| iq-tree@2.1.3            |
| trinity@2.12.0           |
| hisat2@2.2.0             |
| perl-bioperl@1.7.6       |
| py-pysam@0.15.3          |
| py-htseq@0.11.2          |



| intel@19.1.3.304         | openmpi@4.1.3              | intel-mpi@2019.10.317      | mvapich2@2.3.7             |
| ------------------------ | -------------------------- | -------------------------- | -------------------------- |
| cmake@3.21.4             | hpl@2.3                    | hpl@2.3                    | hpl@2.3                    |
| eigen@3.4.0              | hpl@2.3-omp                | hpl@2.3-omp                | hpl@2.3-omp                |
| openblas@0.3.18          | osu-micro-benchmarks@5.7.1 | osu-micro-benchmarks@5.7.1 | osu-micro-benchmarks@5.7.1 |
| openblas@0.3.18-omp      | netlib-scalapack@2.1.0     | netlib-scalapack@2.1.0     | netlib-scalapack@2.1.0     |
| netlib-lapack@3.9.1      | fftw@3.3.10                | fftw@3.3.10                | fftw@3.3.10                |
| intel-mkl@2020.4.304     | hdf5@1.10.7                | hdf5@1.10.7                | hdf5@1.10.7                |
| gsl@2.7                  | parmetis@4.0.3             | parmetis@4.0.3             | parmetis@4.0.3             |
| fftw@3.3.10              | parallel-netcdf@1.12.2     | parallel-netcdf@1.12.2     | parallel-netcdf@1.12.2     |
| hdf5@1.10.7              | ior@3.3.0                  | ior@3.3.0                  | ior@3.3.0                  |
| metis@5.1.0              | netcdf-c@4.8.1             | netcdf-c@4.8.1             | netcdf-c@4.8.1             |
| netcdf-c@4.8.1           | netcdf-cxx4@4.3.1          | netcdf-cxx4@4.3.1          | netcdf-cxx4@4.3.1          | 
| netcdf-cxx4@4.3.1        | netcdf-fortran@4.5.3       | netcdf-fortran@4.5.3       | netcdf-fortran@4.5.3       |
| netcdf-fortran@4.5.3     | arpack-ng@3.7.0            | arpack-ng@3.7.0            | arpack-ng@3.7.0            |
| arpack-ng@3.8.0          | superlu-dist@7.1.1         | superlu-dist@7.1.1         | superlu-dist@7.1.1         |
| hypre@2.23.0             | hypre@2.23.0               | hypre@2.23.0               | hypre@2.23.0               |
| suite-sparse@5.10.1      | valgrind@3.17.0            | valgrind@3.17.0            | valgrind@3.17.0            |
| superlu@5.3.0            | mpip@3.5                   | mpip@3.5                   | mpip@3.5                   |
| sprng@5.0                | tau@2.30.2                 | tau@2.30.2                 | tau@2.30.2                 |
| papi@6.0.0.1             |
| valgrind@3.17.0          |
| petsc@3.16.1             |
| petsc@3.16.1-cmplx       |
| slepc@3.16.0             |
| slepc@3.16.0-cmplx       |



| aocc@3.2.0               | openmpi@4.1.3              |
| ------------------------ | -------------------------- |
| cmake@3.21.4             | hpl@2.3                    |
| amdlibm@3.1              | hpl@2.3-omp                |
| eigen@3.4.0              | osu-micro-benchmarks@5.7.1 |
| openblas@0.3.18          | netlib-scalapack@2.1.0     |
| amdblis@3.1              | amdscalapack@3.1           |
| amdblis@3.1-omp          | fftw@3.3.10                |
| netlib-lapack@3.9.1      | amdfftw@3.1                |
| amdlibflame@3.1          | hdf5@1.10.7                |
| gsl@2.7                  | parmetis@4.0.3             |
| fftw@3.3.10              | parallel-netcdf@1.12.2     |
| amdfftw@3.1              | ior@3.3.0                  |
| amdfftw@3.1-omp          |                            |
| hdf5@1.10.7              | netcdf-c@4.8.1             |
| metis@5.1.0              | netcdf-cxx4@4.3.1          |
| netcdf-c@4.8.1           | netcdf-fortran@4.5.3       |
| netcdf-cxx4@4.3.1        | boost@1.77.0               | 
| netcdf-fortran@4.5.3     | superlu-dist@7.1.1         |
| boost@1.77.0             | hypre@2.23.0               |
| aocl-sparse@3.1          | valgrind@3.17.0            |
| hypre@2.23.0             | mpip@3.5                   |
| suite-sparse@5.10.1      | scotch@6.1.1               |
| superlu@5.3.0            | adios2@2.7.1               |
| sprng@5.0                | petsc@3.16.1               |
| papi@6.0.0.1             |                            |
| valgrind@3.17.0          | gromacs@2020.4             |
| cgal@5.0.3               | charmpp@6.10.2             |
| cgal@4.13                | namd@2.14                  |
|                          | lammps@20210310            |
|                          | nwchem@7.0.2               |
|                          | cp2k@7.1                   |
|                          | openfoam@2106              |
|                          | wrf@4.2                    |
|                          | wps@4.2                    |
|                          |                            |
|                          | vasp6@6.2.1                |
[mkandes@login02 dev]$
[mkandes@login02 dev]$ vi SPECS.md 
[mkandes@login02 dev]$ cat SPECS.md 
# expanse/0.17.3/cpu


| Core (gcc@8.5.0)           |
| -------------------------- |



| gcc@10.2.0               | openmpi@4.1.3              | mvapich2@2.3.7             |     
| ------------------------ | -------------------------- | -------------------------- |
|                          | hpl@2.3                    | hpl@2.3                    |
|                          | hpl@2.3-omp                | hpl@2.3-omp                |
|                          | osu-micro-benchmarks@5.7.1 | osu-micro-benchmarks@5.7.1 |
|                          | ior@3.3.0                  | ior@3.3.0                  |
|                          | gromacs@2020.4             |
|                          | namd@2.14                  |
|                          | quantum-espresso@7.0       |
|                          | openfoam@2106              | 
|                          | wrf@4.2                    | 
|                          | neuron@8.0.0               |
| beast2@2.6.4             |                            |


| aocc@3.2.0               | openmpi@4.1.3              |
| ------------------------ | -------------------------- |
|                          | hpl@2.3                    |
|                          | hpl@2.3-omp                |
|                          | osu-micro-benchmarks@5.7.1 |
|                          | ior@3.3.0                  |
|                          | gromacs@2020.4             |
|                          | namd@2.14                  |
|                          | openfoam@2106              |
|                          | wrf@4.2                    |
[mkandes@login02 dev]$
```

This should get us started. We'll have to fill in the key explicit dependencies for the benchmark applications as we build out the instance, but that will be a good to review as well working back from spack info and spack find for applications as currently deployed in production. Let's go ahead and create the initial spec build scripts starting from the existing production ones. 

```
[mkandes@login02 dev]$ ls
SPECS.md  yamls
[mkandes@login02 dev]$ mkdir specs
[mkandes@login02 dev]$ cd specs/
[mkandes@login02 specs]$ cp -rp ../../
b/   dev/ 
[mkandes@login02 specs]$ cp -rp ../../b/
specs/    SPECS.md  yamls/    
[mkandes@login02 specs]$ cp -rp ../../b/specs/
anaconda3@2021.05.o21694095.exp-15-56           git@2.31.1.o21693612.exp-15-56                  parallel@20210922.sh
anaconda3@2021.05.sh                            git@2.31.1.sh                                   pgi@18.10/
aocc@3.2.0/                                     git-lfs@2.11.0.o21693736.exp-15-56              pgi@18.10.sh
aocc@3.2.0.o21740680.exp-15-56                  git-lfs@2.11.0.sh                               pigz@2.6.o21693610.exp-15-56
aocc@3.2.0.o21740726.exp-15-56                  intel@19.1.3.304/                               pigz@2.6.sh
aocc@3.2.0.sh                                   intel@19.1.3.304.o21749258.exp-15-56            rclone@1.56.2.o21694048.exp-15-56
aria2@1.35.0.o21694011.exp-15-56                intel@19.1.3.304.o21749373.exp-15-56            rclone@1.56.2.sh
aria2@1.35.0.sh                                 intel@19.1.3.304.sh                             sratoolkit@2.10.9.o21694059.exp-15-56
entrezdirect@10.7.20190114.o21694065.exp-15-56  libxsmm@1.16.3.sh                               sratoolkit@2.10.9.sh
entrezdirect@10.7.20190114.sh                   matlab@2022b.sh                                 subversion@1.14.0.o21693810.exp-15-56
gcc@10.2.0/                                     mercurial@5.8.o21693989.exp-15-56               subversion@1.14.0.sh
gcc@10.2.0.o21694812.exp-15-56                  mercurial@5.8.sh                                ucx@1.10.1.o21745904.exp-15-56
gcc@10.2.0.sh                                   nvhpc@21.3/                                     ucx@1.10.1.sh
gh@2.0.0.o21693793.exp-15-56                    nvhpc@21.3.sh                                   
gh@2.0.0.sh                                     parallel@20210922.o21693459.exp-15-56           
[mkandes@login02 specs]$ cp -rp ../../b/specs/
anaconda3@2021.05.o21694095.exp-15-56           git@2.31.1.o21693612.exp-15-56                  parallel@20210922.sh
anaconda3@2021.05.sh                            git@2.31.1.sh                                   pgi@18.10/
aocc@3.2.0/                                     git-lfs@2.11.0.o21693736.exp-15-56              pgi@18.10.sh
aocc@3.2.0.o21740680.exp-15-56                  git-lfs@2.11.0.sh                               pigz@2.6.o21693610.exp-15-56
aocc@3.2.0.o21740726.exp-15-56                  intel@19.1.3.304/                               pigz@2.6.sh
aocc@3.2.0.sh                                   intel@19.1.3.304.o21749258.exp-15-56            rclone@1.56.2.o21694048.exp-15-56
aria2@1.35.0.o21694011.exp-15-56                intel@19.1.3.304.o21749373.exp-15-56            rclone@1.56.2.sh
aria2@1.35.0.sh                                 intel@19.1.3.304.sh                             sratoolkit@2.10.9.o21694059.exp-15-56
entrezdirect@10.7.20190114.o21694065.exp-15-56  libxsmm@1.16.3.sh                               sratoolkit@2.10.9.sh
entrezdirect@10.7.20190114.sh                   matlab@2022b.sh                                 subversion@1.14.0.o21693810.exp-15-56
gcc@10.2.0/                                     mercurial@5.8.o21693989.exp-15-56               subversion@1.14.0.sh
gcc@10.2.0.o21694812.exp-15-56                  mercurial@5.8.sh                                ucx@1.10.1.o21745904.exp-15-56
gcc@10.2.0.sh                                   nvhpc@21.3/                                     ucx@1.10.1.sh
gh@2.0.0.o21693793.exp-15-56                    nvhpc@21.3.sh                                   
gh@2.0.0.sh                                     parallel@20210922.o21693459.exp-15-56           
[mkandes@login02 specs]$ cp -p ../../b/specs/gcc@10.2.0.sh ./
[mkandes@login02 specs]$ cp -p ../../b/specs/aocc@3.2.0.sh ./
[mkandes@login02 specs]$ mkdir gcc@10.2.0
[mkandes@login02 specs]$ mkdir aocc@3.2.0
[mkandes@login02 specs]$ cd gcc@10.2.0/
[mkandes@login02 gcc@10.2.0]$ cp -p ../../../b/specs/gcc@10.2.0/beast2@2.6.4.sh ./
[mkandes@login02 gcc@10.2.0]$ cp -p ../../../b/specs/gcc@10.2.0/openmpi@4.1.3.sh ./
[mkandes@login02 gcc@10.2.0]$ cp -p ../../../b/specs/gcc@10.2.0/mvapich2@2.3.7.sh ./
[mkandes@login02 gcc@10.2.0]$ mkdir openmpi@4.1.3
[mkandes@login02 gcc@10.2.0]$ mkdir mvapich2@2.3.7
[mkandes@login02 gcc@10.2.0]$ cd openmpi@4.1.3/
[mkandes@login02 openmpi@4.1.3]$ cp -p ../../../../b/specs/gcc@10.2.0/openmpi@4.1.3/hpl@2.3.sh ./
[mkandes@login02 openmpi@4.1.3]$ cp -p ../../../../b/specs/gcc@10.2.0/openmpi@4.1.3/hpl@2.3-omp.sh ./
[mkandes@login02 openmpi@4.1.3]$ cp -p ../../../../b/specs/gcc@10.2.0/openmpi@4.1.3/osu-micro-benchmarks@5.7.1.sh ./
[mkandes@login02 openmpi@4.1.3]$ cp -p ../../../../b/specs/gcc@10.2.0/openmpi@4.1.3/ior@3.3.0.sh ./
[mkandes@login02 openmpi@4.1.3]$ cp -p ../../../../b/specs/gcc@10.2.0/openmpi@4.1.3/gromacs@202
gromacs@2020.4.o21717638.exp-15-56  gromacs@2020.4.sh                   gromacs@2022.6.o25387651.exp-15-56  gromacs@2022.6.sh
[mkandes@login02 openmpi@4.1.3]$ cp -p ../../../../b/specs/gcc@10.2.0/openmpi@4.1.3/gromacs@2020.4.sh ./
[mkandes@login02 openmpi@4.1.3]$ cp -p ../../../../b/specs/gcc@10.2.0/openmpi@4.1.3/gromacs@2022.6.sh ./
[mkandes@login02 openmpi@4.1.3]$ cp -p ../../../../b/specs/gcc@10.2.0/openmpi@4.1.3/namd@2.14.sh ./
[mkandes@login02 openmpi@4.1.3]$ cp -p ../../../../b/specs/gcc@10.2.0/openmpi@4.1.3/quantum-espresso@
quantum-espresso@6.4.1.sh                 quantum-espresso@7.0.o21719337.exp-15-56  quantum-espresso@7.0.sh
[mkandes@login02 openmpi@4.1.3]$ cp -p ../../../../b/specs/gcc@10.2.0/openmpi@4.1.3/quantum-espresso@7.0.sh ./
[mkandes@login02 openmpi@4.1.3]$ cp -p ../../../../b/specs/gcc@10.2.0/openmpi@4.1.3/openfoam@2106.sh ./
[mkandes@login02 openmpi@4.1.3]$ cp -p ../../../../b/specs/gcc@10.2.0/openmpi@4.1.3/wrf@4.2.sh ./
[mkandes@login02 openmpi@4.1.3]$ cp -p ../../../../b/specs/gcc@10.2.0/openmpi@4.1.3/neuron@8.0.0.sh ./
[mkandes@login02 openmpi@4.1.3]$ cd ../mvapich2@2.3.7/
[mkandes@login02 mvapich2@2.3.7]$ cp -p ../../../../b/specs/gcc@10.2.0/mvapich2@2.3.7/hpl@2.3.sh ./
[mkandes@login02 mvapich2@2.3.7]$ cp -p ../../../../b/specs/gcc@10.2.0/mvapich2@2.3.7/hpl@2.3-omp.sh ./
[mkandes@login02 mvapich2@2.3.7]$ cp -p ../../../../b/specs/gcc@10.2.0/mvapich2@2.3.7/osu-micro-benchmarks@5.7.1.sh ./
[mkandes@login02 mvapich2@2.3.7]$ cp -p ../../../../b/specs/gcc@10.2.0/mvapich2@2.3.7/ior@3.3.0.sh ./
[mkandes@login02 mvapich2@2.3.7]$ cd ../
[mkandes@login02 gcc@10.2.0]$ cd ../aocc@3.2.0/
[mkandes@login02 aocc@3.2.0]$ cp ../../../b/specs/aocc@3.2.0/openmpi@4.1.3.sh ./
[mkandes@login02 aocc@3.2.0]$ mkdir openmpi@4.1.3
[mkandes@login02 aocc@3.2.0]$ cd openmpi@4.1.3/
[mkandes@login02 openmpi@4.1.3]$ cp ../../../../b/specs/aocc@3.2.0/openmpi@4.1.3/hpl@2.3.sh ./
[mkandes@login02 openmpi@4.1.3]$ cp ../../../../b/specs/aocc@3.2.0/openmpi@4.1.3/hpl@2.3-omp.sh ./
[mkandes@login02 openmpi@4.1.3]$ cp ../../../../b/specs/aocc@3.2.0/openmpi@4.1.3/osu-micro-benchmarks@5.7.1.sh ./
[mkandes@login02 openmpi@4.1.3]$ cp ../../../../b/specs/aocc@3.2.0/openmpi@4.1.3/ior@3.3.0.sh ./
[mkandes@login02 openmpi@4.1.3]$ cp ../../../../b/specs/aocc@3.2.0/openmpi@4.1.3/gromacs@2020.4.sh ./
[mkandes@login02 openmpi@4.1.3]$ cp ../../../../b/specs/aocc@3.2.0/openmpi@4.1.3/namd@2.14.sh ./
[mkandes@login02 openmpi@4.1.3]$ cp ../../../../b/specs/aocc@3.2.0/openmpi@4.1.3/openfoam@2106.sh ./
[mkandes@login02 openmpi@4.1.3]$ cp ../../../../b/specs/aocc@3.2.0/openmpi@4.1.3/wrf@4.2.sh ./
[mkandes@login02 openmpi@4.1.3]$ cd ../
[mkandes@login02 aocc@3.2.0]$ cd ../
[mkandes@login02 specs]$ cd ../
[mkandes@login02 dev]$ ls
specs  SPECS.md  yamls
[mkandes@login02 dev]$
```

We're now ready to start the initial build out of the instance ...

```
[mkandes@login02 spack]$ pwd
/home/mkandes/software/spack/repositories/mkandes/spack/etc/spack
[mkandes@login02 spack]$ cp -rp sdsc/expanse/0.17.3/cpu/dev/yamls/*.yaml ./
[mkandes@login02 spack]$ ls
compilers.yaml  defaults  modules.yaml  packages.yaml  repos.yaml  sdsc
[mkandes@login02 spack]$
[mkandes@login02 specs]$ pwd
/home/mkandes/software/spack/repositories/mkandes/spack/etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs
[mkandes@login02 specs]$ sbatch gcc@10.2.0.sh 
Submitted batch job 30010131 on cluster expanse
[mkandes@login02 specs]$ squeue -u $USER
             JOBID PARTITION     NAME     USER ST       TIME  NODES NODELIST(REASON)
          30010131 ind-share gcc@10.2  mkandes PD       0:00      1 (Priority)
[mkandes@login02 specs]$ squeue -u $USER
             JOBID PARTITION     NAME     USER ST       TIME  NODES NODELIST(REASON)
          30010131 ind-share gcc@10.2  mkandes  R       1:51      1 exp-15-40
[mkandes@login02 specs]$ cat gcc@10.2.0.o30010131.exp-15-40 
1713556956 20240419T130236-0700 30010131 2340624b71929ba23f6bb2f95a3858a5 145a2e2a99931f7b88a0d991a4beead2b900900c24c7f10b8107aaf89a844952 77 /home/mkandes/software/spack/repositories/mkandes/spack/etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/gcc@10.2.0.sh
#!/usr/bin/env bash

#SBATCH --job-name=gcc@10.2.0
#SBATCH --account=use300
#SBATCH --clusters=expanse
#SBATCH --partition=ind-shared
#SBATCH --nodes=1
#SBATCH --ntasks-per-node=1
#SBATCH --cpus-per-task=16
#SBATCH --mem=32G
#SBATCH --time=01:00:00
#SBATCH --output=%x.o%j.%N

declare -xir UNIX_TIME="$(date +'%s')"
declare -xr LOCAL_TIME="$(date +'%Y%m%dT%H%M%S%z')"

declare -xr LOCAL_SCRATCH="/scratch/${USER}/job_${SLURM_JOB_ID}"
declare -xr TMPDIR="${LOCAL_SCRATCH_DIR}"

declare -xr JOB_SCRIPT="$(scontrol show job ${SLURM_JOB_ID} | awk -F= '/Command=/{print $2}')"
declare -xr JOB_SCRIPT_MD5="$(md5sum ${JOB_SCRIPT} | awk '{print $1}')"
declare -xr JOB_SCRIPT_SHA256="$(sha256sum ${JOB_SCRIPT} | awk '{print $1}')"
declare -xr JOB_SCRIPT_NUMBER_OF_LINES="$(wc -l ${JOB_SCRIPT} | awk '{print $1}')"

declare -xr SCHEDULER_NAME='slurm'
declare -xr SCHEDULER_MAJOR='23'
declare -xr SCHEDULER_MINOR='02'
declare -xr SCHEDULER_REVISION='7'
declare -xr SCHEDULER_VERSION="${SCHEDULER_MAJOR}.${SCHEDULER_MINOR}.${SCHEDULER_REVISION}"
declare -xr SCHEDULER_MODULE="${SCHEDULER_NAME}/${SLURM_CLUSTER_NAME}/${SCHEDULER_VERSION}"

declare -xr SPACK_MAJOR='0'
declare -xr SPACK_MINOR='17'
declare -xr SPACK_REVISION='3'
declare -xr SPACK_VERSION="${SPACK_MAJOR}.${SPACK_MINOR}.${SPACK_REVISION}"
declare -xr SPACK_INSTANCE_NAME='cpu'
declare -xr SPACK_INSTANCE_VERSION='dev'
declare -xr SPACK_INSTANCE_DIR='/home/mkandes/software/spack/repositories/mkandes/spack'

declare -xr SPACK_PACKAGE='gcc@10.2.0'
declare -xr SPACK_COMPILER='gcc@8.5.0'
declare -xr SPACK_VARIANTS='~binutils ~bootstrap ~graphite ~nvptx ~piclibs ~strip'
declare -xr SPACK_DEPENDENCIES=''
declare -xr SPACK_SPEC="${SPACK_PACKAGE} % ${SPACK_COMPILER} ${SPACK_VARIANTS} ${SPACK_DEPENDENCIES}"

echo "${UNIX_TIME} ${LOCAL_TIME} ${SLURM_JOB_ID} ${JOB_SCRIPT_MD5} ${JOB_SCRIPT_SHA256} ${JOB_SCRIPT_NUMBER_OF_LINES} ${JOB_SCRIPT}"
cat  "${JOB_SCRIPT}"

module purge
module load "${SCHEDULER_MODULE}"
module list
. "${SPACK_INSTANCE_DIR}/share/spack/setup-env.sh"
printenv

spack config get compilers  
spack config get config  
spack config get mirrors
spack config get modules
spack config get packages
spack config get repos
spack config get upstreams

time -p spack spec --long --namespaces --types "${SPACK_SPEC}"
if [[ "${?}" -ne 0 ]]; then
  echo 'ERROR: spack concretization failed.'
  exit 1
fi

time -p spack install --jobs "${SLURM_CPUS_PER_TASK}" --fail-fast --yes-to-all "${SPACK_SPEC}"
if [[ "${?}" -ne 0 ]]; then
  echo 'ERROR: spack install failed.'
  exit 1
fi

spack compiler add --scope site "$(spack location -i ${SPACK_PACKAGE})"

sleep 30

Currently Loaded Modules:
  1) slurm/expanse/23.02.7

 

CONDA_SHLVL=0
LD_LIBRARY_PATH=/cm/shared/apps/slurm/current/lib64/slurm:/cm/shared/apps/slurm/current/lib64
LS_COLORS=rs=0:di=38;5;33:ln=38;5;51:mh=00:pi=40;38;5;11:so=38;5;13:do=38;5;5:bd=48;5;232;38;5;11:cd=48;5;232;38;5;3:or=48;5;232;38;5;9:mi=01;05;37;41:su=48;5;196;38;5;15:sg=48;5;11;38;5;16:ca=48;5;196;38;5;226:tw=48;5;10;38;5;16:ow=48;5;10;38;5;21:st=48;5;21;38;5;15:ex=38;5;40:*.tar=38;5;9:*.tgz=38;5;9:*.arc=38;5;9:*.arj=38;5;9:*.taz=38;5;9:*.lha=38;5;9:*.lz4=38;5;9:*.lzh=38;5;9:*.lzma=38;5;9:*.tlz=38;5;9:*.txz=38;5;9:*.tzo=38;5;9:*.t7z=38;5;9:*.zip=38;5;9:*.z=38;5;9:*.dz=38;5;9:*.gz=38;5;9:*.lrz=38;5;9:*.lz=38;5;9:*.lzo=38;5;9:*.xz=38;5;9:*.zst=38;5;9:*.tzst=38;5;9:*.bz2=38;5;9:*.bz=38;5;9:*.tbz=38;5;9:*.tbz2=38;5;9:*.tz=38;5;9:*.deb=38;5;9:*.rpm=38;5;9:*.jar=38;5;9:*.war=38;5;9:*.ear=38;5;9:*.sar=38;5;9:*.rar=38;5;9:*.alz=38;5;9:*.ace=38;5;9:*.zoo=38;5;9:*.cpio=38;5;9:*.7z=38;5;9:*.rz=38;5;9:*.cab=38;5;9:*.wim=38;5;9:*.swm=38;5;9:*.dwm=38;5;9:*.esd=38;5;9:*.jpg=38;5;13:*.jpeg=38;5;13:*.mjpg=38;5;13:*.mjpeg=38;5;13:*.gif=38;5;13:*.bmp=38;5;13:*.pbm=38;5;13:*.pgm=38;5;13:*.ppm=38;5;13:*.tga=38;5;13:*.xbm=38;5;13:*.xpm=38;5;13:*.tif=38;5;13:*.tiff=38;5;13:*.png=38;5;13:*.svg=38;5;13:*.svgz=38;5;13:*.mng=38;5;13:*.pcx=38;5;13:*.mov=38;5;13:*.mpg=38;5;13:*.mpeg=38;5;13:*.m2v=38;5;13:*.mkv=38;5;13:*.webm=38;5;13:*.ogm=38;5;13:*.mp4=38;5;13:*.m4v=38;5;13:*.mp4v=38;5;13:*.vob=38;5;13:*.qt=38;5;13:*.nuv=38;5;13:*.wmv=38;5;13:*.asf=38;5;13:*.rm=38;5;13:*.rmvb=38;5;13:*.flc=38;5;13:*.avi=38;5;13:*.fli=38;5;13:*.flv=38;5;13:*.gl=38;5;13:*.dl=38;5;13:*.xcf=38;5;13:*.xwd=38;5;13:*.yuv=38;5;13:*.cgm=38;5;13:*.emf=38;5;13:*.ogv=38;5;13:*.ogx=38;5;13:*.aac=38;5;45:*.au=38;5;45:*.flac=38;5;45:*.m4a=38;5;45:*.mid=38;5;45:*.midi=38;5;45:*.mka=38;5;45:*.mp3=38;5;45:*.mpc=38;5;45:*.ogg=38;5;45:*.ra=38;5;45:*.wav=38;5;45:*.oga=38;5;45:*.opus=38;5;45:*.spx=38;5;45:*.xspf=38;5;45:
CONDA_EXE=/home/mkandes/software/miniconda/Miniconda3-py312_24.1.2-0-Linux-x86_64/bin/conda
SLURM_NODEID=0
SLURM_TASK_PID=2249714
__LMOD_REF_COUNT_PATH=/cm/shared/apps/slurm/current/sbin:1;/cm/shared/apps/slurm/current/bin:1;/home/mkandes/software/miniconda/Miniconda3-py312_24.1.2-0-Linux-x86_64/condabin:1;/home/mkandes/.local/bin:1;/home/mkandes/bin:1;/usr/local/bin:1;/usr/bin:1;/usr/local/sbin:1;/usr/sbin:1
_ModuleTable002_=L2V0Yy9tb2R1bGVmaWxlcyIsIi91c3Ivc2hhcmUvbW9kdWxlZmlsZXMiLCIvdXNyL3NoYXJlL01vZHVsZXMvbW9kdWxlZmlsZXMiLCIvY20vc2hhcmVkL21vZHVsZWZpbGVzIix9LFsic3lzdGVtQmFzZU1QQVRIIl09Ii9jbS9sb2NhbC9tb2R1bGVmaWxlczovY20vc2hhcmVkL2FwcHMvYWNjZXNzL21vZHVsZWZpbGVzOi9jbS9zaGFyZWQvbW9kdWxlZmlsZXM6L2V0Yy9tb2R1bGVmaWxlczovdXNyL3NoYXJlL21vZHVsZWZpbGVzOi91c3Ivc2hhcmUvTW9kdWxlcy9tb2R1bGVmaWxlcyIsfQ==
SSH_CONNECTION=208.58.212.11 39928 198.202.100.14 22
SPACK_PYTHON=/usr/bin/python3
SPACK_MAJOR=0
SLURM_PRIO_PROCESS=0
LANG=en_US.UTF-8
SLURM_SUBMIT_DIR=/home/mkandes/software/spack/repositories/mkandes/spack/etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs
HISTCONTROL=ignoredups
SCHEDULER_NAME=slurm
HOSTNAME=exp-15-40
LMOD_SYSTEM_DEFAULT_MODULES=DefaultModules
OLDPWD=/home/mkandes/software/spack/repositories/mkandes/spack/etc/spack/sdsc/expanse/0.17.3/cpu/dev
__LMOD_REF_COUNT__LMFILES_=/cm/shared/modulefiles/slurm/expanse/23.02.7:1
SLURM_CPUS_PER_TASK=16
SPACK_DEPENDENCIES=
SCHEDULER_MINOR=02
ENVIRONMENT=BATCH
SPACK_VERSION=0.17.3
SPACK_MINOR=17
SLURM_PROCID=0
SPACK_INSTANCE_VERSION=dev
SLURM_JOB_GID=300
SPACK_VARIANTS=~binutils ~bootstrap ~graphite ~nvptx ~piclibs ~strip
SCHEDULER_REVISION=7
SPACK_INSTANCE_DIR=/home/mkandes/software/spack/repositories/mkandes/spack
__LMOD_REF_COUNT_LD_LIBRARY_PATH=/cm/shared/apps/slurm/current/lib64/slurm:1;/cm/shared/apps/slurm/current/lib64:1
SCHEDULER_VERSION=23.02.7
SLURMD_NODENAME=exp-15-40
SLURM_JOB_END_TIME=1713560554
JOB_SCRIPT_MD5=2340624b71929ba23f6bb2f95a3858a5
SLURM_TASKS_PER_NODE=1
S_COLORS=auto
_CE_M=
which_declare=declare -f
SPACK_COMPILER=gcc@8.5.0
XDG_SESSION_ID=551970
SLURM_NNODES=1
USER=mkandes
SLURM_PMIX_TMPDIR=/scratch/mkandes/job_30010131
SLURM_TMPDIR=/scratch/mkandes/job_30010131
JOB_SCRIPT_NUMBER_OF_LINES=77
SLURM_JOB_START_TIME=1713556954
SLURM_NTASKS_PER_NODE=1
__LMOD_REF_COUNT_MODULEPATH=/cm/local/modulefiles:1;/cm/shared/apps/access/modulefiles:1;/etc/modulefiles:1;/usr/share/modulefiles:1;/usr/share/Modules/modulefiles:1;/cm/shared/modulefiles:1
__LMOD_REF_COUNT_LOADEDMODULES=slurm/expanse/23.02.7:1
SCHEDULER_MAJOR=23
PWD=/home/mkandes/software/spack/repositories/mkandes/spack/etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs
ENABLE_LMOD=1
SLURM_JOB_NODELIST=exp-15-40
HOME=/home/mkandes
SLURM_CLUSTER_NAME=expanse
CONDA_PYTHON_EXE=/home/mkandes/software/miniconda/Miniconda3-py312_24.1.2-0-Linux-x86_64/bin/python
LMOD_COLORIZE=yes
LOCAL_TIME=20240419T130236-0700
SLURM_NODELIST=exp-15-40
LMOD_SYSHOST=expanse
SSH_CLIENT=208.58.212.11 39928 22
LMOD_VERSION=8.2.4
CPATH=/cm/shared/apps/slurm/current/include
SLURM_NTASKS=1
LMOD_SETTARG_CMD=:
SLURM_JOB_CPUS_PER_NODE=16
BASH_ENV=/usr/share/lmod/lmod/init/bash
SLURM_TOPOLOGY_ADDR=exp-15-40
_CE_CONDA=
SLURM_WORKING_CLUSTER=expanse:mgr1:6817:9984:109
JOB_SCRIPT_SHA256=145a2e2a99931f7b88a0d991a4beead2b900900c24c7f10b8107aaf89a844952
SPACK_PACKAGE=gcc@10.2.0
__LMOD_REF_COUNT_LIBRARY_PATH=/cm/shared/apps/slurm/current/lib64/slurm:1;/cm/shared/apps/slurm/current/lib64:1
SLURM_JOB_NAME=gcc@10.2.0
TMPDIR=
LIBRARY_PATH=/cm/shared/apps/slurm/current/lib64/slurm:/cm/shared/apps/slurm/current/lib64
LMOD_sys=Linux
SLURM_JOBID=30010131
_ModuleTable001_=X01vZHVsZVRhYmxlXz17WyJNVHZlcnNpb24iXT0zLFsiY19yZWJ1aWxkVGltZSJdPWZhbHNlLFsiY19zaG9ydFRpbWUiXT1mYWxzZSxkZXB0aFQ9e30sZmFtaWx5PXt9LG1UPXtbInNsdXJtL2V4cGFuc2UiXT17WyJmbiJdPSIvY20vc2hhcmVkL21vZHVsZWZpbGVzL3NsdXJtL2V4cGFuc2UvMjMuMDIuNyIsWyJmdWxsTmFtZSJdPSJzbHVybS9leHBhbnNlLzIzLjAyLjciLFsibG9hZE9yZGVyIl09MSxwcm9wVD17fSxbInN0YWNrRGVwdGgiXT0wLFsic3RhdHVzIl09ImFjdGl2ZSIsWyJ1c2VyTmFtZSJdPSJzbHVybS9leHBhbnNlLzIzLjAyLjciLH0sfSxtcGF0aEE9eyIvY20vbG9jYWwvbW9kdWxlZmlsZXMiLCIvY20vc2hhcmVkL2FwcHMvYWNjZXNzL21vZHVsZWZpbGVzIiwi
SLURM_CONF=/cm/shared/apps/slurm/var/etc/expanse/slurm.conf
LOADEDMODULES=slurm/expanse/23.02.7
__LMOD_REF_COUNT_MANPATH=/cm/shared/apps/slurm/current/man:2;/usr/share/lmod/lmod/share/man:1;/usr/local/share/man:1;/usr/share/man:1;/cm/local/apps/environment-modules/current/share/man:1
_ModuleTable003_=TmFtZSJdPSJzaGFyZWQiLH0sc2x1cm09e1siZm4iXT0iL2NtL2xvY2FsL21vZHVsZWZpbGVzL3NsdXJtL2V4cGFuc2UvMjMuMDIuNyIsWyJmdWxsTmFtZSJdPSJzbHVybS9leHBhbnNlLzIzLjAyLjciLFsibG9hZE9yZGVyIl09Myxwcm9wVD17fSxbInN0YWNrRGVwdGgiXT0yLFsic3RhdHVzIl09ImFjdGl2ZSIsWyJ1c2VyTmFtZSJdPSJzbHVybSIsfSx9LG1wYXRoQT17Ii9jbS9zaGFyZWQvYXBwcy9zcGFjay8wLjE3LjMvY3B1L2Ivc2hhcmUvc3BhY2svbG1vZC9saW51eC1yb2NreTgteDg2XzY0L0NvcmUiLCIvY20vbG9jYWwvbW9kdWxlZmlsZXMiLCIvY20vc2hhcmVkL2FwcHMvYWNjZXNzL21vZHVsZWZpbGVzIiwiL2V0Yy9tb2R1bGVmaWxlcyIsIi91c3Ivc2hhcmUvbW9k
SLURM_NODE_ALIASES=(null)
SLURM_JOB_QOS=ind-shared-normal
LMOD_ROOT=/usr/share/lmod
SLURM_TOPOLOGY_ADDR_PATTERN=node
SSH_TTY=/dev/pts/376
MAIL=/var/spool/mail/mkandes
SLURM_CPUS_ON_NODE=16
LMOD_arch=x86_64
SLURM_JOB_NUM_NODES=1
__Init_Default_Modules=1
CMD_WLM_CLUSTER_NAME=expanse
SLURM_MEM_PER_NODE=32768
SPACK_ROOT=/home/mkandes/software/spack/repositories/mkandes/spack
SHELL=/bin/bash
TERM=xterm-256color
SLURM_JOB_UID=501506
_ModuleTable_Sz_=2
__LMOD_REF_COUNT_CPATH=/cm/shared/apps/slurm/current/include:1
SLURM_JOB_PARTITION=ind-shared
SLURM_SCRIPT_CONTEXT=prolog_task
SPACK_INSTANCE_NAME=cpu
SLURM_JOB_USER=mkandes
JOB_SCRIPT=/home/mkandes/software/spack/repositories/mkandes/spack/etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/gcc@10.2.0.sh
SLURM_NPROCS=1
SHLVL=2
SLURM_SUBMIT_HOST=login02
UNIX_TIME=1713556956
SLURM_JOB_ACCOUNT=use300
MANPATH=/cm/shared/apps/slurm/current/man:/usr/share/lmod/lmod/share/man::/usr/local/share/man:/usr/share/man:/cm/local/apps/environment-modules/current/share/man
LMOD_PREPEND_BLOCK=normal
MODULEPATH=/cm/local/modulefiles:/cm/shared/apps/access/modulefiles:/etc/modulefiles:/usr/share/modulefiles:/usr/share/Modules/modulefiles:/cm/shared/modulefiles
SLURM_GTIDS=0
LOGNAME=mkandes
DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/501506/bus
XDG_RUNTIME_DIR=/run/user/501506
MODULEPATH_ROOT=/usr/share/modulefiles
LMOD_PACKAGE_PATH=/usr/share/lmod/etc/site/lmod
PATH=/home/mkandes/software/spack/repositories/mkandes/spack/bin:/cm/shared/apps/slurm/current/sbin:/cm/shared/apps/slurm/current/bin:/home/mkandes/software/miniconda/Miniconda3-py312_24.1.2-0-Linux-x86_64/condabin:/home/mkandes/.local/bin:/home/mkandes/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin
SLURM_JOB_ID=30010131
_LMFILES_=/cm/shared/modulefiles/slurm/expanse/23.02.7
SPACK_REVISION=3
DEBUGINFOD_URLS=https://debuginfod.centos.org/ 
SCHEDULER_MODULE=slurm/expanse/23.02.7
MODULESHOME=/usr/share/lmod/lmod
LMOD_SETTARG_FULL_SUPPORT=no
HISTSIZE=-1
LMOD_PKG=/usr/share/lmod/lmod
LOCAL_SCRATCH=/scratch/mkandes/job_30010131
SPACK_SPEC=gcc@10.2.0 % gcc@8.5.0 ~binutils ~bootstrap ~graphite ~nvptx ~piclibs ~strip 
LMOD_CMD=/usr/share/lmod/lmod/libexec/lmod
SLURM_LOCALID=0
LESSOPEN=||/usr/bin/lesspipe.sh %s
LMOD_FULL_SETTARG_SUPPORT=no
LMOD_DIR=/usr/share/lmod/lmod/libexec
BASH_FUNC_which%%=() {  ( alias;
 eval ${which_declare} ) | /usr/bin/which --tty-only --read-alias --read-functions --show-tilde --show-dot $@
}
BASH_FUNC_module%%=() {  eval $($LMOD_CMD bash "$@") && eval $(${LMOD_SETTARG_CMD:-:} -s sh)
}
BASH_FUNC_spack%%=() {  : this is a shell function from: /home/mkandes/software/spack/repositories/mkandes/spack/share/spack/setup-env.sh;
 : the real spack script is here: /home/mkandes/software/spack/repositories/mkandes/spack/bin/spack;
 _spack_shell_wrapper "$@";
 return $?
}
BASH_FUNC__spack_shell_wrapper%%=() {  for var in LD_LIBRARY_PATH DYLD_LIBRARY_PATH DYLD_FALLBACK_LIBRARY_PATH;
 do
 eval "if [ -n \"\${${var}-}\" ]; then export SPACK_$var=\${${var}}; fi";
 done;
 if [ -n "${ZSH_VERSION:-}" ]; then
 emulate -L sh;
 fi;
 _sp_flags="";
 while [ ! -z ${1+x} ] && [ "${1#-}" != "${1}" ]; do
 _sp_flags="$_sp_flags $1";
 shift;
 done;
 if [ -n "$_sp_flags" ] && [ "${_sp_flags#*h}" != "${_sp_flags}" ] || [ "${_sp_flags#*V}" != "${_sp_flags}" ]; then
 command spack $_sp_flags "$@";
 return;
 fi;
 _sp_subcommand="";
 if [ ! -z ${1+x} ]; then
 _sp_subcommand="$1";
 shift;
 fi;
 case $_sp_subcommand in 
 "cd")
 _sp_arg="";
 if [ -n "$1" ]; then
 _sp_arg="$1";
 shift;
 fi;
 if [ "$_sp_arg" = "-h" ] || [ "$_sp_arg" = "--help" ]; then
 command spack cd -h;
 else
 LOC="$(spack location $_sp_arg "$@")";
 if [ -d "$LOC" ]; then
 cd "$LOC";
 else
 return 1;
 fi;
 fi;
 return
 ;;
 "env")
 _sp_arg="";
 if [ -n "$1" ]; then
 _sp_arg="$1";
 shift;
 fi;
 if [ "$_sp_arg" = "-h" ] || [ "$_sp_arg" = "--help" ]; then
 command spack env -h;
 else
 case $_sp_arg in 
 activate)
 _a=" $@";
 if [ -z ${1+x} ] || [ "${_a#* --sh}" != "$_a" ] || [ "${_a#* --csh}" != "$_a" ] || [ "${_a#* -h}" != "$_a" ] || [ "${_a#* --help}" != "$_a" ]; then
 command spack env activate "$@";
 else
 stdout="$(command spack $_sp_flags env activate --sh "$@")" || return;
 eval "$stdout";
 fi
 ;;
 deactivate)
 _a=" $@";
 if [ "${_a#* --sh}" != "$_a" ] || [ "${_a#* --csh}" != "$_a" ]; then
 command spack env deactivate "$@";
 else
 if [ -n "$*" ]; then
 command spack env deactivate -h;
 else
 stdout="$(command spack $_sp_flags env deactivate --sh)" || return;
 eval "$stdout";
 fi;
 fi
 ;;
 *)
 command spack env $_sp_arg "$@"
 ;;
 esac;
 fi;
 return
 ;;
 "load" | "unload")
 _a=" $@";
 if [ "${_a#* --sh}" != "$_a" ] || [ "${_a#* --csh}" != "$_a" ] || [ "${_a#* -h}" != "$_a" ] || [ "${_a#* --list}" != "$_a" ] || [ "${_a#* --help}" != "$_a" ]; then
 command spack $_sp_flags $_sp_subcommand "$@";
 else
 stdout="$(command spack $_sp_flags $_sp_subcommand --sh "$@")" || return;
 eval "$stdout";
 fi
 ;;
 *)
 command spack $_sp_flags $_sp_subcommand "$@"
 ;;
 esac
}
BASH_FUNC_ml%%=() {  eval $($LMOD_DIR/ml_cmd "$@")
}
_=/usr/bin/printenv
compilers:
- compiler:
    spec: gcc@8.5.0
    paths:
      cc: /usr/bin/gcc
      cxx: /usr/bin/g++
      f77: /usr/bin/gfortran
      fc: /usr/bin/gfortran
    flags:
      cflags: -O2 -march=native
      cxxflags: -O2 -march=native
      fflags: -O2 -march=native
    operating_system: rocky8
    target: x86_64
    modules: []
    environment: {}
    extra_rpaths: []
config:
  install_tree:
    root: $spack/opt/spack
    projections:
      all: ${ARCHITECTURE}/${COMPILERNAME}-${COMPILERVER}/${PACKAGE}-${VERSION}-${HASH}
  template_dirs:
  - $spack/share/spack/templates

  # Temporary locations Spack can try to use for builds.
  #
  # Recommended options are given below.
  #
  # Builds can be faster in temporary directories on some (e.g., HPC) systems.
  # Specifying `$tempdir` will ensure use of the default temporary directory
  # (i.e., ``$TMP` or ``$TMPDIR``).
  #
  # Another option that prevents conflicts and potential permission issues is
  # to specify `$user_cache_path/stage`, which ensures each user builds in their
  # home directory.
  #
  # A more traditional path uses the value of `$spack/var/spack/stage`, which
  # builds directly inside Spack's instance without staging them in a
  # temporary space.  Problems with specifying a path inside a Spack instance
  # are that it precludes its use as a system package and its ability to be
  # pip installable.
  #
  # In any case, if the username is not already in the path, Spack will append
  # the value of `$user` in an attempt to avoid potential conflicts between
  # users in shared temporary spaces.
  #
  # The build stage can be purged with `spack clean --stage` and
  # `spack clean -a`, so it is important that the specified directory uniquely
  # identifies Spack staging to avoid accidentally wiping out non-Spack work.
  build_stage:
  - $tempdir/$user/spack-stage
  - $user_cache_path/stage
  # - $spack/var/spack/stage

  # Directory in which to run tests and store test results.
  # Tests will be stored in directories named by date/time and package
  # name/hash.
  test_stage: $user_cache_path/test
  source_cache: $spack/var/spack/cache
  misc_cache: $user_cache_path/cache
  connect_timeout: 10
  verify_ssl: true
  suppress_gpg_warnings: false
  install_missing_compilers: false
  checksum: true
  deprecated: false
  dirty: false
  build_language: C
  locks: true
  url_fetch_method: urllib
  ccache: false
  concretizer: clingo
  db_lock_timeout: 3
  package_lock_timeout: null
  shared_linking: rpath
  allow_sgid: true
  terminal_title: false
  debug: false
  build_jobs: 16
mirrors:
  spack-public: https://mirror.spack.io
modules:
  default:
    'enable:':
    - lmod
    lmod:
      core_compilers:
      - gcc@8.5.0
      hierarchy:
      - mpi
      hash_length: 0
      blacklist_implicits: true
      naming_scheme: '{name}/{version}-{hash:7}'
      projections:
        all: '{name}/{version}-{hash:7}'
      all:
        suffixes:
          +openmp: omp
          threads=openmp: omp
          +ipl64: i64
        environment:
          set:
            '{name}_ROOT': '{prefix}'
      intel:
        environment:
          set:
            INTEL_LICENSE_FILE: 40000@elprado.sdsc.edu:40200@elprado.sdsc.edu
      petsc:
        suffixes:
          +complex: cmplx
      slepc:
        suffixes:
          ^petsc +complex: cmplx
      ^python:
        autoload: direct
      ^ucx:
        autoload: direct
  prefix_inspections:
    lib:
    - LD_LIBRARY_PATH
    lib64:
    - LD_LIBRARY_PATH
    bin:
    - PATH
    man:
    - MANPATH
    share/man:
    - MANPATH
    share/aclocal:
    - ACLOCAL_PATH
    lib/pkgconfig:
    - PKG_CONFIG_PATH
    lib64/pkgconfig:
    - PKG_CONFIG_PATH
    share/pkgconfig:
    - PKG_CONFIG_PATH
    ? ''
    : - CMAKE_PREFIX_PATH

  # These are configurations for the module set named "default"
packages:
  lmod:
    externals:
    - spec: lmod@8.2.4
      prefix: /usr
    buildable: false
  lustre:
    externals:
    - spec: lustre@2.15.2
      prefix: /usr
    buildable: false
  openssl:
    externals:
    - spec: openssl@1.1.1k
      prefix: /usr
    buildable: false
  rdma-core:
    externals:
    - spec: rdma-core@43.0
      prefix: /usr
    buildable: false
  slurm:
    externals:
    - spec: slurm@23.02.7
      prefix: /cm/shared/apps/slurm/current
    buildable: false
  all:
    compiler: [gcc, intel, pgi, clang, xl, nag, fj, aocc]
    providers:
      awk: [gawk]
      blas: [openblas, amdblis]
      D: [ldc]
      daal: [intel-daal]
      elf: [elfutils]
      fftw-api: [fftw, amdfftw]
      flame: [libflame, amdlibflame]
      fuse: [libfuse]
      gl: [mesa+opengl, mesa18, opengl]
      glu: [mesa-glu, openglu]
      glx: [mesa+glx, mesa18+glx, opengl]
      golang: [gcc]
      iconv: [libiconv]
      ipp: [intel-ipp]
      java: [openjdk, jdk, ibm-java]
      jpeg: [libjpeg-turbo, libjpeg]
      lapack: [openblas, amdlibflame]
      lua-lang: [lua, lua-luajit]
      mariadb-client: [mariadb-c-client, mariadb]
      mkl: [intel-mkl]
      mpe: [mpe2]
      mpi: [openmpi, mpich]
      mysql-client: [mysql, mariadb-c-client]
      opencl: [pocl]
      onedal: [intel-oneapi-dal]
      osmesa: [mesa+osmesa, mesa18+osmesa]
      pbs: [openpbs, torque]
      pil: [py-pillow]
      pkgconfig: [pkgconf, pkg-config]
      rpc: [libtirpc]
      scalapack: [netlib-scalapack, amdscalapack]
      sycl: [hipsycl]
      szip: [libaec, libszip]
      tbb: [intel-tbb]
      unwind: [libunwind]
      uuid: [util-linux-uuid, libuuid]
      xxd: [xxd-standalone, vim]
      yacc: [bison, byacc]
      ziglang: [zig]
    permissions:
      read: world
      write: user
repos:
- $spack/var/spack/repos/sdsc
- $spack/var/spack/repos/builtin
upstreams: {}
Input spec
--------------------------------
[    ]  .gcc@10.2.0%gcc@8.5.0~binutils~bootstrap~graphite~nvptx~piclibs~strip

Concretized
--------------------------------
==> Bootstrapping clingo from pre-built binaries
[mkandes@login02 specs]$
```

Make initial commit on instance development branch ...

```
[mkandes@login02 dev]$ pwd
/home/mkandes/software/spack/repositories/mkandes/spack/etc/spack/sdsc/expanse/0.17.3/cpu/dev
[mkandes@login02 dev]$ git branch
  sdsc-0.17.3
* sdsc-0.17.3-gh-124-inst-exp-cpu-dev
[mkandes@login02 dev]$ git status
On branch sdsc-0.17.3-gh-124-inst-exp-cpu-dev
Untracked files:
  (use "git add <file>..." to include in what will be committed)
	../../../../../compilers.yaml
	../../../../../modules.yaml
	../../../../../packages.yaml
	./


It took 2.21 seconds to enumerate untracked files. 'status -uno'
may speed it up, but you have to be careful not to forget to add
new files yourself (see 'git help status').
nothing added to commit but untracked files present (use "git add" to track)
[mkandes@login02 dev]$ ls
specs  SPECS.md  yamls
[mkandes@login02 dev]$ git add SPECS.md 
[mkandes@login02 dev]$ git add yamls/
[mkandes@login02 dev]$ cd specs/
[mkandes@login02 specs]$ ls
aocc@3.2.0  aocc@3.2.0.sh  gcc@10.2.0  gcc@10.2.0.o30010131.exp-15-40  gcc@10.2.0.o30010287.exp-15-40  gcc@10.2.0.sh
[mkandes@login02 specs]$ git add *.sh
[mkandes@login02 specs]$ git add aocc@3.2.0/
[mkandes@login02 specs]$ git add gcc@10.2.0
[mkandes@login02 specs]$ git status
On branch sdsc-0.17.3-gh-124-inst-exp-cpu-dev
Changes to be committed:
  (use "git restore --staged <file>..." to unstage)
	new file:   ../SPECS.md
	new file:   aocc@3.2.0.sh
	new file:   aocc@3.2.0/openmpi@4.1.3.sh
	new file:   aocc@3.2.0/openmpi@4.1.3/gromacs@2020.4.sh
	new file:   aocc@3.2.0/openmpi@4.1.3/hpl@2.3-omp.sh
	new file:   aocc@3.2.0/openmpi@4.1.3/hpl@2.3.sh
	new file:   aocc@3.2.0/openmpi@4.1.3/ior@3.3.0.sh
	new file:   aocc@3.2.0/openmpi@4.1.3/namd@2.14.sh
	new file:   aocc@3.2.0/openmpi@4.1.3/openfoam@2106.sh
	new file:   aocc@3.2.0/openmpi@4.1.3/osu-micro-benchmarks@5.7.1.sh
	new file:   aocc@3.2.0/openmpi@4.1.3/wrf@4.2.sh
	new file:   gcc@10.2.0.sh
	new file:   gcc@10.2.0/beast2@2.6.4.sh
	new file:   gcc@10.2.0/mvapich2@2.3.7.sh
	new file:   gcc@10.2.0/mvapich2@2.3.7/hpl@2.3-omp.sh
	new file:   gcc@10.2.0/mvapich2@2.3.7/hpl@2.3.sh
	new file:   gcc@10.2.0/mvapich2@2.3.7/ior@3.3.0.sh
	new file:   gcc@10.2.0/mvapich2@2.3.7/osu-micro-benchmarks@5.7.1.sh
	new file:   gcc@10.2.0/openmpi@4.1.3.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/gromacs@2020.4.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/gromacs@2022.6.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/hpl@2.3-omp.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/hpl@2.3.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/ior@3.3.0.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/namd@2.14.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/neuron@8.0.0.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/openfoam@2106.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/osu-micro-benchmarks@5.7.1.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/quantum-espresso@7.0.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/wrf@4.2.sh
	new file:   ../yamls/compilers.yaml
	new file:   ../yamls/modules.yaml
	new file:   ../yamls/packages.yaml

Untracked files:
  (use "git add <file>..." to include in what will be committed)
	../../../../../../compilers.yaml
	../../../../../../modules.yaml
	../../../../../../packages.yaml
	gcc@10.2.0.o30010131.exp-15-40
	gcc@10.2.0.o30010287.exp-15-40

[mkandes@login02 specs]$ vi gcc@10.2.0.sh 
[mkandes@login02 specs]$ squeue -u $USER
             JOBID PARTITION     NAME     USER ST       TIME  NODES NODELIST(REASON)
[mkandes@login02 specs]$ cat gcc@10.2.0
gcc@10.2.0/                     gcc@10.2.0.o30010131.exp-15-40  gcc@10.2.0.o30010287.exp-15-40  gcc@10.2.0.sh                   
[mkandes@login02 specs]$ cat gcc@10.2.0.o30010
gcc@10.2.0.o30010131.exp-15-40  gcc@10.2.0.o30010287.exp-15-40  
[mkandes@login02 specs]$ cat gcc@10.2.0.o30010287.exp-15-40 
1713557814 20240419T131654-0700 30010287 afb40300eb1c45a3fb8031d77ce71e54 a6e58cc187b0662bd9646f02395d70c165ce13eab05c81e0200d0dc2cbee7ae6 77 /home/mkandes/software/spack/repositories/mkandes/spack/etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/gcc@10.2.0.sh
#!/usr/bin/env bash

#SBATCH --job-name=gcc@10.2.0
#SBATCH --account=use300
#SBATCH --clusters=expanse
#SBATCH --partition=ind-shared
#SBATCH --nodes=1
#SBATCH --ntasks-per-node=1
#SBATCH --cpus-per-task=16
#SBATCH --mem=32G
#SBATCH --time=01:00:00
#SBATCH --output=%x.o%j.%N

declare -xir UNIX_TIME="$(date +'%s')"
declare -xr LOCAL_TIME="$(date +'%Y%m%dT%H%M%S%z')"

declare -xr LOCAL_SCRATCH="/scratch/${USER}/job_${SLURM_JOB_ID}"
#declare -xr TMPDIR="${LOCAL_SCRATCH_DIR}"

declare -xr JOB_SCRIPT="$(scontrol show job ${SLURM_JOB_ID} | awk -F= '/Command=/{print $2}')"
declare -xr JOB_SCRIPT_MD5="$(md5sum ${JOB_SCRIPT} | awk '{print $1}')"
declare -xr JOB_SCRIPT_SHA256="$(sha256sum ${JOB_SCRIPT} | awk '{print $1}')"
declare -xr JOB_SCRIPT_NUMBER_OF_LINES="$(wc -l ${JOB_SCRIPT} | awk '{print $1}')"

declare -xr SCHEDULER_NAME='slurm'
declare -xr SCHEDULER_MAJOR='23'
declare -xr SCHEDULER_MINOR='02'
declare -xr SCHEDULER_REVISION='7'
declare -xr SCHEDULER_VERSION="${SCHEDULER_MAJOR}.${SCHEDULER_MINOR}.${SCHEDULER_REVISION}"
declare -xr SCHEDULER_MODULE="${SCHEDULER_NAME}/${SLURM_CLUSTER_NAME}/${SCHEDULER_VERSION}"

declare -xr SPACK_MAJOR='0'
declare -xr SPACK_MINOR='17'
declare -xr SPACK_REVISION='3'
declare -xr SPACK_VERSION="${SPACK_MAJOR}.${SPACK_MINOR}.${SPACK_REVISION}"
declare -xr SPACK_INSTANCE_NAME='cpu'
declare -xr SPACK_INSTANCE_VERSION='dev'
declare -xr SPACK_INSTANCE_DIR='/home/mkandes/software/spack/repositories/mkandes/spack'

declare -xr SPACK_PACKAGE='gcc@10.2.0'
declare -xr SPACK_COMPILER='gcc@8.5.0'
declare -xr SPACK_VARIANTS='~binutils ~bootstrap ~graphite ~nvptx ~piclibs ~strip'
declare -xr SPACK_DEPENDENCIES=''
declare -xr SPACK_SPEC="${SPACK_PACKAGE} % ${SPACK_COMPILER} ${SPACK_VARIANTS} ${SPACK_DEPENDENCIES}"

echo "${UNIX_TIME} ${LOCAL_TIME} ${SLURM_JOB_ID} ${JOB_SCRIPT_MD5} ${JOB_SCRIPT_SHA256} ${JOB_SCRIPT_NUMBER_OF_LINES} ${JOB_SCRIPT}"
cat  "${JOB_SCRIPT}"

module purge
module load "${SCHEDULER_MODULE}"
module list
. "${SPACK_INSTANCE_DIR}/share/spack/setup-env.sh"
printenv

spack config get compilers  
spack config get config  
spack config get mirrors
spack config get modules
spack config get packages
spack config get repos
spack config get upstreams

time -p spack spec --long --namespaces --types "${SPACK_SPEC}"
if [[ "${?}" -ne 0 ]]; then
  echo 'ERROR: spack concretization failed.'
  exit 1
fi

time -p spack install --jobs "${SLURM_CPUS_PER_TASK}" --fail-fast --yes-to-all "${SPACK_SPEC}"
if [[ "${?}" -ne 0 ]]; then
  echo 'ERROR: spack install failed.'
  exit 1
fi

spack compiler add --scope site "$(spack location -i ${SPACK_PACKAGE})"

sleep 30

Currently Loaded Modules:
  1) slurm/expanse/23.02.7

 

CONDA_SHLVL=0
LD_LIBRARY_PATH=/cm/shared/apps/slurm/current/lib64/slurm:/cm/shared/apps/slurm/current/lib64
LS_COLORS=rs=0:di=38;5;33:ln=38;5;51:mh=00:pi=40;38;5;11:so=38;5;13:do=38;5;5:bd=48;5;232;38;5;11:cd=48;5;232;38;5;3:or=48;5;232;38;5;9:mi=01;05;37;41:su=48;5;196;38;5;15:sg=48;5;11;38;5;16:ca=48;5;196;38;5;226:tw=48;5;10;38;5;16:ow=48;5;10;38;5;21:st=48;5;21;38;5;15:ex=38;5;40:*.tar=38;5;9:*.tgz=38;5;9:*.arc=38;5;9:*.arj=38;5;9:*.taz=38;5;9:*.lha=38;5;9:*.lz4=38;5;9:*.lzh=38;5;9:*.lzma=38;5;9:*.tlz=38;5;9:*.txz=38;5;9:*.tzo=38;5;9:*.t7z=38;5;9:*.zip=38;5;9:*.z=38;5;9:*.dz=38;5;9:*.gz=38;5;9:*.lrz=38;5;9:*.lz=38;5;9:*.lzo=38;5;9:*.xz=38;5;9:*.zst=38;5;9:*.tzst=38;5;9:*.bz2=38;5;9:*.bz=38;5;9:*.tbz=38;5;9:*.tbz2=38;5;9:*.tz=38;5;9:*.deb=38;5;9:*.rpm=38;5;9:*.jar=38;5;9:*.war=38;5;9:*.ear=38;5;9:*.sar=38;5;9:*.rar=38;5;9:*.alz=38;5;9:*.ace=38;5;9:*.zoo=38;5;9:*.cpio=38;5;9:*.7z=38;5;9:*.rz=38;5;9:*.cab=38;5;9:*.wim=38;5;9:*.swm=38;5;9:*.dwm=38;5;9:*.esd=38;5;9:*.jpg=38;5;13:*.jpeg=38;5;13:*.mjpg=38;5;13:*.mjpeg=38;5;13:*.gif=38;5;13:*.bmp=38;5;13:*.pbm=38;5;13:*.pgm=38;5;13:*.ppm=38;5;13:*.tga=38;5;13:*.xbm=38;5;13:*.xpm=38;5;13:*.tif=38;5;13:*.tiff=38;5;13:*.png=38;5;13:*.svg=38;5;13:*.svgz=38;5;13:*.mng=38;5;13:*.pcx=38;5;13:*.mov=38;5;13:*.mpg=38;5;13:*.mpeg=38;5;13:*.m2v=38;5;13:*.mkv=38;5;13:*.webm=38;5;13:*.ogm=38;5;13:*.mp4=38;5;13:*.m4v=38;5;13:*.mp4v=38;5;13:*.vob=38;5;13:*.qt=38;5;13:*.nuv=38;5;13:*.wmv=38;5;13:*.asf=38;5;13:*.rm=38;5;13:*.rmvb=38;5;13:*.flc=38;5;13:*.avi=38;5;13:*.fli=38;5;13:*.flv=38;5;13:*.gl=38;5;13:*.dl=38;5;13:*.xcf=38;5;13:*.xwd=38;5;13:*.yuv=38;5;13:*.cgm=38;5;13:*.emf=38;5;13:*.ogv=38;5;13:*.ogx=38;5;13:*.aac=38;5;45:*.au=38;5;45:*.flac=38;5;45:*.m4a=38;5;45:*.mid=38;5;45:*.midi=38;5;45:*.mka=38;5;45:*.mp3=38;5;45:*.mpc=38;5;45:*.ogg=38;5;45:*.ra=38;5;45:*.wav=38;5;45:*.oga=38;5;45:*.opus=38;5;45:*.spx=38;5;45:*.xspf=38;5;45:
CONDA_EXE=/home/mkandes/software/miniconda/Miniconda3-py312_24.1.2-0-Linux-x86_64/bin/conda
SLURM_NODEID=0
SLURM_TASK_PID=2254397
__LMOD_REF_COUNT_PATH=/cm/shared/apps/slurm/current/sbin:1;/cm/shared/apps/slurm/current/bin:1;/home/mkandes/software/miniconda/Miniconda3-py312_24.1.2-0-Linux-x86_64/condabin:1;/home/mkandes/.local/bin:1;/home/mkandes/bin:1;/usr/local/bin:1;/usr/bin:1;/usr/local/sbin:1;/usr/sbin:1
_ModuleTable002_=L2V0Yy9tb2R1bGVmaWxlcyIsIi91c3Ivc2hhcmUvbW9kdWxlZmlsZXMiLCIvdXNyL3NoYXJlL01vZHVsZXMvbW9kdWxlZmlsZXMiLCIvY20vc2hhcmVkL21vZHVsZWZpbGVzIix9LFsic3lzdGVtQmFzZU1QQVRIIl09Ii9jbS9sb2NhbC9tb2R1bGVmaWxlczovY20vc2hhcmVkL2FwcHMvYWNjZXNzL21vZHVsZWZpbGVzOi9jbS9zaGFyZWQvbW9kdWxlZmlsZXM6L2V0Yy9tb2R1bGVmaWxlczovdXNyL3NoYXJlL21vZHVsZWZpbGVzOi91c3Ivc2hhcmUvTW9kdWxlcy9tb2R1bGVmaWxlcyIsfQ==
SSH_CONNECTION=208.58.212.11 39928 198.202.100.14 22
SPACK_PYTHON=/usr/bin/python3
SPACK_MAJOR=0
SLURM_PRIO_PROCESS=0
LANG=en_US.UTF-8
SLURM_SUBMIT_DIR=/home/mkandes/software/spack/repositories/mkandes/spack/etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs
HISTCONTROL=ignoredups
SCHEDULER_NAME=slurm
HOSTNAME=exp-15-40
LMOD_SYSTEM_DEFAULT_MODULES=DefaultModules
OLDPWD=/home/mkandes/software/spack/repositories/mkandes/spack/etc/spack/sdsc/expanse/0.17.3/cpu/dev
__LMOD_REF_COUNT__LMFILES_=/cm/shared/modulefiles/slurm/expanse/23.02.7:1
SLURM_CPUS_PER_TASK=16
SPACK_DEPENDENCIES=
SCHEDULER_MINOR=02
ENVIRONMENT=BATCH
SPACK_VERSION=0.17.3
SPACK_MINOR=17
SLURM_PROCID=0
SPACK_INSTANCE_VERSION=dev
SLURM_JOB_GID=300
SPACK_VARIANTS=~binutils ~bootstrap ~graphite ~nvptx ~piclibs ~strip
SCHEDULER_REVISION=7
SPACK_INSTANCE_DIR=/home/mkandes/software/spack/repositories/mkandes/spack
__LMOD_REF_COUNT_LD_LIBRARY_PATH=/cm/shared/apps/slurm/current/lib64/slurm:1;/cm/shared/apps/slurm/current/lib64:1
SCHEDULER_VERSION=23.02.7
SLURMD_NODENAME=exp-15-40
SLURM_JOB_END_TIME=1713561412
JOB_SCRIPT_MD5=afb40300eb1c45a3fb8031d77ce71e54
SLURM_TASKS_PER_NODE=1
S_COLORS=auto
_CE_M=
which_declare=declare -f
SPACK_COMPILER=gcc@8.5.0
XDG_SESSION_ID=551970
SLURM_NNODES=1
USER=mkandes
SLURM_PMIX_TMPDIR=/scratch/mkandes/job_30010287
SLURM_TMPDIR=/scratch/mkandes/job_30010287
JOB_SCRIPT_NUMBER_OF_LINES=77
SLURM_JOB_START_TIME=1713557812
SLURM_NTASKS_PER_NODE=1
__LMOD_REF_COUNT_MODULEPATH=/cm/local/modulefiles:1;/cm/shared/apps/access/modulefiles:1;/etc/modulefiles:1;/usr/share/modulefiles:1;/usr/share/Modules/modulefiles:1;/cm/shared/modulefiles:1
__LMOD_REF_COUNT_LOADEDMODULES=slurm/expanse/23.02.7:1
SCHEDULER_MAJOR=23
PWD=/home/mkandes/software/spack/repositories/mkandes/spack/etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs
ENABLE_LMOD=1
SLURM_JOB_NODELIST=exp-15-40
HOME=/home/mkandes
SLURM_CLUSTER_NAME=expanse
CONDA_PYTHON_EXE=/home/mkandes/software/miniconda/Miniconda3-py312_24.1.2-0-Linux-x86_64/bin/python
LMOD_COLORIZE=yes
LOCAL_TIME=20240419T131654-0700
SLURM_NODELIST=exp-15-40
LMOD_SYSHOST=expanse
SSH_CLIENT=208.58.212.11 39928 22
LMOD_VERSION=8.2.4
CPATH=/cm/shared/apps/slurm/current/include
SLURM_NTASKS=1
LMOD_SETTARG_CMD=:
SLURM_JOB_CPUS_PER_NODE=16
BASH_ENV=/usr/share/lmod/lmod/init/bash
SLURM_TOPOLOGY_ADDR=exp-15-40
_CE_CONDA=
SLURM_WORKING_CLUSTER=expanse:mgr1:6817:9984:109
JOB_SCRIPT_SHA256=a6e58cc187b0662bd9646f02395d70c165ce13eab05c81e0200d0dc2cbee7ae6
SPACK_PACKAGE=gcc@10.2.0
__LMOD_REF_COUNT_LIBRARY_PATH=/cm/shared/apps/slurm/current/lib64/slurm:1;/cm/shared/apps/slurm/current/lib64:1
SLURM_JOB_NAME=gcc@10.2.0
TMPDIR=/scratch/mkandes/job_30010287
LIBRARY_PATH=/cm/shared/apps/slurm/current/lib64/slurm:/cm/shared/apps/slurm/current/lib64
LMOD_sys=Linux
SLURM_JOBID=30010287
_ModuleTable001_=X01vZHVsZVRhYmxlXz17WyJNVHZlcnNpb24iXT0zLFsiY19yZWJ1aWxkVGltZSJdPWZhbHNlLFsiY19zaG9ydFRpbWUiXT1mYWxzZSxkZXB0aFQ9e30sZmFtaWx5PXt9LG1UPXtbInNsdXJtL2V4cGFuc2UiXT17WyJmbiJdPSIvY20vc2hhcmVkL21vZHVsZWZpbGVzL3NsdXJtL2V4cGFuc2UvMjMuMDIuNyIsWyJmdWxsTmFtZSJdPSJzbHVybS9leHBhbnNlLzIzLjAyLjciLFsibG9hZE9yZGVyIl09MSxwcm9wVD17fSxbInN0YWNrRGVwdGgiXT0wLFsic3RhdHVzIl09ImFjdGl2ZSIsWyJ1c2VyTmFtZSJdPSJzbHVybS9leHBhbnNlLzIzLjAyLjciLH0sfSxtcGF0aEE9eyIvY20vbG9jYWwvbW9kdWxlZmlsZXMiLCIvY20vc2hhcmVkL2FwcHMvYWNjZXNzL21vZHVsZWZpbGVzIiwi
SLURM_CONF=/cm/shared/apps/slurm/var/etc/expanse/slurm.conf
LOADEDMODULES=slurm/expanse/23.02.7
__LMOD_REF_COUNT_MANPATH=/cm/shared/apps/slurm/current/man:2;/usr/share/lmod/lmod/share/man:1;/usr/local/share/man:1;/usr/share/man:1;/cm/local/apps/environment-modules/current/share/man:1
_ModuleTable003_=TmFtZSJdPSJzaGFyZWQiLH0sc2x1cm09e1siZm4iXT0iL2NtL2xvY2FsL21vZHVsZWZpbGVzL3NsdXJtL2V4cGFuc2UvMjMuMDIuNyIsWyJmdWxsTmFtZSJdPSJzbHVybS9leHBhbnNlLzIzLjAyLjciLFsibG9hZE9yZGVyIl09Myxwcm9wVD17fSxbInN0YWNrRGVwdGgiXT0yLFsic3RhdHVzIl09ImFjdGl2ZSIsWyJ1c2VyTmFtZSJdPSJzbHVybSIsfSx9LG1wYXRoQT17Ii9jbS9zaGFyZWQvYXBwcy9zcGFjay8wLjE3LjMvY3B1L2Ivc2hhcmUvc3BhY2svbG1vZC9saW51eC1yb2NreTgteDg2XzY0L0NvcmUiLCIvY20vbG9jYWwvbW9kdWxlZmlsZXMiLCIvY20vc2hhcmVkL2FwcHMvYWNjZXNzL21vZHVsZWZpbGVzIiwiL2V0Yy9tb2R1bGVmaWxlcyIsIi91c3Ivc2hhcmUvbW9k
SLURM_NODE_ALIASES=(null)
SLURM_JOB_QOS=ind-shared-normal
LMOD_ROOT=/usr/share/lmod
SLURM_TOPOLOGY_ADDR_PATTERN=node
SSH_TTY=/dev/pts/376
MAIL=/var/spool/mail/mkandes
SLURM_CPUS_ON_NODE=16
LMOD_arch=x86_64
SLURM_JOB_NUM_NODES=1
__Init_Default_Modules=1
CMD_WLM_CLUSTER_NAME=expanse
SLURM_MEM_PER_NODE=32768
SPACK_ROOT=/home/mkandes/software/spack/repositories/mkandes/spack
SHELL=/bin/bash
TERM=xterm-256color
SLURM_JOB_UID=501506
_ModuleTable_Sz_=2
__LMOD_REF_COUNT_CPATH=/cm/shared/apps/slurm/current/include:1
SLURM_JOB_PARTITION=ind-shared
SLURM_SCRIPT_CONTEXT=prolog_task
SPACK_INSTANCE_NAME=cpu
SLURM_JOB_USER=mkandes
JOB_SCRIPT=/home/mkandes/software/spack/repositories/mkandes/spack/etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/gcc@10.2.0.sh
SLURM_NPROCS=1
SHLVL=2
SLURM_SUBMIT_HOST=login02
UNIX_TIME=1713557814
SLURM_JOB_ACCOUNT=use300
MANPATH=/cm/shared/apps/slurm/current/man:/usr/share/lmod/lmod/share/man::/usr/local/share/man:/usr/share/man:/cm/local/apps/environment-modules/current/share/man
LMOD_PREPEND_BLOCK=normal
MODULEPATH=/cm/local/modulefiles:/cm/shared/apps/access/modulefiles:/etc/modulefiles:/usr/share/modulefiles:/usr/share/Modules/modulefiles:/cm/shared/modulefiles
SLURM_GTIDS=0
LOGNAME=mkandes
DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/501506/bus
XDG_RUNTIME_DIR=/run/user/501506
MODULEPATH_ROOT=/usr/share/modulefiles
LMOD_PACKAGE_PATH=/usr/share/lmod/etc/site/lmod
PATH=/home/mkandes/software/spack/repositories/mkandes/spack/bin:/cm/shared/apps/slurm/current/sbin:/cm/shared/apps/slurm/current/bin:/home/mkandes/software/miniconda/Miniconda3-py312_24.1.2-0-Linux-x86_64/condabin:/home/mkandes/.local/bin:/home/mkandes/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin
SLURM_JOB_ID=30010287
_LMFILES_=/cm/shared/modulefiles/slurm/expanse/23.02.7
SPACK_REVISION=3
DEBUGINFOD_URLS=https://debuginfod.centos.org/ 
SCHEDULER_MODULE=slurm/expanse/23.02.7
MODULESHOME=/usr/share/lmod/lmod
LMOD_SETTARG_FULL_SUPPORT=no
HISTSIZE=-1
LMOD_PKG=/usr/share/lmod/lmod
LOCAL_SCRATCH=/scratch/mkandes/job_30010287
SPACK_SPEC=gcc@10.2.0 % gcc@8.5.0 ~binutils ~bootstrap ~graphite ~nvptx ~piclibs ~strip 
LMOD_CMD=/usr/share/lmod/lmod/libexec/lmod
SLURM_LOCALID=0
LESSOPEN=||/usr/bin/lesspipe.sh %s
LMOD_FULL_SETTARG_SUPPORT=no
LMOD_DIR=/usr/share/lmod/lmod/libexec
BASH_FUNC_which%%=() {  ( alias;
 eval ${which_declare} ) | /usr/bin/which --tty-only --read-alias --read-functions --show-tilde --show-dot $@
}
BASH_FUNC_module%%=() {  eval $($LMOD_CMD bash "$@") && eval $(${LMOD_SETTARG_CMD:-:} -s sh)
}
BASH_FUNC_spack%%=() {  : this is a shell function from: /home/mkandes/software/spack/repositories/mkandes/spack/share/spack/setup-env.sh;
 : the real spack script is here: /home/mkandes/software/spack/repositories/mkandes/spack/bin/spack;
 _spack_shell_wrapper "$@";
 return $?
}
BASH_FUNC__spack_shell_wrapper%%=() {  for var in LD_LIBRARY_PATH DYLD_LIBRARY_PATH DYLD_FALLBACK_LIBRARY_PATH;
 do
 eval "if [ -n \"\${${var}-}\" ]; then export SPACK_$var=\${${var}}; fi";
 done;
 if [ -n "${ZSH_VERSION:-}" ]; then
 emulate -L sh;
 fi;
 _sp_flags="";
 while [ ! -z ${1+x} ] && [ "${1#-}" != "${1}" ]; do
 _sp_flags="$_sp_flags $1";
 shift;
 done;
 if [ -n "$_sp_flags" ] && [ "${_sp_flags#*h}" != "${_sp_flags}" ] || [ "${_sp_flags#*V}" != "${_sp_flags}" ]; then
 command spack $_sp_flags "$@";
 return;
 fi;
 _sp_subcommand="";
 if [ ! -z ${1+x} ]; then
 _sp_subcommand="$1";
 shift;
 fi;
 case $_sp_subcommand in 
 "cd")
 _sp_arg="";
 if [ -n "$1" ]; then
 _sp_arg="$1";
 shift;
 fi;
 if [ "$_sp_arg" = "-h" ] || [ "$_sp_arg" = "--help" ]; then
 command spack cd -h;
 else
 LOC="$(spack location $_sp_arg "$@")";
 if [ -d "$LOC" ]; then
 cd "$LOC";
 else
 return 1;
 fi;
 fi;
 return
 ;;
 "env")
 _sp_arg="";
 if [ -n "$1" ]; then
 _sp_arg="$1";
 shift;
 fi;
 if [ "$_sp_arg" = "-h" ] || [ "$_sp_arg" = "--help" ]; then
 command spack env -h;
 else
 case $_sp_arg in 
 activate)
 _a=" $@";
 if [ -z ${1+x} ] || [ "${_a#* --sh}" != "$_a" ] || [ "${_a#* --csh}" != "$_a" ] || [ "${_a#* -h}" != "$_a" ] || [ "${_a#* --help}" != "$_a" ]; then
 command spack env activate "$@";
 else
 stdout="$(command spack $_sp_flags env activate --sh "$@")" || return;
 eval "$stdout";
 fi
 ;;
 deactivate)
 _a=" $@";
 if [ "${_a#* --sh}" != "$_a" ] || [ "${_a#* --csh}" != "$_a" ]; then
 command spack env deactivate "$@";
 else
 if [ -n "$*" ]; then
 command spack env deactivate -h;
 else
 stdout="$(command spack $_sp_flags env deactivate --sh)" || return;
 eval "$stdout";
 fi;
 fi
 ;;
 *)
 command spack env $_sp_arg "$@"
 ;;
 esac;
 fi;
 return
 ;;
 "load" | "unload")
 _a=" $@";
 if [ "${_a#* --sh}" != "$_a" ] || [ "${_a#* --csh}" != "$_a" ] || [ "${_a#* -h}" != "$_a" ] || [ "${_a#* --list}" != "$_a" ] || [ "${_a#* --help}" != "$_a" ]; then
 command spack $_sp_flags $_sp_subcommand "$@";
 else
 stdout="$(command spack $_sp_flags $_sp_subcommand --sh "$@")" || return;
 eval "$stdout";
 fi
 ;;
 *)
 command spack $_sp_flags $_sp_subcommand "$@"
 ;;
 esac
}
BASH_FUNC_ml%%=() {  eval $($LMOD_DIR/ml_cmd "$@")
}
_=/usr/bin/printenv
compilers:
- compiler:
    spec: gcc@8.5.0
    paths:
      cc: /usr/bin/gcc
      cxx: /usr/bin/g++
      f77: /usr/bin/gfortran
      fc: /usr/bin/gfortran
    flags:
      cflags: -O2 -march=native
      cxxflags: -O2 -march=native
      fflags: -O2 -march=native
    operating_system: rocky8
    target: x86_64
    modules: []
    environment: {}
    extra_rpaths: []
config:
  install_tree:
    root: $spack/opt/spack
    projections:
      all: ${ARCHITECTURE}/${COMPILERNAME}-${COMPILERVER}/${PACKAGE}-${VERSION}-${HASH}
  template_dirs:
  - $spack/share/spack/templates

  # Temporary locations Spack can try to use for builds.
  #
  # Recommended options are given below.
  #
  # Builds can be faster in temporary directories on some (e.g., HPC) systems.
  # Specifying `$tempdir` will ensure use of the default temporary directory
  # (i.e., ``$TMP` or ``$TMPDIR``).
  #
  # Another option that prevents conflicts and potential permission issues is
  # to specify `$user_cache_path/stage`, which ensures each user builds in their
  # home directory.
  #
  # A more traditional path uses the value of `$spack/var/spack/stage`, which
  # builds directly inside Spack's instance without staging them in a
  # temporary space.  Problems with specifying a path inside a Spack instance
  # are that it precludes its use as a system package and its ability to be
  # pip installable.
  #
  # In any case, if the username is not already in the path, Spack will append
  # the value of `$user` in an attempt to avoid potential conflicts between
  # users in shared temporary spaces.
  #
  # The build stage can be purged with `spack clean --stage` and
  # `spack clean -a`, so it is important that the specified directory uniquely
  # identifies Spack staging to avoid accidentally wiping out non-Spack work.
  build_stage:
  - $tempdir/$user/spack-stage
  - $user_cache_path/stage
  # - $spack/var/spack/stage

  # Directory in which to run tests and store test results.
  # Tests will be stored in directories named by date/time and package
  # name/hash.
  test_stage: $user_cache_path/test
  source_cache: $spack/var/spack/cache
  misc_cache: $user_cache_path/cache
  connect_timeout: 10
  verify_ssl: true
  suppress_gpg_warnings: false
  install_missing_compilers: false
  checksum: true
  deprecated: false
  dirty: false
  build_language: C
  locks: true
  url_fetch_method: urllib
  ccache: false
  concretizer: clingo
  db_lock_timeout: 3
  package_lock_timeout: null
  shared_linking: rpath
  allow_sgid: true
  terminal_title: false
  debug: false
  build_jobs: 16
mirrors:
  spack-public: https://mirror.spack.io
modules:
  default:
    'enable:':
    - lmod
    lmod:
      core_compilers:
      - gcc@8.5.0
      hierarchy:
      - mpi
      hash_length: 0
      blacklist_implicits: true
      naming_scheme: '{name}/{version}-{hash:7}'
      projections:
        all: '{name}/{version}-{hash:7}'
      all:
        suffixes:
          +openmp: omp
          threads=openmp: omp
          +ipl64: i64
        environment:
          set:
            '{name}_ROOT': '{prefix}'
      intel:
        environment:
          set:
            INTEL_LICENSE_FILE: 40000@elprado.sdsc.edu:40200@elprado.sdsc.edu
      petsc:
        suffixes:
          +complex: cmplx
      slepc:
        suffixes:
          ^petsc +complex: cmplx
      ^python:
        autoload: direct
      ^ucx:
        autoload: direct
  prefix_inspections:
    lib:
    - LD_LIBRARY_PATH
    lib64:
    - LD_LIBRARY_PATH
    bin:
    - PATH
    man:
    - MANPATH
    share/man:
    - MANPATH
    share/aclocal:
    - ACLOCAL_PATH
    lib/pkgconfig:
    - PKG_CONFIG_PATH
    lib64/pkgconfig:
    - PKG_CONFIG_PATH
    share/pkgconfig:
    - PKG_CONFIG_PATH
    ? ''
    : - CMAKE_PREFIX_PATH

  # These are configurations for the module set named "default"
packages:
  lmod:
    externals:
    - spec: lmod@8.2.4
      prefix: /usr
    buildable: false
  lustre:
    externals:
    - spec: lustre@2.15.2
      prefix: /usr
    buildable: false
  openssl:
    externals:
    - spec: openssl@1.1.1k
      prefix: /usr
    buildable: false
  rdma-core:
    externals:
    - spec: rdma-core@43.0
      prefix: /usr
    buildable: false
  slurm:
    externals:
    - spec: slurm@23.02.7
      prefix: /cm/shared/apps/slurm/current
    buildable: false
  all:
    compiler: [gcc, intel, pgi, clang, xl, nag, fj, aocc]
    providers:
      awk: [gawk]
      blas: [openblas, amdblis]
      D: [ldc]
      daal: [intel-daal]
      elf: [elfutils]
      fftw-api: [fftw, amdfftw]
      flame: [libflame, amdlibflame]
      fuse: [libfuse]
      gl: [mesa+opengl, mesa18, opengl]
      glu: [mesa-glu, openglu]
      glx: [mesa+glx, mesa18+glx, opengl]
      golang: [gcc]
      iconv: [libiconv]
      ipp: [intel-ipp]
      java: [openjdk, jdk, ibm-java]
      jpeg: [libjpeg-turbo, libjpeg]
      lapack: [openblas, amdlibflame]
      lua-lang: [lua, lua-luajit]
      mariadb-client: [mariadb-c-client, mariadb]
      mkl: [intel-mkl]
      mpe: [mpe2]
      mpi: [openmpi, mpich]
      mysql-client: [mysql, mariadb-c-client]
      opencl: [pocl]
      onedal: [intel-oneapi-dal]
      osmesa: [mesa+osmesa, mesa18+osmesa]
      pbs: [openpbs, torque]
      pil: [py-pillow]
      pkgconfig: [pkgconf, pkg-config]
      rpc: [libtirpc]
      scalapack: [netlib-scalapack, amdscalapack]
      sycl: [hipsycl]
      szip: [libaec, libszip]
      tbb: [intel-tbb]
      unwind: [libunwind]
      uuid: [util-linux-uuid, libuuid]
      xxd: [xxd-standalone, vim]
      yacc: [bison, byacc]
      ziglang: [zig]
    permissions:
      read: world
      write: user
repos:
- $spack/var/spack/repos/sdsc
- $spack/var/spack/repos/builtin
upstreams: {}
Input spec
--------------------------------
[    ]  .gcc@10.2.0%gcc@8.5.0~binutils~bootstrap~graphite~nvptx~piclibs~strip

Concretized
--------------------------------
npcyll4  [    ]  builtin.gcc@10.2.0%gcc@8.5.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native" ~binutils~bootstrap~graphite~nvptx~piclibs~strip languages=c,c++,fortran patches=28c5ab3b564d83dd7e6e35b9c683141a4cb57ee886c5367e54a0828538b3c789,2c18531a23623596e1daf6f0dd963cf72c208945ecad90515640c3ab23991159,eaa00c91e08a5e767f023911a49bc1b2d1a3eea38703b745ab260f90e8da41aa arch=linux-rocky8-zen
jgot3zt  [b   ]      ^builtin.diffutils@3.8%gcc@8.5.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native"  arch=linux-rocky8-zen
yderrdc  [bl  ]          ^builtin.libiconv@1.16%gcc@8.5.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native"  libs=shared,static arch=linux-rocky8-zen
6d5recu  [bl  ]      ^builtin.gmp@6.2.1%gcc@8.5.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native"  arch=linux-rocky8-zen
wlqf4tu  [b   ]          ^builtin.autoconf@2.69%gcc@8.5.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native"  patches=35c449281546376449766f92d49fc121ca50e330e60fefcfc9be2af3253082c2,7793209b33013dc0f81208718c68440c5aae80e7a1c4b8d336e382525af791a7,a49dd5bac3b62daa0ff688ab4d508d71dbd2f4f8d7e2a02321926346161bf3ee arch=linux-rocky8-zen
qh3ydfy  [b r ]              ^builtin.m4@1.4.19%gcc@8.5.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native" +sigsegv patches=9dc5fbd0d5cb1037ab1e6d0ecc74a30df218d0a94bdd5a02759a97f62daca573,bfdffa7c2eb01021d5849b36972c069693654ad826c1a20b53534009a4ec7a89 arch=linux-rocky8-zen
b44wxmn  [bl  ]                  ^builtin.libsigsegv@2.13%gcc@8.5.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native"  arch=linux-rocky8-zen
onqgauy  [blr ]              ^sdsc.perl@5.32.0%gcc@8.5.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native" +cpanm+shared+threads arch=linux-rocky8-zen
dk6ivvc  [bl  ]                  ^builtin.berkeley-db@18.1.40%gcc@8.5.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native" +cxx~docs+stl patches=b231fcc4d5cff05e5c3a4814f6a5af0e9a966428dc2176540d2c05aff41de522 arch=linux-rocky8-zen
eixztsx  [bl  ]                  ^builtin.bzip2@1.0.8%gcc@8.5.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native" ~debug~pic+shared arch=linux-rocky8-zen
7vthrro  [bl  ]                  ^sdsc.gdbm@1.19%gcc@8.5.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native"  arch=linux-rocky8-zen
crxysww  [bl  ]                      ^builtin.readline@8.1%gcc@8.5.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native"  arch=linux-rocky8-zen
tqezzwo  [bl  ]                          ^builtin.ncurses@6.2%gcc@8.5.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native" ~symlinks+termlib abi=none arch=linux-rocky8-zen
fwt4tis  [b   ]                              ^builtin.pkgconf@1.8.0%gcc@8.5.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native"  arch=linux-rocky8-zen
bmchsim  [bl  ]                  ^builtin.zlib@1.2.11%gcc@8.5.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native" +optimize+pic+shared arch=linux-rocky8-zen
35svqa4  [b   ]          ^builtin.automake@1.16.3%gcc@8.5.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native"  arch=linux-rocky8-zen
bvootog  [b   ]          ^builtin.libtool@2.4.6%gcc@8.5.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native"  arch=linux-rocky8-zen
7brtlqf  [bl  ]      ^builtin.mpc@1.1.0%gcc@8.5.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native"  arch=linux-rocky8-zen
2gn43ks  [bl  ]          ^builtin.mpfr@4.1.0%gcc@8.5.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native"  arch=linux-rocky8-zen
44hang6  [b   ]              ^builtin.autoconf-archive@2019.01.06%gcc@8.5.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native"  arch=linux-rocky8-zen
zifjrox  [b   ]              ^builtin.texinfo@6.5%gcc@8.5.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native"  patches=12f6edb0c6b270b8c8dba2ce17998c580db01182d871ee32b7b6e4129bd1d23a,1732115f651cff98989cb0215d8f64da5e0f7911ebf0c13b064920f088f2ffe1 arch=linux-rocky8-zen
ixhjq2k  [bl  ]      ^builtin.zstd@1.5.0%gcc@8.5.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native" ~programs arch=linux-rocky8-zen

real 7.03
user 5.42
sys 0.34
==> Installing libiconv-1.16-yderrdc4lsgjejs532627rl5nwrwzmde
==> No binary for libiconv-1.16-yderrdc4lsgjejs532627rl5nwrwzmde found: installing from source
==> Warning: Expected user 501506 to own /scratch/mkandes, but it is owned by 0
==> Using cached archive: /home/mkandes/software/spack/repositories/mkandes/spack/var/spack/cache/_source-cache/archive/e6/e6a1b1b589654277ee790cce3734f07876ac4ccfaecbee8afa0b649cf529cc04.tar.gz
==> No patches needed for libiconv
==> libiconv: Executing phase: 'autoreconf'
==> libiconv: Executing phase: 'configure'
==> libiconv: Executing phase: 'build'
==> libiconv: Executing phase: 'install'
==> libiconv: Successfully installed libiconv-1.16-yderrdc4lsgjejs532627rl5nwrwzmde
  Fetch: 0.01s.  Build: 27.12s.  Total: 27.13s.
[+] /home/mkandes/software/spack/repositories/mkandes/spack/opt/spack/linux-rocky8-zen/gcc-8.5.0/libiconv-1.16-yderrdc4lsgjejs532627rl5nwrwzmde
==> Installing libsigsegv-2.13-b44wxmnhqlonr7zf5urngenv3lktqmji
==> No binary for libsigsegv-2.13-b44wxmnhqlonr7zf5urngenv3lktqmji found: installing from source
==> Fetching https://mirror.spack.io/_source-cache/archive/be/be78ee4176b05f7c75ff03298d84874db90f4b6c9d5503f0da1226b3a3c48119.tar.gz
==> No patches needed for libsigsegv
==> libsigsegv: Executing phase: 'autoreconf'
==> libsigsegv: Executing phase: 'configure'
==> libsigsegv: Executing phase: 'build'
==> libsigsegv: Executing phase: 'install'
==> libsigsegv: Successfully installed libsigsegv-2.13-b44wxmnhqlonr7zf5urngenv3lktqmji
  Fetch: 0.57s.  Build: 7.34s.  Total: 7.91s.
[+] /home/mkandes/software/spack/repositories/mkandes/spack/opt/spack/linux-rocky8-zen/gcc-8.5.0/libsigsegv-2.13-b44wxmnhqlonr7zf5urngenv3lktqmji
==> Installing berkeley-db-18.1.40-dk6ivvcdy6sq2ukkiqzg3oc3sfdmd2xn
==> No binary for berkeley-db-18.1.40-dk6ivvcdy6sq2ukkiqzg3oc3sfdmd2xn found: installing from source
==> Fetching https://mirror.spack.io/_source-cache/archive/0c/0cecb2ef0c67b166de93732769abdeba0555086d51de1090df325e18ee8da9c8.tar.gz
==> Applied patch /home/mkandes/software/spack/repositories/mkandes/spack/var/spack/repos/builtin/packages/berkeley-db/drop-docs.patch
==> Ran patch() for berkeley-db
==> berkeley-db: Executing phase: 'autoreconf'
==> berkeley-db: Executing phase: 'configure'
==> berkeley-db: Executing phase: 'build'
==> berkeley-db: Executing phase: 'install'
==> berkeley-db: Successfully installed berkeley-db-18.1.40-dk6ivvcdy6sq2ukkiqzg3oc3sfdmd2xn
  Fetch: 0.26s.  Build: 23.07s.  Total: 23.34s.
[+] /home/mkandes/software/spack/repositories/mkandes/spack/opt/spack/linux-rocky8-zen/gcc-8.5.0/berkeley-db-18.1.40-dk6ivvcdy6sq2ukkiqzg3oc3sfdmd2xn
==> Installing pkgconf-1.8.0-fwt4tisehgfyygmnh7qhb754ehlyq5sl
==> No binary for pkgconf-1.8.0-fwt4tisehgfyygmnh7qhb754ehlyq5sl found: installing from source
==> Fetching https://mirror.spack.io/_source-cache/archive/ef/ef9c7e61822b7cb8356e6e9e1dca58d9556f3200d78acab35e4347e9d4c2bbaf.tar.xz
==> No patches needed for pkgconf
==> pkgconf: Executing phase: 'autoreconf'
==> pkgconf: Executing phase: 'configure'
==> pkgconf: Executing phase: 'build'
==> pkgconf: Executing phase: 'install'
==> pkgconf: Successfully installed pkgconf-1.8.0-fwt4tisehgfyygmnh7qhb754ehlyq5sl
  Fetch: 0.22s.  Build: 6.58s.  Total: 6.81s.
[+] /home/mkandes/software/spack/repositories/mkandes/spack/opt/spack/linux-rocky8-zen/gcc-8.5.0/pkgconf-1.8.0-fwt4tisehgfyygmnh7qhb754ehlyq5sl
==> Installing zlib-1.2.11-bmchsimapzrndjqxvin7wptdiiwoxdqq
==> No binary for zlib-1.2.11-bmchsimapzrndjqxvin7wptdiiwoxdqq found: installing from source
==> Fetching https://mirror.spack.io/_source-cache/archive/c3/c3e5e9fdd5004dcb542feda5ee4f0ff0744628baf8ed2dd5d66f8ca1197cb1a1.tar.gz
==> No patches needed for zlib
==> zlib: Executing phase: 'install'
==> zlib: Successfully installed zlib-1.2.11-bmchsimapzrndjqxvin7wptdiiwoxdqq
  Fetch: 0.25s.  Build: 3.43s.  Total: 3.68s.
[+] /home/mkandes/software/spack/repositories/mkandes/spack/opt/spack/linux-rocky8-zen/gcc-8.5.0/zlib-1.2.11-bmchsimapzrndjqxvin7wptdiiwoxdqq
==> Installing autoconf-archive-2019.01.06-44hang62vjqqnwfejsa3iggavwzckzih
==> No binary for autoconf-archive-2019.01.06-44hang62vjqqnwfejsa3iggavwzckzih found: installing from source
==> Fetching https://mirror.spack.io/_source-cache/archive/17/17195c833098da79de5778ee90948f4c5d90ed1a0cf8391b4ab348e2ec511e3f.tar.xz
==> No patches needed for autoconf-archive
==> autoconf-archive: Executing phase: 'autoreconf'
==> autoconf-archive: Executing phase: 'configure'
==> autoconf-archive: Executing phase: 'build'
==> autoconf-archive: Executing phase: 'install'
==> autoconf-archive: Successfully installed autoconf-archive-2019.01.06-44hang62vjqqnwfejsa3iggavwzckzih
  Fetch: 0.56s.  Build: 43.53s.  Total: 44.08s.
[+] /home/mkandes/software/spack/repositories/mkandes/spack/opt/spack/linux-rocky8-zen/gcc-8.5.0/autoconf-archive-2019.01.06-44hang62vjqqnwfejsa3iggavwzckzih
==> Installing zstd-1.5.0-ixhjq2kjkwwiubjqtzompy3ovx3xskjy
==> No binary for zstd-1.5.0-ixhjq2kjkwwiubjqtzompy3ovx3xskjy found: installing from source
==> Fetching https://mirror.spack.io/_source-cache/archive/0d/0d9ade222c64e912d6957b11c923e214e2e010a18f39bec102f572e693ba2867.tar.gz
==> No patches needed for zstd
==> zstd: Executing phase: 'edit'
==> zstd: Executing phase: 'build'
==> zstd: Executing phase: 'install'
==> zstd: Successfully installed zstd-1.5.0-ixhjq2kjkwwiubjqtzompy3ovx3xskjy
  Fetch: 0.23s.  Build: 9.72s.  Total: 9.95s.
[+] /home/mkandes/software/spack/repositories/mkandes/spack/opt/spack/linux-rocky8-zen/gcc-8.5.0/zstd-1.5.0-ixhjq2kjkwwiubjqtzompy3ovx3xskjy
==> Installing diffutils-3.8-jgot3ztqojijkgnwjwk6ux2dacnedtws
==> No binary for diffutils-3.8-jgot3ztqojijkgnwjwk6ux2dacnedtws found: installing from source
==> Fetching https://mirror.spack.io/_source-cache/archive/a6/a6bdd7d1b31266d11c4f4de6c1b748d4607ab0231af5188fc2533d0ae2438fec.tar.xz
==> No patches needed for diffutils
==> diffutils: Executing phase: 'autoreconf'
==> diffutils: Executing phase: 'configure'
==> diffutils: Executing phase: 'build'
==> diffutils: Executing phase: 'install'
==> diffutils: Successfully installed diffutils-3.8-jgot3ztqojijkgnwjwk6ux2dacnedtws
  Fetch: 0.61s.  Build: 31.39s.  Total: 32.00s.
[+] /home/mkandes/software/spack/repositories/mkandes/spack/opt/spack/linux-rocky8-zen/gcc-8.5.0/diffutils-3.8-jgot3ztqojijkgnwjwk6ux2dacnedtws
==> Installing m4-1.4.19-qh3ydfyintqjwy24gwppy7nw7p4k6cut
==> No binary for m4-1.4.19-qh3ydfyintqjwy24gwppy7nw7p4k6cut found: installing from source
==> Fetching https://mirror.spack.io/_source-cache/archive/3b/3be4a26d825ffdfda52a56fc43246456989a3630093cced3fbddf4771ee58a70.tar.gz
==> Fetching https://mirror.spack.io/_source-cache/archive/bf/bfdffa7c2eb01021d5849b36972c069693654ad826c1a20b53534009a4ec7a89
==> Fetching https://mirror.spack.io/_source-cache/archive/9d/9dc5fbd0d5cb1037ab1e6d0ecc74a30df218d0a94bdd5a02759a97f62daca573
==> Applied patch http://git.savannah.gnu.org/cgit/m4.git/patch/?id=a1354086
==> Applied patch http://git.savannah.gnu.org/cgit/m4.git/patch/?id=cd7f4d15
==> Ran patch() for m4
==> m4: Executing phase: 'autoreconf'
==> m4: Executing phase: 'configure'
==> m4: Executing phase: 'build'
==> m4: Executing phase: 'install'
==> m4: Successfully installed m4-1.4.19-qh3ydfyintqjwy24gwppy7nw7p4k6cut
  Fetch: 0.24s.  Build: 38.73s.  Total: 38.97s.
[+] /home/mkandes/software/spack/repositories/mkandes/spack/opt/spack/linux-rocky8-zen/gcc-8.5.0/m4-1.4.19-qh3ydfyintqjwy24gwppy7nw7p4k6cut
==> Installing ncurses-6.2-tqezzwooo2opnqn2y45tjsozwlrmdnta
==> No binary for ncurses-6.2-tqezzwooo2opnqn2y45tjsozwlrmdnta found: installing from source
==> Fetching https://mirror.spack.io/_source-cache/archive/30/30306e0c76e0f9f1f0de987cf1c82a5c21e1ce6568b9227f7da5b71cbea86c9d.tar.gz
==> No patches needed for ncurses
==> ncurses: Executing phase: 'autoreconf'
==> ncurses: Executing phase: 'configure'
==> ncurses: Executing phase: 'build'
==> ncurses: Executing phase: 'install'
==> ncurses: Successfully installed ncurses-6.2-tqezzwooo2opnqn2y45tjsozwlrmdnta
  Fetch: 0.22s.  Build: 4m 33.86s.  Total: 4m 34.09s.
[+] /home/mkandes/software/spack/repositories/mkandes/spack/opt/spack/linux-rocky8-zen/gcc-8.5.0/ncurses-6.2-tqezzwooo2opnqn2y45tjsozwlrmdnta
==> Installing bzip2-1.0.8-eixztsxepw3tt37rkvb2pixk6fghgqpn
==> No binary for bzip2-1.0.8-eixztsxepw3tt37rkvb2pixk6fghgqpn found: installing from source
==> Fetching https://mirror.spack.io/_source-cache/archive/ab/ab5a03176ee106d3f0fa90e381da478ddae405918153cca248e682cd0c4a2269.tar.gz
==> Ran patch() for bzip2
==> bzip2: Executing phase: 'install'
==> bzip2: Successfully installed bzip2-1.0.8-eixztsxepw3tt37rkvb2pixk6fghgqpn
  Fetch: 0.57s.  Build: 4.50s.  Total: 5.08s.
[+] /home/mkandes/software/spack/repositories/mkandes/spack/opt/spack/linux-rocky8-zen/gcc-8.5.0/bzip2-1.0.8-eixztsxepw3tt37rkvb2pixk6fghgqpn
==> Installing libtool-2.4.6-bvootogj4mlbf4g7sdlbrgih7qydkdfg
==> No binary for libtool-2.4.6-bvootogj4mlbf4g7sdlbrgih7qydkdfg found: installing from source
==> Fetching https://mirror.spack.io/_source-cache/archive/e3/e3bd4d5d3d025a36c21dd6af7ea818a2afcd4dfc1ea5a17b39d7854bcd0c06e3.tar.gz
==> Ran patch() for libtool
==> libtool: Executing phase: 'autoreconf'
==> libtool: Executing phase: 'configure'
==> libtool: Executing phase: 'build'
==> libtool: Executing phase: 'install'
==> libtool: Successfully installed libtool-2.4.6-bvootogj4mlbf4g7sdlbrgih7qydkdfg
  Fetch: 0.62s.  Build: 13.87s.  Total: 14.50s.
[+] /home/mkandes/software/spack/repositories/mkandes/spack/opt/spack/linux-rocky8-zen/gcc-8.5.0/libtool-2.4.6-bvootogj4mlbf4g7sdlbrgih7qydkdfg
==> Installing readline-8.1-crxysww56qszze5dhko33udncl5z5tif
==> No binary for readline-8.1-crxysww56qszze5dhko33udncl5z5tif found: installing from source
==> Fetching https://mirror.spack.io/_source-cache/archive/f8/f8ceb4ee131e3232226a17f51b164afc46cd0b9e6cef344be87c65962cb82b02.tar.gz
==> Ran patch() for readline
==> readline: Executing phase: 'autoreconf'
==> readline: Executing phase: 'configure'
==> readline: Executing phase: 'build'
==> readline: Executing phase: 'install'
==> readline: Successfully installed readline-8.1-crxysww56qszze5dhko33udncl5z5tif
  Fetch: 0.80s.  Build: 12.47s.  Total: 13.26s.
[+] /home/mkandes/software/spack/repositories/mkandes/spack/opt/spack/linux-rocky8-zen/gcc-8.5.0/readline-8.1-crxysww56qszze5dhko33udncl5z5tif
==> Installing gdbm-1.19-7vthrronwkqaeob53irfndjaziczgdrz
==> No binary for gdbm-1.19-7vthrronwkqaeob53irfndjaziczgdrz found: installing from source
==> Fetching https://mirror.spack.io/_source-cache/archive/37/37ed12214122b972e18a0d94995039e57748191939ef74115b1d41d8811364bc.tar.gz
==> No patches needed for gdbm
==> gdbm: Executing phase: 'autoreconf'
==> gdbm: Executing phase: 'configure'
==> gdbm: Executing phase: 'build'
==> gdbm: Executing phase: 'install'
==> gdbm: Successfully installed gdbm-1.19-7vthrronwkqaeob53irfndjaziczgdrz
  Fetch: 0.58s.  Build: 13.96s.  Total: 14.54s.
[+] /home/mkandes/software/spack/repositories/mkandes/spack/opt/spack/linux-rocky8-zen/gcc-8.5.0/gdbm-1.19-7vthrronwkqaeob53irfndjaziczgdrz
==> Installing perl-5.32.0-onqgauyhbnajd2pqsqxvgbmthpp7mghp
==> No binary for perl-5.32.0-onqgauyhbnajd2pqsqxvgbmthpp7mghp found: installing from source
==> Fetching https://mirror.spack.io/_source-cache/archive/ef/efeb1ce1f10824190ad1cadbcccf6fdb8a5d37007d0100d2d9ae5f2b5900c0b4.tar.gz
==> Fetching https://mirror.spack.io/_source-cache/archive/9d/9da50e155df72bce55cb69f51f1dbb4b62d23740fb99f6178bb27f22ebdf8a46.tar.gz
==> Moving resource stage
	source: /scratch/mkandes/job_30010287/spack-stage/resource-cpanm-onqgauyhbnajd2pqsqxvgbmthpp7mghp/spack-src/
	destination: /scratch/mkandes/job_30010287/spack-stage/spack-stage-perl-5.32.0-onqgauyhbnajd2pqsqxvgbmthpp7mghp/spack-src/cpanm/cpanm
==> Ran patch() for perl
==> perl: Executing phase: 'configure'
==> perl: Executing phase: 'build'
==> perl: Executing phase: 'install'
==> perl: Successfully installed perl-5.32.0-onqgauyhbnajd2pqsqxvgbmthpp7mghp
  Fetch: 1.03s.  Build: 5m 1.55s.  Total: 5m 2.58s.
[+] /home/mkandes/software/spack/repositories/mkandes/spack/opt/spack/linux-rocky8-zen/gcc-8.5.0/perl-5.32.0-onqgauyhbnajd2pqsqxvgbmthpp7mghp
==> Installing texinfo-6.5-zifjroxm2jwq7qelfbsmlogdgvvlhdzd
==> No binary for texinfo-6.5-zifjroxm2jwq7qelfbsmlogdgvvlhdzd found: installing from source
==> Fetching https://mirror.spack.io/_source-cache/archive/d3/d34272e4042c46186ddcd66bd5d980c0ca14ff734444686ccf8131f6ec8b1427.tar.gz
==> Applied patch /home/mkandes/software/spack/repositories/mkandes/spack/var/spack/repos/builtin/packages/texinfo/fix_unescaped_braces.patch
==> Applied patch /home/mkandes/software/spack/repositories/mkandes/spack/var/spack/repos/builtin/packages/texinfo/update_locale_handling.patch
==> texinfo: Executing phase: 'autoreconf'
==> texinfo: Executing phase: 'configure'
==> texinfo: Executing phase: 'build'
==> texinfo: Executing phase: 'install'
==> texinfo: Successfully installed texinfo-6.5-zifjroxm2jwq7qelfbsmlogdgvvlhdzd
  Fetch: 0.75s.  Build: 1m 23.74s.  Total: 1m 24.49s.
[+] /home/mkandes/software/spack/repositories/mkandes/spack/opt/spack/linux-rocky8-zen/gcc-8.5.0/texinfo-6.5-zifjroxm2jwq7qelfbsmlogdgvvlhdzd
==> Installing autoconf-2.69-wlqf4tuwmg3q3xpymj3zgn2uulhn5qnt
==> No binary for autoconf-2.69-wlqf4tuwmg3q3xpymj3zgn2uulhn5qnt found: installing from source
==> Fetching https://mirror.spack.io/_source-cache/archive/95/954bd69b391edc12d6a4a51a2dd1476543da5c6bbf05a95b59dc0dd6fd4c2969.tar.gz
==> Fetching https://mirror.spack.io/_source-cache/archive/77/7793209b33013dc0f81208718c68440c5aae80e7a1c4b8d336e382525af791a7
==> Fetching https://mirror.spack.io/_source-cache/archive/35/35c449281546376449766f92d49fc121ca50e330e60fefcfc9be2af3253082c2
==> Fetching https://mirror.spack.io/_source-cache/archive/a4/a49dd5bac3b62daa0ff688ab4d508d71dbd2f4f8d7e2a02321926346161bf3ee
==> Applied patch http://mirrors.mit.edu/gentoo-portage/sys-devel/autoconf/files/autoconf-2.69-fix-libtool-test.patch
==> Applied patch http://mirrors.mit.edu/gentoo-portage/sys-devel/autoconf/files/autoconf-2.69-perl-5.26.patch
==> Applied patch http://mirrors.mit.edu/gentoo-portage/sys-devel/autoconf/files/autoconf-2.69-perl-5.26-2.patch
==> Ran patch() for autoconf
==> autoconf: Executing phase: 'autoreconf'
==> autoconf: Executing phase: 'configure'
==> autoconf: Executing phase: 'build'
==> autoconf: Executing phase: 'install'
==> autoconf: Successfully installed autoconf-2.69-wlqf4tuwmg3q3xpymj3zgn2uulhn5qnt
  Fetch: 0.66s.  Build: 16.22s.  Total: 16.88s.
[+] /home/mkandes/software/spack/repositories/mkandes/spack/opt/spack/linux-rocky8-zen/gcc-8.5.0/autoconf-2.69-wlqf4tuwmg3q3xpymj3zgn2uulhn5qnt
==> Installing automake-1.16.3-35svqa4vt2hsnvsw7zbs6jveumyvmjlv
==> No binary for automake-1.16.3-35svqa4vt2hsnvsw7zbs6jveumyvmjlv found: installing from source
==> Fetching https://mirror.spack.io/_source-cache/archive/ce/ce010788b51f64511a1e9bb2a1ec626037c6d0e7ede32c1c103611b9d3cba65f.tar.gz
==> Ran patch() for automake
==> automake: Executing phase: 'autoreconf'
==> automake: Executing phase: 'configure'
==> automake: Executing phase: 'build'
==> automake: Executing phase: 'install'
==> automake: Successfully installed automake-1.16.3-35svqa4vt2hsnvsw7zbs6jveumyvmjlv
  Fetch: 0.75s.  Build: 13.00s.  Total: 13.75s.
[+] /home/mkandes/software/spack/repositories/mkandes/spack/opt/spack/linux-rocky8-zen/gcc-8.5.0/automake-1.16.3-35svqa4vt2hsnvsw7zbs6jveumyvmjlv
==> Installing gmp-6.2.1-6d5recuzoijnpzdmyuyatwr32y6e756r
==> No binary for gmp-6.2.1-6d5recuzoijnpzdmyuyatwr32y6e756r found: installing from source
==> Fetching https://mirror.spack.io/_source-cache/archive/ea/eae9326beb4158c386e39a356818031bd28f3124cf915f8c5b1dc4c7a36b4d7c.tar.bz2
==> No patches needed for gmp
==> gmp: Executing phase: 'autoreconf'
==> gmp: Executing phase: 'configure'
==> gmp: Executing phase: 'build'
==> gmp: Executing phase: 'install'
==> gmp: Successfully installed gmp-6.2.1-6d5recuzoijnpzdmyuyatwr32y6e756r
  Fetch: 0.65s.  Build: 38.66s.  Total: 39.30s.
[+] /home/mkandes/software/spack/repositories/mkandes/spack/opt/spack/linux-rocky8-zen/gcc-8.5.0/gmp-6.2.1-6d5recuzoijnpzdmyuyatwr32y6e756r
==> Installing mpfr-4.1.0-2gn43ksz5mn4l2ydhukvmf2hc5n6lsu2
==> No binary for mpfr-4.1.0-2gn43ksz5mn4l2ydhukvmf2hc5n6lsu2 found: installing from source
==> Fetching https://mirror.spack.io/_source-cache/archive/fe/feced2d430dd5a97805fa289fed3fc8ff2b094c02d05287fd6133e7f1f0ec926.tar.bz2
==> No patches needed for mpfr
==> mpfr: Executing phase: 'autoreconf'
==> mpfr: Executing phase: 'configure'
==> mpfr: Executing phase: 'build'
==> mpfr: Executing phase: 'install'
==> mpfr: Successfully installed mpfr-4.1.0-2gn43ksz5mn4l2ydhukvmf2hc5n6lsu2
  Fetch: 0.61s.  Build: 32.22s.  Total: 32.83s.
[+] /home/mkandes/software/spack/repositories/mkandes/spack/opt/spack/linux-rocky8-zen/gcc-8.5.0/mpfr-4.1.0-2gn43ksz5mn4l2ydhukvmf2hc5n6lsu2
==> Installing mpc-1.1.0-7brtlqfdvz2iwdzeyd23igqlwz3fq4d5
==> No binary for mpc-1.1.0-7brtlqfdvz2iwdzeyd23igqlwz3fq4d5 found: installing from source
==> Fetching https://mirror.spack.io/_source-cache/archive/69/6985c538143c1208dcb1ac42cedad6ff52e267b47e5f970183a3e75125b43c2e.tar.gz
==> No patches needed for mpc
==> mpc: Executing phase: 'autoreconf'
==> mpc: Executing phase: 'configure'
==> mpc: Executing phase: 'build'
==> mpc: Executing phase: 'install'
==> mpc: Successfully installed mpc-1.1.0-7brtlqfdvz2iwdzeyd23igqlwz3fq4d5
  Fetch: 0.59s.  Build: 12.59s.  Total: 13.18s.
[+] /home/mkandes/software/spack/repositories/mkandes/spack/opt/spack/linux-rocky8-zen/gcc-8.5.0/mpc-1.1.0-7brtlqfdvz2iwdzeyd23igqlwz3fq4d5
==> Installing gcc-10.2.0-npcyll4gxjhf4tejksmdzlsl3d3usqpd
==> No binary for gcc-10.2.0-npcyll4gxjhf4tejksmdzlsl3d3usqpd found: installing from source
==> Fetching https://mirror.spack.io/_source-cache/archive/b8/b8dd4368bb9c7f0b98188317ee0254dd8cc99d1e3a18d0ff146c855fe16c1d8c.tar.xz
==> Fetching https://mirror.spack.io/_source-cache/archive/ea/eaa00c91e08a5e767f023911a49bc1b2d1a3eea38703b745ab260f90e8da41aa
==> Fetching https://mirror.spack.io/_source-cache/archive/28/28c5ab3b564d83dd7e6e35b9c683141a4cb57ee886c5367e54a0828538b3c789
==> Applied patch https://gcc.gnu.org/git/?p=gcc.git;a=patch;h=745dae5923aba02982563481d75a21595df22ff8
==> Applied patch /home/mkandes/software/spack/repositories/mkandes/spack/var/spack/repos/builtin/packages/gcc/zstd.patch
==> Applied patch https://gcc.gnu.org/git/?p=gcc.git;a=patch;h=fc930b3010bd0de899a3da3209eab20664ddb703
==> Ran patch() for gcc
==> gcc: Executing phase: 'autoreconf'
==> gcc: Executing phase: 'configure'
==> gcc: Executing phase: 'build'
==> gcc: Executing phase: 'install'
==> gcc: Successfully installed gcc-10.2.0-npcyll4gxjhf4tejksmdzlsl3d3usqpd
  Fetch: 2.08s.  Build: 6m 42.30s.  Total: 6m 44.38s.
[+] /home/mkandes/software/spack/repositories/mkandes/spack/opt/spack/linux-rocky8-zen/gcc-8.5.0/gcc-10.2.0-npcyll4gxjhf4tejksmdzlsl3d3usqpd
real 1643.18
user 2394.67
sys 411.62
==> Added 1 new compiler to /home/mkandes/software/spack/repositories/mkandes/spack/etc/spack/compilers.yaml
    gcc@10.2.0
==> Compilers are defined in the following files:
    /home/mkandes/software/spack/repositories/mkandes/spack/etc/spack/compilers.yaml
[mkandes@login02 specs]$ git status
On branch sdsc-0.17.3-gh-124-inst-exp-cpu-dev
Changes to be committed:
  (use "git restore --staged <file>..." to unstage)
	new file:   ../SPECS.md
	new file:   aocc@3.2.0.sh
	new file:   aocc@3.2.0/openmpi@4.1.3.sh
	new file:   aocc@3.2.0/openmpi@4.1.3/gromacs@2020.4.sh
	new file:   aocc@3.2.0/openmpi@4.1.3/hpl@2.3-omp.sh
	new file:   aocc@3.2.0/openmpi@4.1.3/hpl@2.3.sh
	new file:   aocc@3.2.0/openmpi@4.1.3/ior@3.3.0.sh
	new file:   aocc@3.2.0/openmpi@4.1.3/namd@2.14.sh
	new file:   aocc@3.2.0/openmpi@4.1.3/openfoam@2106.sh
	new file:   aocc@3.2.0/openmpi@4.1.3/osu-micro-benchmarks@5.7.1.sh
	new file:   aocc@3.2.0/openmpi@4.1.3/wrf@4.2.sh
	new file:   gcc@10.2.0.sh
	new file:   gcc@10.2.0/beast2@2.6.4.sh
	new file:   gcc@10.2.0/mvapich2@2.3.7.sh
	new file:   gcc@10.2.0/mvapich2@2.3.7/hpl@2.3-omp.sh
	new file:   gcc@10.2.0/mvapich2@2.3.7/hpl@2.3.sh
	new file:   gcc@10.2.0/mvapich2@2.3.7/ior@3.3.0.sh
	new file:   gcc@10.2.0/mvapich2@2.3.7/osu-micro-benchmarks@5.7.1.sh
	new file:   gcc@10.2.0/openmpi@4.1.3.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/gromacs@2020.4.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/gromacs@2022.6.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/hpl@2.3-omp.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/hpl@2.3.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/ior@3.3.0.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/namd@2.14.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/neuron@8.0.0.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/openfoam@2106.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/osu-micro-benchmarks@5.7.1.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/quantum-espresso@7.0.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/wrf@4.2.sh
	new file:   ../yamls/compilers.yaml
	new file:   ../yamls/modules.yaml
	new file:   ../yamls/packages.yaml

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   gcc@10.2.0.sh

Untracked files:
  (use "git add <file>..." to include in what will be committed)
	../../../../../../compilers.yaml
	../../../../../../modules.yaml
	../../../../../../packages.yaml
	gcc@10.2.0.o30010131.exp-15-40
	gcc@10.2.0.o30010287.exp-15-40

[mkandes@login02 specs]$ git add -u
[mkandes@login02 specs]$ git 
usage: git [-v | --version] [-h | --help] [-C <path>] [-c <name>=<value>]
           [--exec-path[=<path>]] [--html-path] [--man-path] [--info-path]
           [-p | --paginate | -P | --no-pager] [--no-replace-objects] [--bare]
           [--git-dir=<path>] [--work-tree=<path>] [--namespace=<name>]
           [--super-prefix=<path>] [--config-env=<name>=<envvar>]
           <command> [<args>]

These are common Git commands used in various situations:

start a working area (see also: git help tutorial)
   clone     Clone a repository into a new directory
   init      Create an empty Git repository or reinitialize an existing one

work on the current change (see also: git help everyday)
   add       Add file contents to the index
   mv        Move or rename a file, a directory, or a symlink
   restore   Restore working tree files
   rm        Remove files from the working tree and from the index

examine the history and state (see also: git help revisions)
   bisect    Use binary search to find the commit that introduced a bug
   diff      Show changes between commits, commit and working tree, etc
   grep      Print lines matching a pattern
   log       Show commit logs
   show      Show various types of objects
   status    Show the working tree status

grow, mark and tweak your common history
   branch    List, create, or delete branches
   commit    Record changes to the repository
   merge     Join two or more development histories together
   rebase    Reapply commits on top of another base tip
   reset     Reset current HEAD to the specified state
   switch    Switch branches
   tag       Create, list, delete or verify a tag object signed with GPG

collaborate (see also: git help workflows)
   fetch     Download objects and refs from another repository
   pull      Fetch from and integrate with another repository or a local branch
   push      Update remote refs along with associated objects

'git help -a' and 'git help -g' list available subcommands and some
concept guides. See 'git help <command>' or 'git help <concept>'
to read about a specific subcommand or concept.
See 'git help git' for an overview of the system.
[mkandes@login02 specs]$ git status
On branch sdsc-0.17.3-gh-124-inst-exp-cpu-dev
Changes to be committed:
  (use "git restore --staged <file>..." to unstage)
	new file:   ../SPECS.md
	new file:   aocc@3.2.0.sh
	new file:   aocc@3.2.0/openmpi@4.1.3.sh
	new file:   aocc@3.2.0/openmpi@4.1.3/gromacs@2020.4.sh
	new file:   aocc@3.2.0/openmpi@4.1.3/hpl@2.3-omp.sh
	new file:   aocc@3.2.0/openmpi@4.1.3/hpl@2.3.sh
	new file:   aocc@3.2.0/openmpi@4.1.3/ior@3.3.0.sh
	new file:   aocc@3.2.0/openmpi@4.1.3/namd@2.14.sh
	new file:   aocc@3.2.0/openmpi@4.1.3/openfoam@2106.sh
	new file:   aocc@3.2.0/openmpi@4.1.3/osu-micro-benchmarks@5.7.1.sh
	new file:   aocc@3.2.0/openmpi@4.1.3/wrf@4.2.sh
	new file:   gcc@10.2.0.sh
	new file:   gcc@10.2.0/beast2@2.6.4.sh
	new file:   gcc@10.2.0/mvapich2@2.3.7.sh
	new file:   gcc@10.2.0/mvapich2@2.3.7/hpl@2.3-omp.sh
	new file:   gcc@10.2.0/mvapich2@2.3.7/hpl@2.3.sh
	new file:   gcc@10.2.0/mvapich2@2.3.7/ior@3.3.0.sh
	new file:   gcc@10.2.0/mvapich2@2.3.7/osu-micro-benchmarks@5.7.1.sh
	new file:   gcc@10.2.0/openmpi@4.1.3.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/gromacs@2020.4.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/gromacs@2022.6.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/hpl@2.3-omp.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/hpl@2.3.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/ior@3.3.0.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/namd@2.14.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/neuron@8.0.0.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/openfoam@2106.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/osu-micro-benchmarks@5.7.1.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/quantum-espresso@7.0.sh
	new file:   gcc@10.2.0/openmpi@4.1.3/wrf@4.2.sh
	new file:   ../yamls/compilers.yaml
	new file:   ../yamls/modules.yaml
	new file:   ../yamls/packages.yaml

Untracked files:
  (use "git add <file>..." to include in what will be committed)
	../../../../../../compilers.yaml
	../../../../../../modules.yaml
	../../../../../../packages.yaml
	gcc@10.2.0.o30010131.exp-15-40
	gcc@10.2.0.o30010287.exp-15-40

[mkandes@login02 specs]$ git commit
[sdsc-0.17.3-gh-124-inst-exp-cpu-dev d5a435e62a] Start expanse/0.17.3/cpu/dev spack instance
 33 files changed, 2319 insertions(+)
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/SPECS.md
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/aocc@3.2.0.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/aocc@3.2.0/openmpi@4.1.3.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/aocc@3.2.0/openmpi@4.1.3/gromacs@2020.4.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/aocc@3.2.0/openmpi@4.1.3/hpl@2.3-omp.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/aocc@3.2.0/openmpi@4.1.3/hpl@2.3.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/aocc@3.2.0/openmpi@4.1.3/ior@3.3.0.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/aocc@3.2.0/openmpi@4.1.3/namd@2.14.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/aocc@3.2.0/openmpi@4.1.3/openfoam@2106.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/aocc@3.2.0/openmpi@4.1.3/osu-micro-benchmarks@5.7.1.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/aocc@3.2.0/openmpi@4.1.3/wrf@4.2.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/gcc@10.2.0.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/gcc@10.2.0/beast2@2.6.4.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/gcc@10.2.0/mvapich2@2.3.7.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/gcc@10.2.0/mvapich2@2.3.7/hpl@2.3-omp.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/gcc@10.2.0/mvapich2@2.3.7/hpl@2.3.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/gcc@10.2.0/mvapich2@2.3.7/ior@3.3.0.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/gcc@10.2.0/mvapich2@2.3.7/osu-micro-benchmarks@5.7.1.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/gcc@10.2.0/openmpi@4.1.3.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/gcc@10.2.0/openmpi@4.1.3/gromacs@2020.4.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/gcc@10.2.0/openmpi@4.1.3/gromacs@2022.6.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/gcc@10.2.0/openmpi@4.1.3/hpl@2.3-omp.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/gcc@10.2.0/openmpi@4.1.3/hpl@2.3.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/gcc@10.2.0/openmpi@4.1.3/ior@3.3.0.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/gcc@10.2.0/openmpi@4.1.3/namd@2.14.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/gcc@10.2.0/openmpi@4.1.3/neuron@8.0.0.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/gcc@10.2.0/openmpi@4.1.3/openfoam@2106.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/gcc@10.2.0/openmpi@4.1.3/osu-micro-benchmarks@5.7.1.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/gcc@10.2.0/openmpi@4.1.3/quantum-espresso@7.0.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/specs/gcc@10.2.0/openmpi@4.1.3/wrf@4.2.sh
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/yamls/compilers.yaml
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/yamls/modules.yaml
 create mode 100644 etc/spack/sdsc/expanse/0.17.3/cpu/dev/yamls/packages.yaml
[mkandes@login02 specs]$ git push
fatal: The current branch sdsc-0.17.3-gh-124-inst-exp-cpu-dev has no upstream branch.
To push the current branch and set the remote as upstream, use

    git push --set-upstream origin sdsc-0.17.3-gh-124-inst-exp-cpu-dev

To have this happen automatically for branches without a tracking
upstream, see 'push.autoSetupRemote' in 'git help config'.

[mkandes@login02 specs]$ git remote -v
origin	https://github.com/mkandes/spack.git (fetch)
origin	https://github.com/mkandes/spack.git (push)
upstream	https://github.com/sdsc/spack.git (fetch)
upstream	https://github.com/sdsc/spack.git (push)
[mkandes@login02 specs]$ git push --set-upstream origin sdsc-0.17.3-gh-124-inst-exp-cpu-dev
Username for 'https://github.com': mkandes
Password for 'https://mkandes@github.com': 
Enumerating objects: 56, done.
Counting objects: 100% (56/56), done.
Delta compression using up to 64 threads
Compressing objects: 100% (41/41), done.
Writing objects: 100% (49/49), 12.15 KiB | 6.07 MiB/s, done.
Total 49 (delta 28), reused 8 (delta 6), pack-reused 0
remote: Resolving deltas: 100% (28/28), completed with 2 local objects.
remote: 
remote: Create a pull request for 'sdsc-0.17.3-gh-124-inst-exp-cpu-dev' on GitHub by visiting:
remote:      https://github.com/mkandes/spack/pull/new/sdsc-0.17.3-gh-124-inst-exp-cpu-dev
remote: 
To https://github.com/mkandes/spack.git
 * [new branch]            sdsc-0.17.3-gh-124-inst-exp-cpu-dev -> sdsc-0.17.3-gh-124-inst-exp-cpu-dev
branch 'sdsc-0.17.3-gh-124-inst-exp-cpu-dev' set up to track 'origin/sdsc-0.17.3-gh-124-inst-exp-cpu-dev'.
[mkandes@login02 specs]$
```
