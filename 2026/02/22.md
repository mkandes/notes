# How to setup Claude Code (Terminal CLI) on Expanse

```
[mkandes_test@login01]~% expanse-client user -p

 Resource  expanse 

 NAME          STATE  PROJECT  TG PROJECT  USED  AVAILABLE  USED BY PROJECT 
----------------------------------------------------------------------------
 mkandes_test  allow  ddp386                165     110000             9678 
[mkandes_test@login01]~% ls -lahtr
total 140K
-rw-r--r--   1 mkandes_test ddp386   75 Jul 29  2021 .gitconfig
-rw-r--r--   1 mkandes_test ddp386  376 Aug  2  2022 .bashrc
-rw-r--r--   1 mkandes_test ddp386  141 Aug  2  2022 .bash_profile
-rw-r--r--   1 mkandes_test ddp386   18 Aug  2  2022 .bash_logout
-rw-r--r--   1 mkandes_test ddp386  334 Apr 12  2023 .emacs
-rw-r--r--   1 mkandes_test ddp386  172 Aug 25  2023 .kshrc
-rw-r--r--   1 mkandes_test ddp386  46K Apr 21  2025 .zcompdump
-rw-------   1 mkandes_test ddp386   49 May 15  2025 .lesshst
-rw-r--r--   1 mkandes_test ddp386  180 Jul  7  2025 .wget-hsts
-rw-r--r--   1 mkandes_test ddp386  658 Oct 29 14:44 .zshrc
-rw-------   1 mkandes_test ddp386  12K Nov  5 15:52 .viminfo
-rw-------   1 mkandes_test ddp386  25K Nov  5 15:57 .bash_history
drwxr-x---   2 mkandes_test ddp386 6.0K Dec 16 18:31 .
drwxr-xr-x 449 root         root      0 Feb 22 18:32 ..
[mkandes_test@login01]~% srun --partition=debug --account=ddp386 --nodes=1 --ntasks-per-node=1 --cpus-per-task=4 --mem=8G --time=00:30:00 --pty --wait=0 /bin/bash
srun: job 46675547 queued and waiting for resources
srun: job 46675547 has been allocated resources
[mkandes_test@exp-9-55 ~]$
```

```
[mkandes_test@exp-9-55 ~]$ curl -fsSL https://claude.ai/install.sh | bash
Setting up Claude Code...

✔ Claude Code successfully installed!        

  Version: 2.1.50

  Location: ~/.local/bin/claude


  Next: Run claude --help to get started

✅ Installation complete!

[mkandes_test@exp-9-55 ~]$
```

```
[mkandes_test@exp-9-55 ~]$ claude --help
Usage: claude [options] [command] [prompt]

Claude Code - starts an interactive session by default, use -p/--print for
non-interactive output

Arguments:
  prompt                                            Your prompt

Options:
  --add-dir <directories...>                        Additional directories to allow tool access to
  --agent <agent>                                   Agent for the current session. Overrides the 'agent' setting.
  --agents <json>                                   JSON object defining custom agents (e.g. '{"reviewer": {"description": "Reviews code", "prompt": "You are a code reviewer"}}')
  --allow-dangerously-skip-permissions              Enable bypassing all permission checks as an option, without it being enabled by default. Recommended only for sandboxes with no internet access.
  --allowedTools, --allowed-tools <tools...>        Comma or space-separated list of tool names to allow (e.g. "Bash(git:*) Edit")
  --append-system-prompt <prompt>                   Append a system prompt to the default system prompt
  --betas <betas...>                                Beta headers to include in API requests (API key users only)
  --chrome                                          Enable Claude in Chrome integration
  -c, --continue                                    Continue the most recent conversation in the current directory
  --dangerously-skip-permissions                    Bypass all permission checks. Recommended only for sandboxes with no internet access.
  -d, --debug [filter]                              Enable debug mode with optional category filtering (e.g., "api,hooks" or "!1p,!file")
  --debug-file <path>                               Write debug logs to a specific file path (implicitly enables debug mode)
  --disable-slash-commands                          Disable all skills
  --disallowedTools, --disallowed-tools <tools...>  Comma or space-separated list of tool names to deny (e.g. "Bash(git:*) Edit")
  --effort <level>                                  Effort level for the current session (low, medium, high)
  --fallback-model <model>                          Enable automatic fallback to specified model when default model is overloaded (only works with --print)
  --file <specs...>                                 File resources to download at startup. Format: file_id:relative_path (e.g., --file file_abc:doc.txt file_def:img.png)
  --fork-session                                    When resuming, create a new session ID instead of reusing the original (use with --resume or --continue)
  --from-pr [value]                                 Resume a session linked to a PR by PR number/URL, or open interactive picker with optional search term
  -h, --help                                        Display help for command
  --ide                                             Automatically connect to IDE on startup if exactly one valid IDE is available
  --include-partial-messages                        Include partial message chunks as they arrive (only works with --print and --output-format=stream-json)
  --input-format <format>                           Input format (only works with --print): "text" (default), or "stream-json" (realtime streaming input) (choices: "text", "stream-json")
  --json-schema <schema>                            JSON Schema for structured output validation. Example: {"type":"object","properties":{"name":{"type":"string"}},"required":["name"]}
  --max-budget-usd <amount>                         Maximum dollar amount to spend on API calls (only works with --print)
  --mcp-config <configs...>                         Load MCP servers from JSON files or strings (space-separated)
  --mcp-debug                                       [DEPRECATED. Use --debug instead] Enable MCP debug mode (shows MCP server errors)
  --model <model>                                   Model for the current session. Provide an alias for the latest model (e.g. 'sonnet' or 'opus') or a model's full name (e.g. 'claude-sonnet-4-6').
  --no-chrome                                       Disable Claude in Chrome integration
  --no-session-persistence                          Disable session persistence - sessions will not be saved to disk and cannot be resumed (only works with --print)
  --output-format <format>                          Output format (only works with --print): "text" (default), "json" (single result), or "stream-json" (realtime streaming) (choices: "text", "json", "stream-json")
  --permission-mode <mode>                          Permission mode to use for the session (choices: "acceptEdits", "bypassPermissions", "default", "dontAsk", "plan")
  --plugin-dir <paths...>                           Load plugins from directories for this session only (repeatable)
  -p, --print                                       Print response and exit (useful for pipes). Note: The workspace trust dialog is skipped when Claude is run with the -p mode. Only use this flag in directories you trust.
  --replay-user-messages                            Re-emit user messages from stdin back on stdout for acknowledgment (only works with --input-format=stream-json and --output-format=stream-json)
  -r, --resume [value]                              Resume a conversation by session ID, or open interactive picker with optional search term
  --session-id <uuid>                               Use a specific session ID for the conversation (must be a valid UUID)
  --setting-sources <sources>                       Comma-separated list of setting sources to load (user, project, local).
  --settings <file-or-json>                         Path to a settings JSON file or a JSON string to load additional settings from
  --strict-mcp-config                               Only use MCP servers from --mcp-config, ignoring all other MCP configurations
  --system-prompt <prompt>                          System prompt to use for the session
  --tmux                                            Create a tmux session for the worktree (requires --worktree). Uses iTerm2 native panes when available; use --tmux=classic for traditional tmux.
  --tools <tools...>                                Specify the list of available tools from the built-in set. Use "" to disable all tools, "default" to use all tools, or specify tool names (e.g. "Bash,Edit,Read").
  --verbose                                         Override verbose mode setting from config
  -v, --version                                     Output the version number
  -w, --worktree [name]                             Create a new git worktree for this session (optionally specify a name)

Commands:
  agents [options]                                  List configured agents
  auth                                              Manage authentication
  doctor                                            Check the health of your Claude Code auto-updater
  install [options] [target]                        Install Claude Code native build. Use [target] to specify version (stable, latest, or specific version)
  mcp                                               Configure and manage MCP servers
  plugin                                            Manage Claude Code plugins
  setup-token                                       Set up a long-lived authentication token (requires Claude subscription)
  update|upgrade                                    Check for updates and install if available
[mkandes_test@exp-9-55 ~]$
```

```
[mkandes_test@exp-9-55 ~]$ claude code cli
Tip: You can launch Claude Code with just `claude`
Welcome to Claude Code v2.1.50
…………………………………………………………………………………………………………………………………………………………

     *                                       █████▓▓░
                                 *         ███▓░     ░░
            ░░░░░░                        ███▓░
    ░░░   ░░░░░░░░░░                      ███▓░
   ░░░░░░░░░░░░░░░░░░░    *                ██▓░░      ▓
                                             ░▓▓███▓▓░
 *                                 ░░░░
                                 ░░░░░░░░
                               ░░░░░░░░░░░░░░░░
       █████████                                        *
      ██▄█████▄██                        *
       █████████      *
…………………█ █   █ █………………………………………………………………………………………………………………

 Let's get started.

 Choose the text style that looks best with your terminal
 To change this later, run /theme

 ❯ 1. Dark mode ✔
   2. Light mode
   3. Dark mode (colorblind-friendly)
   4. Light mode (colorblind-friendly)
   5. Dark mode (ANSI colors only)
   6. Light mode (ANSI colors only)

╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌
 1  function greet() {
 2 -  console.log("Hello, World!");                                                                                                                        
 2 +  console.log("Hello, Claude!");                                                                                                                       
 3  }
╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌
 Syntax theme: Monokai Extended (ctrl+t to disable)
```

```
[mkandes_test@exp-9-55 ~]$ claude code cli
Tip: You can launch Claude Code with just `claude`
Welcome to Claude Code v2.1.50 
…………………………………………………………………………………………………………………………………………………………

     *                                       █████▓▓░
                                 *         ███▓░     ░░
            ░░░░░░                        ███▓░
    ░░░   ░░░░░░░░░░                      ███▓░
   ░░░░░░░░░░░░░░░░░░░    *                ██▓░░      ▓
                                             ░▓▓███▓▓░
 *                                 ░░░░                   
                                 ░░░░░░░░                 
                               ░░░░░░░░░░░░░░░░           
       █████████                                        * 
      ██▄█████▄██                        *               
       █████████      *                                
…………………█ █   █ █………………………………………………………………………………………………………………

 Browser didn't open? Use the url below to sign in (c to copy)                                                                                             
                                                                                                                                                           
https://platform.claude.com/oauth/authorize?code=true&client_id=9d1c250a-e61b-44d9-88ed-5944d1962f5e&response_type=code&redirect_uri=https%3A%2F%2Fplatform
.claude.com%2Foauth%2Fcode%2Fcallback&scope=org%3Acreate_api_key+user%3Aprofile+user%3Ainference+user%3Asessions%3Aclaude_code+user%3Amcp_servers&code_chal
lenge=nLs83Rc2_n7FpfPV_K5bD-c5cli2BHNddYGMY8WDC2E&code_challenge_method=S256&state=FwQ4jxRnC3_Jz8q5sbhRSsidFS7Nf-4-sJSLpr1zNj4                             
                                                                                                                                                           
                                                                                                                                                           
 Paste code here if prompted >
```

```
[mkandes_test@exp-9-56 ~]$ claude "What should I add to my .zshrc?"

╭─── Claude Code v2.1.50 ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│                                                    │ Tips for getting started                                                                           │
│                 Welcome back Human!                │ Run /init to create a CLAUDE.md file with instructions for Claude                                  │
│                                                    │ Note: You have launched claude in your home directory. For the best experience, launch it in a pr… │
│                                                    │ ────────────────────────────────────────────────────────────────────────────────────────────────── │
│                                                    │ Recent activity                                                                                    │
│                          ✻                         │ No recent activity                                                                                 │
│                          |                         │                                                                                                    │
│                         ▟█▙                        │                                                                                                    │
│                       ▐▛███▜▌                      │                                                                                                    │
│                      ▝▜█████▛▘                     │                                                                                                    │
│                        ▘▘ ▝▝                       │                                                                                                    │
│      Sonnet 4.6 · API Usage Billing · Human‘s      │                                                                                                    │
│      Individual Org                                │                                                                                                    │
│                 /home/mkandes_test                 │                                                                                                    │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯

❯ What should I add to my .zshrc?                                                                                                                          
                       
✢ Perambulating…                                                                                                                                           
                 
───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
❯                 
───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  esc to interrupt
[mkandes_test@exp-9-56 ~]$ ls .z
.zcompdump  .zshrc      
[mkandes_test@exp-9-56 ~]$ ls .zshrc 
.zshrc
[mkandes_test@exp-9-56 ~]$ ls
[mkandes_test@exp-9-56 ~]$ git init
hint: Using 'master' as the name for the initial branch. This default branch name
hint: is subject to change. To configure the initial branch name to use in all
hint: of your new repositories, which will suppress this warning, call:
hint: 
hint: 	git config --global init.defaultBranch <name>
hint: 
hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
hint: 'development'. The just-created branch can be renamed via this command:
hint: 
hint: 	git branch -m <name>
Initialized empty Git repository in /home/mkandes_test/.git/
[mkandes_test@exp-9-56 ~]$ git log
fatal: your current branch 'master' does not have any commits yet
[mkandes_test@exp-9-56 ~]$ git config --list
user.name=Marty Kandes
user.email=mkandes@sdsc.edu
core.editor=vim
core.repositoryformatversion=0
core.filemode=true
core.bare=false
core.logallrefupdates=true
[mkandes_test@exp-9-56 ~]$ ls -lahtr
total 172K
-rw-r--r--  1 mkandes_test ddp386   75 Jul 29  2021 .gitconfig
-rw-r--r--  1 mkandes_test ddp386  376 Aug  2  2022 .bashrc
-rw-r--r--  1 mkandes_test ddp386  141 Aug  2  2022 .bash_profile
-rw-r--r--  1 mkandes_test ddp386   18 Aug  2  2022 .bash_logout
-rw-r--r--  1 mkandes_test ddp386  334 Apr 12  2023 .emacs
-rw-r--r--  1 mkandes_test ddp386  172 Aug 25  2023 .kshrc
-rw-r--r--  1 mkandes_test ddp386  46K Apr 21  2025 .zcompdump
-rw-------  1 mkandes_test ddp386   49 May 15  2025 .lesshst
-rw-r--r--  1 mkandes_test ddp386  180 Jul  7  2025 .wget-hsts
-rw-r--r--  1 mkandes_test ddp386  658 Oct 29 14:44 .zshrc
-rw-------  1 mkandes_test ddp386  12K Nov  5 15:52 .viminfo
drwxr-xr-x  3 mkandes_test ddp386  512 Feb 22 18:33 .cache
drwxr-xr-x  5 mkandes_test ddp386 1.5K Feb 22 18:33 .local
-rw-------  1 mkandes_test ddp386  25K Feb 22 18:39 .bash_history
drwxr-xr-x 89 root         root      0 Feb 22 19:12 ..
drwx------  2 mkandes_test ddp386  512 Feb 22 19:17 .ssh
drwxr-xr-x  9 mkandes_test ddp386 4.5K Feb 22 19:23 .claude
-rw-------  1 mkandes_test ddp386 4.3K Feb 22 19:23 .claude.json
drwxr-x---  7 mkandes_test ddp386 9.0K Feb 22 19:25 .
drwxr-xr-x  7 mkandes_test ddp386 4.0K Feb 22 19:25 .git
[mkandes_test@exp-9-56 ~]$ claude "What should I add to my .zshrc?"

╭─── Claude Code v2.1.50 ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│                                                    │ Tips for getting started                                                                           │
│                 Welcome back Human!                │ Run /init to create a CLAUDE.md file with instructions for Claude                                  │
│                                                    │ Note: You have launched claude in your home directory. For the best experience, launch it in a pr… │
│                                                    │ ────────────────────────────────────────────────────────────────────────────────────────────────── │
│                                                    │ Recent activity                                                                                    │
│                          ✻                         │ No recent activity                                                                                 │
│                          |                         │                                                                                                    │
│                         ▟█▙                        │                                                                                                    │
│                       ▐▛███▜▌                      │                                                                                                    │
│                      ▝▜█████▛▘                     │                                                                                                    │
│                        ▘▘ ▝▝                       │                                                                                                    │
│      Sonnet 4.6 · API Usage Billing · Human‘s      │                                                                                                    │
│      Individual Org                                │                                                                                                    │
│                 /home/mkandes_test                 │                                                                                                    │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯

❯ What should I add to my .zshrc?                                                                                                                          
  ⎿  Credit balance too low · Add funds: https://platform.claude.com/settings/billing
                                                                                                                                                           
───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
❯                                                                                                                                                          
───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  ? for shortcuts
```


# Reference(s):
- https://code.claude.com/docs/en/overview
- https://github.com/anthropics/claude-code/issues/12507
