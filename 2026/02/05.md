# Modifying ZFS configuration

### Limit ARC to max 50% RAM

```
mkandes@hardtack:~$ zfs list
NAME                                               USED  AVAIL  REFER  MOUNTPOINT
bpool                                              213M  1.54G    96K  /boot
bpool/BOOT                                         211M  1.54G    96K  none
bpool/BOOT/ubuntu_ybsehk                           211M  1.54G   211M  /boot
rpool                                             1.49T   306G   192K  /
rpool/ROOT                                        22.1G   306G   192K  none
rpool/ROOT/ubuntu_ybsehk                          22.1G   306G  13.5G  /
rpool/ROOT/ubuntu_ybsehk/srv                       192K   306G   192K  /srv
rpool/ROOT/ubuntu_ybsehk/usr                       664K   306G   192K  /usr
rpool/ROOT/ubuntu_ybsehk/usr/local                 472K   306G   472K  /usr/local
rpool/ROOT/ubuntu_ybsehk/var                      8.59G   306G   192K  /var
rpool/ROOT/ubuntu_ybsehk/var/games                 192K   306G   192K  /var/games
rpool/ROOT/ubuntu_ybsehk/var/lib                  8.47G   306G  8.29G  /var/lib
rpool/ROOT/ubuntu_ybsehk/var/lib/AccountsService   212K   306G   212K  /var/lib/AccountsService
rpool/ROOT/ubuntu_ybsehk/var/lib/NetworkManager    684K   306G   684K  /var/lib/NetworkManager
rpool/ROOT/ubuntu_ybsehk/var/lib/apt               101M   306G   101M  /var/lib/apt
rpool/ROOT/ubuntu_ybsehk/var/lib/dpkg             84.0M   306G  84.0M  /var/lib/dpkg
rpool/ROOT/ubuntu_ybsehk/var/log                   118M   306G   118M  /var/log
rpool/ROOT/ubuntu_ybsehk/var/mail                  192K   306G   192K  /var/mail
rpool/ROOT/ubuntu_ybsehk/var/snap                 4.17M   306G  4.17M  /var/snap
rpool/ROOT/ubuntu_ybsehk/var/spool                2.66M   306G  2.66M  /var/spool
rpool/ROOT/ubuntu_ybsehk/var/www                   192K   306G   192K  /var/www
rpool/USERDATA                                    1.47T   306G   192K  none
rpool/USERDATA/home_fdun0v                        1.47T   306G  1.47T  /home
rpool/USERDATA/root_fdun0v                         688K   306G   688K  /root
rpool/keystore                                    22.5M   306G  16.5M  -
mkandes@hardtack:~$
```

```
mkandes@hardtack:~$ swapon --show
NAME      TYPE      SIZE USED PRIO
/dev/dm-1 partition   8G 1.5G   -2
mkandes@hardtack:~$
```

```
mkandes@hardtack:~$ df -h
Filesystem                                        Size  Used Avail Use% Mounted on
tmpfs                                             3.2G  3.2M  3.2G   1% /run
/dev/mapper/keystore-rpool                        3.8M   28K  3.5M   1% /run/keystore/rpool
rpool/ROOT/ubuntu_ybsehk                          320G   14G  307G   5% /
rpool/ROOT/ubuntu_ybsehk/srv                      307G  256K  307G   1% /srv
rpool/ROOT/ubuntu_ybsehk/usr/local                307G  512K  307G   1% /usr/local
rpool/ROOT/ubuntu_ybsehk/var/games                307G  256K  307G   1% /var/games
rpool/ROOT/ubuntu_ybsehk/var/lib                  315G  8.3G  307G   3% /var/lib
rpool/ROOT/ubuntu_ybsehk/var/lib/AccountsService  307G  256K  307G   1% /var/lib/AccountsService
rpool/ROOT/ubuntu_ybsehk/var/lib/NetworkManager   307G  768K  307G   1% /var/lib/NetworkManager
rpool/ROOT/ubuntu_ybsehk/var/lib/apt              307G  102M  307G   1% /var/lib/apt
rpool/ROOT/ubuntu_ybsehk/var/lib/dpkg             307G   84M  307G   1% /var/lib/dpkg
rpool/ROOT/ubuntu_ybsehk/var/log                  307G  119M  307G   1% /var/log
rpool/ROOT/ubuntu_ybsehk/var/mail                 307G  256K  307G   1% /var/mail
rpool/ROOT/ubuntu_ybsehk/var/snap                 307G  4.3M  307G   1% /var/snap
rpool/ROOT/ubuntu_ybsehk/var/spool                307G  2.8M  307G   1% /var/spool
rpool/ROOT/ubuntu_ybsehk/var/www                  307G  256K  307G   1% /var/www
tmpfs                                              16G  246M   16G   2% /dev/shm
tmpfs                                             5.0M   16K  5.0M   1% /run/lock
efivarfs                                          374K  290K   80K  79% /sys/firmware/efi/efivars
rpool/USERDATA/home_fdun0v                        1.8T  1.5T  307G  84% /home
rpool/USERDATA/root_fdun0v                        307G  768K  307G   1% /root
tmpfs                                              16G     0   16G   0% /run/qemu
bpool/BOOT/ubuntu_ybsehk                          1.8G  211M  1.6G  12% /boot
/dev/nvme0n1p1                                    1.1G   34M  1.1G   4% /boot/efi
tmpfs                                             3.2G  164K  3.2G   1% /run/user/1000
/dev/sda1                                         117G   14M  117G   1% /media/mkandes/Secure_Key
mkandes@hardtack:~$
```

```
mkandes@hardtack:~$ cat /etc/fstab | grep swap
/dev/disk/by-id/dm-uuid-CRYPT-PLAIN-dm_crypt-0 none swap sw 0 0
mkandes@hardtack:~$
```

```
mkandes@hardtack:~$ sudo -i
[sudo] password for mkandes: 
root@hardtack:~# cd /etc/modprobe.d/
root@hardtack:/etc/modprobe.d# ls
alsa-base.conf                  blacklist-modem.conf
amd64-microcode-blacklist.conf  blacklist-oss.conf
blacklist-ath_pci.conf          blacklist-rare-network.conf
blacklist.conf                  intel-microcode-blacklist.conf
blacklist-firewire.conf         iwlwifi.conf
blacklist-framebuffer.conf
root@hardtack:/etc/modprobe.d#
```

```
root@hardtack:/etc/modprobe.d# echo 'options zfs zfs_arc_max=17179869184' > zfs.conf
root@hardtack:/etc/modprobe.d# echo 'options zfs zfs_arc_min=4294967296' >> zfs.conf
root@hardtack:/etc/modprobe.d# ls
alsa-base.conf                  blacklist-modem.conf
amd64-microcode-blacklist.conf  blacklist-oss.conf
blacklist-ath_pci.conf          blacklist-rare-network.conf
blacklist.conf                  intel-microcode-blacklist.conf
blacklist-firewire.conf         iwlwifi.conf
blacklist-framebuffer.conf      zfs.conf
root@hardtack:/etc/modprobe.d# cat zfs.conf 
options zfs zfs_arc_max=17179869184
options zfs zfs_arc_min=4294967296
root@hardtack:/etc/modprobe.d#
```

```
mkandes@hardtack:~$ cat /sys/module/zfs/parameters/zfs_arc_max
0
```

```
mkandes@hardtack:~$ arc_summary

------------------------------------------------------------------------
ZFS Subsystem Report                            Thu Feb 05 10:08:15 2026
Linux 6.14.0-37-generic                                   2.3.1-1ubuntu2
Machine: hardtack (x86_64)                                2.3.1-1ubuntu2

ARC status:                                                      HEALTHY
        Memory throttle count:                                         0

ARC size (current):                                    74.7 %   22.5 GiB
        Target size (adaptive):                        75.1 %   22.6 GiB
        Min size (hard limit):                          3.2 %  993.9 MiB
        Max size (high water):                           30:1   30.1 GiB
        Anonymous data size:                          < 0.1 %  428.0 KiB
        Anonymous metadata size:                      < 0.1 %  383.5 KiB
        MFU data target:                               64.0 %   14.1 GiB
        MFU data size:                                 46.8 %   10.3 GiB
        MFU ghost data size:                                   692.8 MiB
        MFU metadata target:                            9.0 %    2.0 GiB
        MFU metadata size:                              3.3 %  736.7 MiB
        MFU ghost metadata size:                               383.3 MiB
        MRU data target:                               17.3 %    3.8 GiB
        MRU data size:                                 45.6 %   10.0 GiB
        MRU ghost data size:                                     5.9 GiB
        MRU metadata target:                            9.7 %    2.1 GiB
        MRU metadata size:                              4.3 %  976.1 MiB
        MRU ghost metadata size:                               329.3 MiB
        Uncached data size:                             0.0 %    0 Bytes
        Uncached metadata size:                         0.0 %    0 Bytes
        Bonus size:                                     0.6 %  145.2 MiB
        Dnode cache target:                            10.0 %    3.0 GiB
        Dnode cache size:                               5.9 %  182.4 MiB
        Dbuf size:                                      0.4 %   80.7 MiB
        Header size:                                    0.3 %   73.2 MiB
        L2 header size:                                 0.0 %    0 Bytes
        ABD chunk waste size:                           0.1 %   12.4 MiB

ARC hash breakdown:
        Elements max:                                             313.7k
        Elements current:                             100.0 %     313.7k
        Collisions:                                                 2.0M
        Chain max:                                                     5
        Chains:                                                    11.1k

ARC misc:
        Deleted:                                                   18.5M
        Mutex misses:                                               4.7k
        Eviction skips:                                           343.5k
        Eviction skips due to L2 writes:                               0
        L2 cached evictions:                                     0 Bytes
        L2 eligible evictions:                                   1.8 TiB
        L2 eligible MFU evictions:                      9.9 %  186.3 GiB
        L2 eligible MRU evictions:                     90.1 %    1.7 TiB
        L2 ineligible evictions:                               323.3 GiB

ARC total accesses:                                               216.5M
        Total hits:                                    91.9 %     199.0M
        Total I/O hits:                                 0.9 %       1.9M
        Total misses:                                   7.2 %      15.6M

ARC demand data accesses:                              54.1 %     117.1M
        Demand data hits:                              99.1 %     116.1M
        Demand data I/O hits:                         < 0.1 %      35.1k
        Demand data misses:                             0.8 %     960.4k

ARC demand metadata accesses:                          39.1 %      84.7M
        Demand metadata hits:                          97.1 %      82.3M
        Demand metadata I/O hits:                       2.2 %       1.9M
        Demand metadata misses:                         0.7 %     564.7k

ARC prefetch data accesses:                             6.5 %      14.2M
        Prefetch data hits:                             2.2 %     308.0k
        Prefetch data I/O hits:                       < 0.1 %        495
        Prefetch data misses:                          97.8 %      13.9M

ARC prefetch metadata accesses:                         0.3 %     548.2k
        Prefetch metadata hits:                        66.2 %     362.9k
        Prefetch metadata I/O hits:                     3.7 %      20.2k
        Prefetch metadata misses:                      30.1 %     165.1k

ARC predictive prefetches:                            100.0 %      14.7M
        Demand hits after predictive:                  78.6 %      11.6M
        Demand I/O hits after predictive:               0.4 %      58.9k
        Never demanded after predictive:               21.0 %       3.1M

ARC prescient prefetches:                             < 0.1 %         36
        Demand hits after prescient:                   63.9 %         23
        Demand I/O hits after prescient:               36.1 %         13
        Never demanded after prescient:                 0.0 %          0

ARC states hits of all accesses:
        Most frequently used (MFU):                    43.6 %      94.4M
        Most recently used (MRU):                      48.3 %     104.6M
        Most frequently used (MFU) ghost:             < 0.1 %      51.6k
        Most recently used (MRU) ghost:               < 0.1 %      82.5k
        Uncached:                                       0.0 %          0

DMU predictive prefetcher calls:                                  161.5M
        Stream hits:                                   58.8 %      94.9M
        Stream misses:                                 41.2 %      66.6M
        Streams limit reached:                          6.3 %       4.2M
        Prefetches issued                                          11.0M

L2ARC not detected, skipping section

Solaris Porting Layer (SPL):
        spl_hostid                                                     0
        spl_hostid_path                                      /etc/hostid
        spl_kmem_alloc_max                                       1048576
        spl_kmem_alloc_warn                                        65536
        spl_kmem_cache_kmem_threads                                    4
        spl_kmem_cache_magazine_size                                   0
        spl_kmem_cache_max_size                                       32
        spl_kmem_cache_obj_per_slab                                    8
        spl_kmem_cache_slab_limit                                  16384
        spl_panic_halt                                                 0
        spl_schedule_hrtimeout_slack_us                                0
        spl_taskq_kick                                                 0
        spl_taskq_thread_bind                                          0
        spl_taskq_thread_dynamic                                       1
        spl_taskq_thread_priority                                      1
        spl_taskq_thread_sequential                                    4
        spl_taskq_thread_timeout_ms                                 5000

Tunables:
        brt_zap_default_bs                                            12
        brt_zap_default_ibs                                           12
        brt_zap_prefetch                                               1
        dbuf_cache_hiwater_pct                                        10
        dbuf_cache_lowater_pct                                        10
        dbuf_cache_max_bytes                        18446744073709551615
        dbuf_cache_shift                                               5
        dbuf_metadata_cache_max_bytes               18446744073709551615
        dbuf_metadata_cache_shift                                      6
        dbuf_mutex_cache_shift                                         0
        ddt_zap_default_bs                                            15
        ddt_zap_default_ibs                                           15
        dmu_ddt_copies                                                 0
        dmu_object_alloc_chunk_shift                                   7
        dmu_prefetch_max                                       134217728
        icp_aes_impl                cycle [fastest] generic x86_64 aesni
        icp_gcm_avx_chunk_size                                     32736
        icp_gcm_impl               cycle [fastest] avx generic pclmulqdq
        ignore_hole_birth                                              1
        l2arc_exclude_special                                          0
        l2arc_feed_again                                               1
        l2arc_feed_min_ms                                            200
        l2arc_feed_secs                                                1
        l2arc_headroom                                                 8
        l2arc_headroom_boost                                         200
        l2arc_meta_percent                                            33
        l2arc_mfuonly                                                  0
        l2arc_noprefetch                                               1
        l2arc_norw                                                     0
        l2arc_rebuild_blocks_min_l2size                       1073741824
        l2arc_rebuild_enabled                                          1
        l2arc_trim_ahead                                               0
        l2arc_write_boost                                       33554432
        l2arc_write_max                                         33554432
        metaslab_aliquot                                         1048576
        metaslab_bias_enabled                                          1
        metaslab_debug_load                                            0
        metaslab_debug_unload                                          0
        metaslab_df_max_search                                  16777216
        metaslab_df_use_largest_segment                                0
        metaslab_force_ganging                                  16777217
        metaslab_force_ganging_pct                                     3
        metaslab_fragmentation_factor_enabled                          1
        metaslab_lba_weighting_enabled                                 1
        metaslab_preload_enabled                                       1
        metaslab_preload_limit                                        10
        metaslab_preload_pct                                          50
        metaslab_unload_delay                                         32
        metaslab_unload_delay_ms                                  600000
        raidz_expand_max_copy_bytes                            167772160
        raidz_expand_max_reflow_bytes                                  0
        raidz_io_aggregate_rows                                        4
        send_holes_without_birth_time                                  1
        spa_asize_inflation                                           24
        spa_config_path                             /etc/zfs/zpool.cache
        spa_cpus_per_allocator                                         4
        spa_load_print_vdev_tree                                       0
        spa_load_verify_data                                           1
        spa_load_verify_metadata                                       1
        spa_load_verify_shift                                          4
        spa_num_allocators                                             4
        spa_slop_shift                                                 5
        spa_upgrade_errlog_limit                                       0
        vdev_file_logical_ashift                                       9
        vdev_file_physical_ashift                                      9
        vdev_removal_max_span                                      32768
        vdev_validate_skip                                             0
        zap_iterate_prefetch                                           1
        zap_micro_max_size                                        131072
        zap_shrink_enabled                                             1
        zfetch_hole_shift                                              2
        zfetch_max_distance                                     67108864
        zfetch_max_idistance                                   134217728
        zfetch_max_reorder                                      16777216
        zfetch_max_sec_reap                                            2
        zfetch_max_streams                                             8
        zfetch_min_distance                                      4194304
        zfetch_min_sec_reap                                            1
        zfs_abd_scatter_enabled                                        1
        zfs_abd_scatter_max_order                                      9
        zfs_abd_scatter_min_size                                    1536
        zfs_active_allocator                                     dynamic
        zfs_admin_snapshot                                             0
        zfs_allow_redacted_dataset_mount                               0
        zfs_arc_average_blocksize                                   8192
        zfs_arc_dnode_limit                                            0
        zfs_arc_dnode_limit_percent                                   10
        zfs_arc_dnode_reduce_percent                                  10
        zfs_arc_evict_batch_limit                                     10
        zfs_arc_eviction_pct                                         200
        zfs_arc_grow_retry                                             0
        zfs_arc_lotsfree_percent                                      10
        zfs_arc_max                                                    0
        zfs_arc_meta_balance                                         500
        zfs_arc_min                                                    0
        zfs_arc_min_prefetch_ms                                        0
        zfs_arc_min_prescient_prefetch_ms                              0
        zfs_arc_pc_percent                                             0
        zfs_arc_prune_task_threads                                     1
        zfs_arc_shrink_shift                                           0
        zfs_arc_shrinker_limit                                         0
        zfs_arc_shrinker_seeks                                         2
        zfs_arc_sys_free                                               0
        zfs_async_block_max_blocks                  18446744073709551615
        zfs_autoimport_disable                                         1
        zfs_bclone_enabled                                             1
        zfs_bclone_wait_dirty                                          0
        zfs_blake3_impl   cycle [fastest] generic sse2 sse41 avx2 avx512
        zfs_btree_verify_intensity                                     0
        zfs_checksum_events_per_second                                20
        zfs_commit_timeout_pct                                        10
        zfs_compressed_arc_enabled                                     1
        zfs_condense_indirect_commit_entry_delay_ms                    0
        zfs_condense_indirect_obsolete_pct                            25
        zfs_condense_indirect_vdevs_enable                             1
        zfs_condense_max_obsolete_bytes                       1073741824
        zfs_condense_min_mapping_bytes                            131072
        zfs_dbgmsg_enable                                              1
        zfs_dbgmsg_maxsize                                       4194304
        zfs_dbuf_state_index                                           0
        zfs_ddt_data_is_special                                        1
        zfs_deadman_checktime_ms                                   60000
        zfs_deadman_enabled                                            1
        zfs_deadman_events_per_second                                  1
        zfs_deadman_failmode                                        wait
        zfs_deadman_synctime_ms                                   600000
        zfs_deadman_ziotime_ms                                    300000
        zfs_dedup_log_flush_entries_min                             1000
        zfs_dedup_log_flush_flow_rate_txgs                            10
        zfs_dedup_log_flush_min_time_ms                             1000
        zfs_dedup_log_flush_passes_max                                 8
        zfs_dedup_log_mem_max                                  333502341
        zfs_dedup_log_mem_max_percent                                  1
        zfs_dedup_log_txg_max                                          8
        zfs_dedup_prefetch                                             0
        zfs_default_bs                                                 9
        zfs_default_ibs                                               17
        zfs_delay_min_dirty_percent                                   60
        zfs_delay_scale                                           500000
        zfs_delete_blocks                                          20480
        zfs_dio_enabled                                                1
        zfs_dio_write_verify_events_per_second                        20
        zfs_dirty_data_max                                    3335023411
        zfs_dirty_data_max_max                                4294967296
        zfs_dirty_data_max_max_percent                                25
        zfs_dirty_data_max_percent                                    10
        zfs_dirty_data_sync_percent                                   20
        zfs_disable_ivset_guid_check                                   0
        zfs_dmu_offset_next_sync                                       1
        zfs_embedded_slog_min_ms                                      64
        zfs_expire_snapshot                                          300
        zfs_fallocate_reserve_percent                                110
        zfs_flags                                                      0
        zfs_fletcher_4_impl [fastest] scalar superscalar superscalar4 sse2 ssse3 avx2 avx512f avx512bw
        zfs_free_bpobj_enabled                                         1
        zfs_free_leak_on_eio                                           0
        zfs_free_min_time_ms                                        1000
        zfs_history_output_max                                   1048576
        zfs_immediate_write_sz                                     32768
        zfs_initialize_chunk_size                                1048576
        zfs_initialize_value                        16045690984833335022
        zfs_keep_log_spacemaps_at_export                               0
        zfs_key_max_salt_uses                                  400000000
        zfs_livelist_condense_new_alloc                                0
        zfs_livelist_condense_sync_cancel                              0
        zfs_livelist_condense_sync_pause                               0
        zfs_livelist_condense_zthr_cancel                              0
        zfs_livelist_condense_zthr_pause                               0
        zfs_livelist_max_entries                                  500000
        zfs_livelist_min_percent_shared                               75
        zfs_lua_max_instrlimit                                 100000000
        zfs_lua_max_memlimit                                   104857600
        zfs_max_async_dedup_frees                                 100000
        zfs_max_dataset_nesting                                       50
        zfs_max_log_walking                                            5
        zfs_max_logsm_summary_length                                  10
        zfs_max_missing_tvds                                           0
        zfs_max_nvlist_src_size                                        0
        zfs_max_recordsize                                      16777216
        zfs_metaslab_find_max_tries                                  100
        zfs_metaslab_fragmentation_threshold                          77
        zfs_metaslab_max_size_cache_sec                             3600
        zfs_metaslab_mem_limit                                        25
        zfs_metaslab_segment_weight_enabled                            1
        zfs_metaslab_switch_threshold                                  2
        zfs_metaslab_try_hard_before_gang                              0
        zfs_mg_fragmentation_threshold                                95
        zfs_mg_noalloc_threshold                                       0
        zfs_min_metaslabs_to_flush                                     1
        zfs_multihost_fail_intervals                                  10
        zfs_multihost_history                                          0
        zfs_multihost_import_intervals                                20
        zfs_multihost_interval                                      1000
        zfs_multilist_num_sublists                                     0
        zfs_no_scrub_io                                                0
        zfs_no_scrub_prefetch                                          0
        zfs_nocacheflush                                               0
        zfs_nopwrite_enabled                                           1
        zfs_object_mutex_size                                         64
        zfs_obsolete_min_time_ms                                     500
        zfs_override_estimate_recordsize                               0
        zfs_pd_bytes_max                                        52428800
        zfs_per_txg_dirty_frees_percent                               30
        zfs_prefetch_disable                                           0
        zfs_read_history                                               0
        zfs_read_history_hits                                          0
        zfs_rebuild_max_segment                                  1048576
        zfs_rebuild_scrub_enabled                                      1
        zfs_rebuild_vdev_limit                                  67108864
        zfs_reconstruct_indirect_combinations_max                   4096
        zfs_recover                                                    0
        zfs_recv_best_effort_corrective                                0
        zfs_recv_queue_ff                                             20
        zfs_recv_queue_length                                   16777216
        zfs_recv_write_batch_size                                1048576
        zfs_removal_ignore_errors                                      0
        zfs_removal_suspend_progress                                   0
        zfs_remove_max_segment                                  16777216
        zfs_resilver_defer_percent                                    10
        zfs_resilver_disable_defer                                     0
        zfs_resilver_min_time_ms                                    3000
        zfs_scan_blkstats                                              0
        zfs_scan_checkpoint_intval                                  7200
        zfs_scan_fill_weight                                           3
        zfs_scan_ignore_errors                                         0
        zfs_scan_issue_strategy                                        0
        zfs_scan_legacy                                                0
        zfs_scan_max_ext_gap                                     2097152
        zfs_scan_mem_lim_fact                                         20
        zfs_scan_mem_lim_soft_fact                                    20
        zfs_scan_report_txgs                                           0
        zfs_scan_strict_mem_lim                                        0
        zfs_scan_suspend_progress                                      0
        zfs_scan_vdev_limit                                     16777216
        zfs_scrub_after_expand                                         1
        zfs_scrub_error_blocks_per_txg                              4096
        zfs_scrub_min_time_ms                                       1000
        zfs_send_corrupt_data                                          0
        zfs_send_no_prefetch_queue_ff                                 20
        zfs_send_no_prefetch_queue_length                        1048576
        zfs_send_queue_ff                                             20
        zfs_send_queue_length                                   16777216
        zfs_send_unmodified_spill_blocks                               1
        zfs_sha256_impl cycle [fastest] generic x64 ssse3 avx avx2 shani
        zfs_sha512_impl             cycle [fastest] generic x64 avx avx2
        zfs_slow_io_events_per_second                                 20
        zfs_snapshot_history_enabled                                   1
        zfs_snapshot_no_setuid                                         0
        zfs_spa_discard_memory_limit                            16777216
        zfs_special_class_metadata_reserve_pct                        25
        zfs_sync_pass_deferred_free                                    2
        zfs_sync_pass_dont_compress                                    8
        zfs_sync_pass_rewrite                                          2
        zfs_traverse_indirect_prefetch_limit                          32
        zfs_trim_extent_bytes_max                              134217728
        zfs_trim_extent_bytes_min                                  32768
        zfs_trim_metaslab_skip                                         0
        zfs_trim_queue_limit                                          10
        zfs_trim_txg_batch                                            32
        zfs_txg_history                                              100
        zfs_txg_timeout                                                5
        zfs_unflushed_log_block_max                               131072
        zfs_unflushed_log_block_min                                 1000
        zfs_unflushed_log_block_pct                                  400
        zfs_unflushed_log_txg_max                                   1000
        zfs_unflushed_max_mem_amt                             1073741824
        zfs_unflushed_max_mem_ppm                                   1000
        zfs_unlink_suspend_progress                                    0
        zfs_user_indirect_is_special                                   1
        zfs_vdev_aggregation_limit                               1048576
        zfs_vdev_aggregation_limit_non_rotating                   131072
        zfs_vdev_async_read_max_active                                 3
        zfs_vdev_async_read_min_active                                 1
        zfs_vdev_async_write_active_max_dirty_percent                 60
        zfs_vdev_async_write_active_min_dirty_percent                 30
        zfs_vdev_async_write_max_active                               10
        zfs_vdev_async_write_min_active                                2
        zfs_vdev_def_queue_depth                                      32
        zfs_vdev_default_ms_count                                    200
        zfs_vdev_default_ms_shift                                     29
        zfs_vdev_direct_write_verify                                   1
        zfs_vdev_disk_classic                                          0
        zfs_vdev_disk_max_segs                                         0
        zfs_vdev_failfast_mask                                         1
        zfs_vdev_initializing_max_active                               1
        zfs_vdev_initializing_min_active                               1
        zfs_vdev_max_active                                         1000
        zfs_vdev_max_auto_ashift                                      14
        zfs_vdev_max_ms_shift                                         34
        zfs_vdev_min_auto_ashift                                       9
        zfs_vdev_min_ms_count                                         16
        zfs_vdev_mirror_non_rotating_inc                               0
        zfs_vdev_mirror_non_rotating_seek_inc                          1
        zfs_vdev_mirror_rotating_inc                                   0
        zfs_vdev_mirror_rotating_seek_inc                              5
        zfs_vdev_mirror_rotating_seek_offset                     1048576
        zfs_vdev_ms_count_limit                                   131072
        zfs_vdev_nia_credit                                            5
        zfs_vdev_nia_delay                                             5
        zfs_vdev_open_timeout_ms                                    1000
        zfs_vdev_queue_depth_pct                                    1000
        zfs_vdev_raidz_impl cycle [fastest] original scalar sse2 ssse3 avx2 avx512f avx512bw
        zfs_vdev_read_gap_limit                                    32768
        zfs_vdev_rebuild_max_active                                    3
        zfs_vdev_rebuild_min_active                                    1
        zfs_vdev_removal_max_active                                    2
        zfs_vdev_removal_min_active                                    1
        zfs_vdev_scheduler                                        unused
        zfs_vdev_scrub_max_active                                      3
        zfs_vdev_scrub_min_active                                      1
        zfs_vdev_sync_read_max_active                                 10
        zfs_vdev_sync_read_min_active                                 10
        zfs_vdev_sync_write_max_active                                10
        zfs_vdev_sync_write_min_active                                10
        zfs_vdev_trim_max_active                                       2
        zfs_vdev_trim_min_active                                       1
        zfs_vdev_write_gap_limit                                    4096
        zfs_vnops_read_chunk_size                                1048576
        zfs_wrlog_data_max                                    6670046822
        zfs_xattr_compat                                               0
        zfs_zevent_len_max                                           512
        zfs_zevent_retain_expire_secs                                900
        zfs_zevent_retain_max                                       2000
        zfs_zil_clean_taskq_maxalloc                             1048576
        zfs_zil_clean_taskq_minalloc                                1024
        zfs_zil_clean_taskq_nthr_pct                                 100
        zfs_zil_saxattr                                                1
        zil_maxblocksize                                          131072
        zil_maxcopied                                               7680
        zil_nocacheflush                                               0
        zil_replay_disable                                             0
        zil_slog_bulk                                           67108864
        zio_deadman_log_all                                            0
        zio_dva_throttle_enabled                                       1
        zio_requeue_io_start_cut_in_line                               1
        zio_slow_io_ms                                             30000
        zio_taskq_batch_pct                                           80
        zio_taskq_batch_tpq                                            0
        zio_taskq_read                         fixed,1,8 null scale null
        zio_taskq_write                             sync null scale null
        zio_taskq_write_tpq                                           16
        zstd_abort_size                                           131072
        zstd_earlyabort_pass                                           1
        zvol_blk_mq_blocks_per_thread                                  8
        zvol_blk_mq_queue_depth                                      128
        zvol_enforce_quotas                                            1
        zvol_inhibit_dev                                               0
        zvol_major                                                   230
        zvol_max_discard_blocks                                    16384
        zvol_num_taskqs                                                0
        zvol_open_timeout_ms                                        1000
        zvol_prefetch_bytes                                       131072
        zvol_request_sync                                              0
        zvol_threads                                                   0
        zvol_use_blk_mq                                                0
        zvol_volmode                                                   1

ZIL committed transactions:                                         2.0M
        Commit requests:                                          138.4k
        Flushes to stable storage:                                137.7k
        Transactions to SLOG storage pool:            0 Bytes          0
        Transactions to non-SLOG storage pool:        3.5 GiB     148.5k

mkandes@hardtack:~$
```

System rebooted.

```
mkandes@hardtack:~$ arc_summary

------------------------------------------------------------------------
ZFS Subsystem Report                            Thu Feb 05 10:28:32 2026
Linux 6.17.0-14-generic                                   2.3.4-1ubuntu2
Machine: hardtack (x86_64)                                2.3.4-1ubuntu2

ARC status:                                                      HEALTHY
        Memory throttle count:                                         0

ARC size (current):                                    12.5 %    2.0 GiB
        Target size (adaptive):                        25.0 %    4.0 GiB
        Min size (hard limit):                         25.0 %    4.0 GiB
        Max size (high water):                            4:1   16.0 GiB
        Anonymous data size:                            0.1 %    2.4 MiB
        Anonymous metadata size:                      < 0.1 %  443.0 KiB
        MFU data target:                               37.5 %  700.4 MiB
        MFU data size:                                 35.9 %  670.2 MiB
        MFU ghost data size:                                     0 Bytes
        MFU metadata target:                           12.5 %  233.5 MiB
        MFU metadata size:                             15.2 %  283.9 MiB
        MFU ghost metadata size:                                 0 Bytes
        MRU data target:                               37.5 %  700.4 MiB
        MRU data size:                                 39.9 %  745.2 MiB
        MRU ghost data size:                                     0 Bytes
        MRU metadata target:                           12.5 %  233.5 MiB
        MRU metadata size:                              8.9 %  165.6 MiB
        MRU ghost metadata size:                                 0 Bytes
        Uncached data size:                             0.0 %    0 Bytes
        Uncached metadata size:                         0.0 %    0 Bytes
        Bonus size:                                     3.1 %   64.1 MiB
        Dnode cache target:                            10.0 %    1.6 GiB
        Dnode cache size:                               4.6 %   74.9 MiB
        Dbuf size:                                      1.6 %   32.0 MiB
        Header size:                                    0.5 %    9.9 MiB
        L2 header size:                                 0.0 %    0 Bytes
        ABD chunk waste size:                           0.3 %    6.6 MiB

ARC hash breakdown:
        Elements max:                                              42.0k
        Elements current:                             100.0 %      42.0k
        Collisions:                                                  370
        Chain max:                                                     2
        Chains:                                                      175

ARC misc:
        Deleted:                                                      30
        Mutex misses:                                                  0
        Eviction skips:                                               95
        Eviction skips due to L2 writes:                               0
        L2 cached evictions:                                     0 Bytes
        L2 eligible evictions:                                 540.5 KiB
        L2 eligible MFU evictions:                      0.0 %    0 Bytes
        L2 eligible MRU evictions:                    100.0 %  540.5 KiB
        L2 ineligible evictions:                                 4.0 KiB

ARC total accesses:                                                 1.6M
        Total hits:                                    97.3 %       1.6M
        Total I/O hits:                                 0.2 %       3.0k
        Total misses:                                   2.6 %      40.8k

ARC demand data accesses:                              33.6 %     536.7k
        Demand data hits:                              96.3 %     516.6k
        Demand data I/O hits:                           0.1 %        315
        Demand data misses:                             3.7 %      19.8k

ARC demand metadata accesses:                          64.8 %       1.0M
        Demand metadata hits:                          98.8 %       1.0M
        Demand metadata I/O hits:                     < 0.1 %        491
        Demand metadata misses:                         1.2 %      12.1k

ARC prefetch data accesses:                             0.8 %      13.4k
        Prefetch data hits:                            47.9 %       6.4k
        Prefetch data I/O hits:                         0.7 %         91
        Prefetch data misses:                          51.4 %       6.9k

ARC prefetch metadata accesses:                         0.7 %      11.9k
        Prefetch metadata hits:                        65.0 %       7.7k
        Prefetch metadata I/O hits:                    17.6 %       2.1k
        Prefetch metadata misses:                      17.4 %       2.1k

ARC predictive prefetches:                             99.8 %      25.2k
        Demand hits after predictive:                  29.4 %       7.4k
        Demand I/O hits after predictive:               2.0 %        495
        Never demanded after predictive:               68.7 %      17.3k

ARC prescient prefetches:                               0.2 %         46
        Demand hits after prescient:                   65.2 %         30
        Demand I/O hits after prescient:               34.8 %         16
        Never demanded after prescient:                 0.0 %          0

ARC states hits of all accesses:
        Most frequently used (MFU):                    67.7 %       1.1M
        Most recently used (MRU):                      29.6 %     472.8k
        Most frequently used (MFU) ghost:               0.0 %          0
        Most recently used (MRU) ghost:                 0.0 %          0
        Uncached:                                       0.0 %          0

DMU predictive prefetcher calls:                                  200.1k
        Stream hits:                                   42.1 %      84.2k
        Stream misses:                                 57.9 %     115.9k
        Streams limit reached:                         75.3 %      87.3k
        Prefetches issued                                           5.5k

L2ARC not detected, skipping section

Solaris Porting Layer (SPL):
        spl_hostid                                                     0
        spl_hostid_path                                      /etc/hostid
        spl_kmem_alloc_max                                       1048576
        spl_kmem_alloc_warn                                        65536
        spl_kmem_cache_kmem_threads                                    4
        spl_kmem_cache_magazine_size                                   0
        spl_kmem_cache_max_size                                       32
        spl_kmem_cache_obj_per_slab                                    8
        spl_kmem_cache_slab_limit                                  16384
        spl_panic_halt                                                 0
        spl_schedule_hrtimeout_slack_us                                0
        spl_taskq_kick                                                 0
        spl_taskq_thread_bind                                          0
        spl_taskq_thread_dynamic                                       1
        spl_taskq_thread_priority                                      1
        spl_taskq_thread_sequential                                    4
        spl_taskq_thread_timeout_ms                                 5000

Tunables:
        brt_zap_default_bs                                            12
        brt_zap_default_ibs                                           12
        brt_zap_prefetch                                               1
        dbuf_cache_hiwater_pct                                        10
        dbuf_cache_lowater_pct                                        10
        dbuf_cache_max_bytes                        18446744073709551615
        dbuf_cache_shift                                               5
        dbuf_metadata_cache_max_bytes               18446744073709551615
        dbuf_metadata_cache_shift                                      6
        dbuf_mutex_cache_shift                                         0
        ddt_zap_default_bs                                            15
        ddt_zap_default_ibs                                           15
        dmu_ddt_copies                                                 0
        dmu_object_alloc_chunk_shift                                   7
        dmu_prefetch_max                                       134217728
        icp_aes_impl                cycle [fastest] generic x86_64 aesni
        icp_gcm_avx_chunk_size                                     32736
        icp_gcm_impl               cycle [fastest] avx generic pclmulqdq
        l2arc_exclude_special                                          0
        l2arc_feed_again                                               1
        l2arc_feed_min_ms                                            200
        l2arc_feed_secs                                                1
        l2arc_headroom                                                 8
        l2arc_headroom_boost                                         200
        l2arc_meta_percent                                            33
        l2arc_mfuonly                                                  0
        l2arc_noprefetch                                               1
        l2arc_norw                                                     0
        l2arc_rebuild_blocks_min_l2size                       1073741824
        l2arc_rebuild_enabled                                          1
        l2arc_trim_ahead                                               0
        l2arc_write_boost                                       33554432
        l2arc_write_max                                         33554432
        metaslab_aliquot                                         1048576
        metaslab_bias_enabled                                          1
        metaslab_debug_load                                            0
        metaslab_debug_unload                                          0
        metaslab_df_max_search                                  16777216
        metaslab_df_use_largest_segment                                0
        metaslab_force_ganging                                  16777217
        metaslab_force_ganging_pct                                     3
        metaslab_fragmentation_factor_enabled                          1
        metaslab_lba_weighting_enabled                                 1
        metaslab_preload_enabled                                       1
        metaslab_preload_limit                                        10
        metaslab_preload_pct                                          50
        metaslab_unload_delay                                         32
        metaslab_unload_delay_ms                                  600000
        raidz_expand_max_copy_bytes                            167772160
        raidz_expand_max_reflow_bytes                                  0
        raidz_io_aggregate_rows                                        4
        send_holes_without_birth_time                                  1
        spa_asize_inflation                                           24
        spa_config_path                             /etc/zfs/zpool.cache
        spa_cpus_per_allocator                                         4
        spa_load_print_vdev_tree                                       0
        spa_load_verify_data                                           1
        spa_load_verify_metadata                                       1
        spa_load_verify_shift                                          4
        spa_num_allocators                                             4
        spa_slop_shift                                                 5
        spa_upgrade_errlog_limit                                       0
        vdev_file_logical_ashift                                       9
        vdev_file_physical_ashift                                      9
        vdev_removal_max_span                                      32768
        vdev_validate_skip                                             0
        zap_iterate_prefetch                                           1
        zap_micro_max_size                                        131072
        zap_shrink_enabled                                             1
        zfetch_hole_shift                                              2
        zfetch_max_distance                                     67108864
        zfetch_max_idistance                                   134217728
        zfetch_max_reorder                                      16777216
        zfetch_max_sec_reap                                            2
        zfetch_max_streams                                             8
        zfetch_min_distance                                      4194304
        zfetch_min_sec_reap                                            1
        zfs_abd_scatter_enabled                                        1
        zfs_abd_scatter_max_order                                      9
        zfs_abd_scatter_min_size                                    1536
        zfs_active_allocator                                     dynamic
        zfs_admin_snapshot                                             0
        zfs_allow_redacted_dataset_mount                               0
        zfs_arc_average_blocksize                                   8192
        zfs_arc_dnode_limit                                            0
        zfs_arc_dnode_limit_percent                                   10
        zfs_arc_dnode_reduce_percent                                  10
        zfs_arc_evict_batch_limit                                     10
        zfs_arc_evict_threads                                          3
        zfs_arc_eviction_pct                                         200
        zfs_arc_grow_retry                                             0
        zfs_arc_lotsfree_percent                                      10
        zfs_arc_max                                          17179869184
        zfs_arc_meta_balance                                         500
        zfs_arc_min                                           4294967296
        zfs_arc_min_prefetch_ms                                        0
        zfs_arc_min_prescient_prefetch_ms                              0
        zfs_arc_pc_percent                                             0
        zfs_arc_prune_task_threads                                     1
        zfs_arc_shrink_shift                                           0
        zfs_arc_shrinker_limit                                         0
        zfs_arc_shrinker_seeks                                         2
        zfs_arc_sys_free                                               0
        zfs_async_block_max_blocks                  18446744073709551615
        zfs_autoimport_disable                                         1
        zfs_bclone_enabled                                             1
        zfs_bclone_wait_dirty                                          1
        zfs_blake3_impl   cycle [fastest] generic sse2 sse41 avx2 avx512
        zfs_btree_verify_intensity                                     0
        zfs_checksum_events_per_second                                20
        zfs_commit_timeout_pct                                        10
        zfs_compressed_arc_enabled                                     1
        zfs_condense_indirect_commit_entry_delay_ms                    0
        zfs_condense_indirect_obsolete_pct                            25
        zfs_condense_indirect_vdevs_enable                             1
        zfs_condense_max_obsolete_bytes                       1073741824
        zfs_condense_min_mapping_bytes                            131072
        zfs_dbgmsg_enable                                              1
        zfs_dbgmsg_maxsize                                       4194304
        zfs_dbuf_state_index                                           0
        zfs_ddt_data_is_special                                        1
        zfs_deadman_checktime_ms                                   60000
        zfs_deadman_enabled                                            1
        zfs_deadman_events_per_second                                  1
        zfs_deadman_failmode                                        wait
        zfs_deadman_synctime_ms                                   600000
        zfs_deadman_ziotime_ms                                    300000
        zfs_dedup_log_cap                                     4294967295
        zfs_dedup_log_flush_entries_max                       4294967295
        zfs_dedup_log_flush_entries_min                              200
        zfs_dedup_log_flush_flow_rate_txgs                            10
        zfs_dedup_log_flush_min_time_ms                             1000
        zfs_dedup_log_flush_txgs                                     100
        zfs_dedup_log_hard_cap                                         0
        zfs_dedup_log_mem_max                                  333484892
        zfs_dedup_log_mem_max_percent                                  1
        zfs_dedup_log_txg_max                                          8
        zfs_dedup_prefetch                                             0
        zfs_default_bs                                                 9
        zfs_default_ibs                                               17
        zfs_delay_min_dirty_percent                                   60
        zfs_delay_scale                                           500000
        zfs_delete_blocks                                          20480
        zfs_dio_enabled                                                1
        zfs_dio_write_verify_events_per_second                        20
        zfs_dirty_data_max                                    3334848921
        zfs_dirty_data_max_max                                4294967296
        zfs_dirty_data_max_max_percent                                25
        zfs_dirty_data_max_percent                                    10
        zfs_dirty_data_sync_percent                                   20
        zfs_disable_ivset_guid_check                                   0
        zfs_dmu_offset_next_sync                                       1
        zfs_embedded_slog_min_ms                                      64
        zfs_expire_snapshot                                          300
        zfs_fallocate_reserve_percent                                110
        zfs_flags                                                      0
        zfs_fletcher_4_impl [fastest] scalar superscalar superscalar4 sse2 ssse3 avx2 avx512f avx512bw
        zfs_free_bpobj_enabled                                         1
        zfs_free_leak_on_eio                                           0
        zfs_free_min_time_ms                                        1000
        zfs_history_output_max                                   1048576
        zfs_immediate_write_sz                                     32768
        zfs_initialize_chunk_size                                1048576
        zfs_initialize_value                        16045690984833335022
        zfs_keep_log_spacemaps_at_export                               0
        zfs_key_max_salt_uses                                  400000000
        zfs_livelist_condense_new_alloc                                0
        zfs_livelist_condense_sync_cancel                              0
        zfs_livelist_condense_sync_pause                               0
        zfs_livelist_condense_zthr_cancel                              0
        zfs_livelist_condense_zthr_pause                               0
        zfs_livelist_max_entries                                  500000
        zfs_livelist_min_percent_shared                               75
        zfs_lua_max_instrlimit                                 100000000
        zfs_lua_max_memlimit                                   104857600
        zfs_max_async_dedup_frees                                 100000
        zfs_max_dataset_nesting                                       50
        zfs_max_log_walking                                            5
        zfs_max_logsm_summary_length                                  10
        zfs_max_missing_tvds                                           0
        zfs_max_nvlist_src_size                                        0
        zfs_max_recordsize                                      16777216
        zfs_metaslab_find_max_tries                                  100
        zfs_metaslab_fragmentation_threshold                          77
        zfs_metaslab_max_size_cache_sec                             3600
        zfs_metaslab_mem_limit                                        25
        zfs_metaslab_segment_weight_enabled                            1
        zfs_metaslab_switch_threshold                                  2
        zfs_metaslab_try_hard_before_gang                              0
        zfs_mg_fragmentation_threshold                                95
        zfs_mg_noalloc_threshold                                       0
        zfs_min_metaslabs_to_flush                                     1
        zfs_multihost_fail_intervals                                  10
        zfs_multihost_history                                          0
        zfs_multihost_import_intervals                                20
        zfs_multihost_interval                                      1000
        zfs_multilist_num_sublists                                     0
        zfs_no_scrub_io                                                0
        zfs_no_scrub_prefetch                                          0
        zfs_nocacheflush                                               0
        zfs_nopwrite_enabled                                           1
        zfs_object_mutex_size                                         64
        zfs_obsolete_min_time_ms                                     500
        zfs_override_estimate_recordsize                               0
        zfs_pd_bytes_max                                        52428800
        zfs_per_txg_dirty_frees_percent                               30
        zfs_prefetch_disable                                           0
        zfs_read_history                                               0
        zfs_read_history_hits                                          0
        zfs_rebuild_max_segment                                  1048576
        zfs_rebuild_scrub_enabled                                      1
        zfs_rebuild_vdev_limit                                  67108864
        zfs_reconstruct_indirect_combinations_max                   4096
        zfs_recover                                                    0
        zfs_recv_best_effort_corrective                                0
        zfs_recv_queue_ff                                             20
        zfs_recv_queue_length                                   16777216
        zfs_recv_write_batch_size                                1048576
        zfs_removal_ignore_errors                                      0
        zfs_removal_suspend_progress                                   0
        zfs_remove_max_segment                                  16777216
        zfs_resilver_defer_percent                                    10
        zfs_resilver_disable_defer                                     0
        zfs_resilver_min_time_ms                                    3000
        zfs_scan_blkstats                                              0
        zfs_scan_checkpoint_intval                                  7200
        zfs_scan_fill_weight                                           3
        zfs_scan_ignore_errors                                         0
        zfs_scan_issue_strategy                                        0
        zfs_scan_legacy                                                0
        zfs_scan_max_ext_gap                                     2097152
        zfs_scan_mem_lim_fact                                         20
        zfs_scan_mem_lim_soft_fact                                    20
        zfs_scan_report_txgs                                           0
        zfs_scan_strict_mem_lim                                        0
        zfs_scan_suspend_progress                                      0
        zfs_scan_vdev_limit                                     16777216
        zfs_scrub_after_expand                                         1
        zfs_scrub_error_blocks_per_txg                              4096
        zfs_scrub_min_time_ms                                       1000
        zfs_send_corrupt_data                                          0
        zfs_send_no_prefetch_queue_ff                                 20
        zfs_send_no_prefetch_queue_length                        1048576
        zfs_send_queue_ff                                             20
        zfs_send_queue_length                                   16777216
        zfs_send_unmodified_spill_blocks                               1
        zfs_sha256_impl cycle [fastest] generic x64 ssse3 avx avx2 shani
        zfs_sha512_impl             cycle [fastest] generic x64 avx avx2
        zfs_slow_io_events_per_second                                 20
        zfs_snapshot_history_enabled                                   1
        zfs_snapshot_no_setuid                                         0
        zfs_spa_discard_memory_limit                            16777216
        zfs_special_class_metadata_reserve_pct                        25
        zfs_sync_pass_deferred_free                                    2
        zfs_sync_pass_dont_compress                                    8
        zfs_sync_pass_rewrite                                          2
        zfs_traverse_indirect_prefetch_limit                          32
        zfs_trim_extent_bytes_max                              134217728
        zfs_trim_extent_bytes_min                                  32768
        zfs_trim_metaslab_skip                                         0
        zfs_trim_queue_limit                                          10
        zfs_trim_txg_batch                                            32
        zfs_txg_history                                              100
        zfs_txg_timeout                                                5
        zfs_unflushed_log_block_max                               131072
        zfs_unflushed_log_block_min                                 1000
        zfs_unflushed_log_block_pct                                  400
        zfs_unflushed_log_txg_max                                   1000
        zfs_unflushed_max_mem_amt                             1073741824
        zfs_unflushed_max_mem_ppm                                   1000
        zfs_unlink_suspend_progress                                    0
        zfs_user_indirect_is_special                                   1
        zfs_vdev_aggregation_limit                               1048576
        zfs_vdev_aggregation_limit_non_rotating                   131072
        zfs_vdev_async_read_max_active                                 3
        zfs_vdev_async_read_min_active                                 1
        zfs_vdev_async_write_active_max_dirty_percent                 60
        zfs_vdev_async_write_active_min_dirty_percent                 30
        zfs_vdev_async_write_max_active                               10
        zfs_vdev_async_write_min_active                                2
        zfs_vdev_def_queue_depth                                      32
        zfs_vdev_default_ms_count                                    200
        zfs_vdev_default_ms_shift                                     29
        zfs_vdev_direct_write_verify                                   1
        zfs_vdev_disk_classic                                          0
        zfs_vdev_disk_max_segs                                         0
        zfs_vdev_failfast_mask                                         1
        zfs_vdev_initializing_max_active                               1
        zfs_vdev_initializing_min_active                               1
        zfs_vdev_max_active                                         1000
        zfs_vdev_max_auto_ashift                                      14
        zfs_vdev_max_ms_shift                                         34
        zfs_vdev_min_auto_ashift                                       9
        zfs_vdev_min_ms_count                                         16
        zfs_vdev_mirror_non_rotating_inc                               0
        zfs_vdev_mirror_non_rotating_seek_inc                          1
        zfs_vdev_mirror_rotating_inc                                   0
        zfs_vdev_mirror_rotating_seek_inc                              5
        zfs_vdev_mirror_rotating_seek_offset                     1048576
        zfs_vdev_ms_count_limit                                   131072
        zfs_vdev_nia_credit                                            5
        zfs_vdev_nia_delay                                             5
        zfs_vdev_open_timeout_ms                                    1000
        zfs_vdev_queue_depth_pct                                    1000
        zfs_vdev_raidz_impl cycle [fastest] original scalar sse2 ssse3 avx2 avx512f avx512bw
        zfs_vdev_read_gap_limit                                    32768
        zfs_vdev_rebuild_max_active                                    3
        zfs_vdev_rebuild_min_active                                    1
        zfs_vdev_removal_max_active                                    2
        zfs_vdev_removal_min_active                                    1
        zfs_vdev_scheduler                                        unused
        zfs_vdev_scrub_max_active                                      3
        zfs_vdev_scrub_min_active                                      1
        zfs_vdev_sync_read_max_active                                 10
        zfs_vdev_sync_read_min_active                                 10
        zfs_vdev_sync_write_max_active                                10
        zfs_vdev_sync_write_min_active                                10
        zfs_vdev_trim_max_active                                       2
        zfs_vdev_trim_min_active                                       1
        zfs_vdev_write_gap_limit                                    4096
        zfs_vnops_read_chunk_size                               33554432
        zfs_wrlog_data_max                                    6669697842
        zfs_xattr_compat                                               0
        zfs_zevent_len_max                                           512
        zfs_zevent_retain_expire_secs                                900
        zfs_zevent_retain_max                                       2000
        zfs_zil_clean_taskq_maxalloc                             1048576
        zfs_zil_clean_taskq_minalloc                                1024
        zfs_zil_clean_taskq_nthr_pct                                 100
        zfs_zil_saxattr                                                1
        zil_maxblocksize                                          131072
        zil_maxcopied                                               7680
        zil_nocacheflush                                               0
        zil_replay_disable                                             0
        zil_slog_bulk                                           67108864
        zio_deadman_log_all                                            0
        zio_dva_throttle_enabled                                       1
        zio_requeue_io_start_cut_in_line                               1
        zio_slow_io_ms                                             30000
        zio_taskq_batch_pct                                           80
        zio_taskq_batch_tpq                                            0
        zio_taskq_read                         fixed,1,8 null scale null
        zio_taskq_write                             sync null scale null
        zio_taskq_write_tpq                                           16
        zstd_abort_size                                           131072
        zstd_earlyabort_pass                                           1
        zvol_blk_mq_blocks_per_thread                                  8
        zvol_blk_mq_queue_depth                                      128
        zvol_enforce_quotas                                            1
        zvol_inhibit_dev                                               0
        zvol_major                                                   230
        zvol_max_discard_blocks                                    16384
        zvol_num_taskqs                                                0
        zvol_open_timeout_ms                                        1000
        zvol_prefetch_bytes                                       131072
        zvol_request_sync                                              0
        zvol_threads                                                   0
        zvol_use_blk_mq                                                0
        zvol_volmode                                                   1

ZIL committed transactions:                                        26.6k
        Commit requests:                                            1.8k
        Flushes to stable storage:                                  1.8k
        Transactions to SLOG storage pool:            0 Bytes          0
        Transactions to non-SLOG storage pool:       55.6 MiB       1.9k

mkandes@hardtack:~$
```

```
mkandes@hardtack:~$ cat /sys/module/zfs/parameters/zfs_arc_max
17179869184
mkandes@hardtack:~$ cat /sys/module/zfs/parameters/zfs_arc_min
4294967296
mkandes@hardtack:~$
```

```
mkandes@hardtack:~$ arcstat
    time  read  ddread  ddh%  dmread  dmh%  pread  ph%   size      c  avail
10:31:01     0       0     0       0     0      0    0   2.0G   4.0G    23G
mkandes@hardtack:~$
```

### Enable snapshots

```
mkandes@hardtack:~$ zfs list -t snapshot
no datasets available
mkandes@hardtack:~$
```


# Reference(s):
- https://github.com/openzfs/zfs/issues/17052
- https://blog.thalheim.io/2025/10/17/zfs-ate-my-ram-understanding-the-arc-cache
- https://www.linuxatemyram.com
- https://ubuntu.com/tutorials/using-zfs-snapshots-clones
- https://discourse.practicalzfs.com/t/backup-and-restore-root-pool-rpool/1574
- https://jonsimpson.ca/zfs-snapshots-in-action
- https://gist.github.com/thikade/ada751ec80b52a17872ad960d85508c9
- https://last9.io/blog/an-in-depth-guide-on-ubuntu-zfs-guide/
