# Final steps to deploy new production Spack deployments
- Remove synth benchmarks from dev stack
- Create and test build cache deployment?
- Fix hash problem?

## Fix hash problem? 

Let's try and fix the hash problem from moving back to using a `/` instead of a `-` as the delimited between the package version number and the spack hash. We'll do so with a new test `dev` deployment named `vde`. 

```
[mkandes@login02 ~]$ sudo -u spack_cpu ssh login02
PIN+Yubi: 
Welcome to Bright release         9.0

                                                         Based on Rocky Linux 8
                                                                    ID: #000002

--------------------------------------------------------------------------------

                                 WELCOME TO
                  _______  __ ____  ___    _   _______ ______
                 / ____/ |/ // __ \/   |  / | / / ___// ____/
                / __/  |   // /_/ / /| | /  |/ /\__ \/ __/
               / /___ /   |/ ____/ ___ |/ /|  /___/ / /___
              /_____//_/|_/_/   /_/  |_/_/ |_//____/_____/

--------------------------------------------------------------------------------

Use the following commands to adjust your environment:

'module avail'            - show available modules
'module add <module>'     - adds a module to your environment for this session
'module initadd <module>' - configure module to be loaded at every login

-------------------------------------------------------------------------------
Last login: Fri Dec 19 10:07:33 2025 from 198.202.100.14
[spack_cpu@login02 ~]$
```

```
[spack_cpu@login02 ~]$ !8334
srun --partition=ind-shared --reservation=root_73  --account=use300 --nodes=1 --nodelist=exp-15-56 --ntasks-per-node=1 --cpus-per-task=16 --mem=32G --time=12:00:00 --pty --wait=0 /bin/bash
[spack_cpu@exp-15-56 ~]$
```

```
[spack_cpu@exp-15-56 ~]$ cd /cm/shared/apps/spack/
[spack_cpu@exp-15-56 spack]$ ls
0.15.4  0.17.3  0.21.2  cpu  gpu
[spack_cpu@exp-15-56 spack]$ ls -lahtr
total 0
drwxr-xr-x  4 root root   2 Sep 28  2020 gpu
drwxr-xr-x  4 root root   2 Sep 28  2020 cpu
drwxr-xr-x  2 root root   2 Oct 18  2022 0.15.4
drwxr-xr-x 44 root root  43 May  3  2024 ..
drwxrwsr-x  4 root spack  2 Apr 23  2025 0.17.3
drwxrwsr-x  4 root spack  2 May 13  2025 0.21.2
drwxrwsr-x  7 root spack  5 Dec 19 06:25 .
[spack_cpu@exp-15-56 spack]$
```

```
[spack_cpu@exp-15-56 spack]$ cd 0.21.2/
[spack_cpu@exp-15-56 0.21.2]$ ls
cpu  gpu
[spack_cpu@exp-15-56 0.21.2]$ cd cpu/
[spack_cpu@exp-15-56 cpu]$ ls
dev
[spack_cpu@exp-15-56 cpu]$ ls -lahtr
total 0
drwxr-sr-x  3 spack_cpu spack  1 May  7  2025 .
drwxrwsr-x  4 root      spack  2 May 13  2025 ..
drwxr-sr-x 10 spack_cpu spack 27 Dec 19 10:08 dev
[spack_cpu@exp-15-56 cpu]$
```

Write access to `/cm/shared/apps/spack` lost again - likely due to node reboot.

```
[spack_cpu@exp-15-56 spack]$ cd 0.21.2/cpu/dev/
[spack_cpu@exp-15-56 dev]$ ls
bin           COPYRIGHT  LICENSE-APACHE  opt             README.md    test
CHANGELOG.md  etc        LICENSE-MIT     pyproject.toml  SECURITY.md  var
CITATION.cff  lib        NOTICE          pytest.ini      share
[spack_cpu@exp-15-56 dev]$ touch test
touch: setting times of 'test': Permission denied
[spack_cpu@exp-15-56 dev]$ pwd
/cm/shared/apps/spack/0.21.2/cpu/dev
[spack_cpu@exp-15-56 dev]$
```

# Move to testing out of HOME dir again?
