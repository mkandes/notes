# How to install and run MLCFlow (on Expanse) [Part II]

```
[mkandes@exp-15-58 ~]$ mlc show cache
[2025-06-29 15:07:09,509 cache_action.py:101 INFO] - Showing cache with tags: None
[mkandes@exp-15-58 ~]$
```

```
[mkandes@exp-15-58 ~]$ mlc help cache

    ####################################################################################################################
    Cache Action
    ####################################################################################################################
    Currently, the following actions are supported for Cache:
    1. find/search
    2. show
    3. list
    4. remove(rm)

    
        Access function to simulate CLI actions in Python.

        Args:
        options (dict): Dictionary containing action and relevant parameters.
        
        Adds a new item to the repository.

        Args:
            i (dict): Input dictionary with the following keys:
                - item_repo (tuple): Repository alias and UID (default: local repo).
                - item (str): Item alias and optional UID in "alias,uid" format.
                - tags (str): Comma-separated tags.
                - new_tags (str): Additional comma-separated tags to add.
                - yaml (bool): Whether to save metadata in YAML format. Defaults to JSON.

        Returns:
            dict: Result of the operation with 'return' code and error/message if applicable.
        
    ####################################################################################################################
    Target: Cache
    Action: Find (Alias: Search)
    ####################################################################################################################

    The `find` (or `search`) action retrieves the path of cache generated by a particular script. 

    Syntax:

    mlc find cache --tags=<list_of_tag_used_to_run_the_particular_script> 

    Example Command:

    mlc find cache --tags=get,dataset,igbh

        
    ####################################################################################################################
    Target: Cache
    Action: List
    ####################################################################################################################

    Lists all cached items along with their paths.

    Example Command:

    mlc list cache

        
    ####################################################################################################################
    Target: Cache
    Action: Remove(rm)
    ####################################################################################################################

    The `rm` action removes one or more caches generated while running scripts through MLCFlow.

    Syntax:

    mlc rm cache --tags=<list_of_tag_used_to_run_the_particular_script> 

    Options:
        1. `-f`: Force removes caches without confirmation. Without `-f`, the user will be prompted for confirmation before deletion.

    To remove all generated caches, use:
        
    mlc rm cache

    Example Command:

    mlc rm cache --tags=get,dataset,igbh

        
    ####################################################################################################################
    Target: Cache
    Action: Find (Alias: Search)
    ####################################################################################################################

    The `find` (or `search`) action retrieves the path of cache generated by a particular script. 

    Syntax:

    mlc find cache --tags=<list_of_tag_used_to_run_the_particular_script> 

    Example Command:

    mlc find cache --tags=get,dataset,igbh

        
    ####################################################################################################################
    Target: Cache
    Action: Show
    ####################################################################################################################

    Retrieves the path and metadata of caches generated while running scripts through MLCFlow.
        
    Syntax:
        
    mlc show cache --tags=<list_of_tags_used_while_running_script>

    Example Command:

    mlc show cache --tags=get,dataset,igbh

    Note:
    - The `find` action is a subset of `show`. It retrieves only the path of the searched cache.

        
        Update the tags of found items based on the input.

        Args:
            i (dict): Input dictionary with:
                - tags (str): Comma-separated tags to search for.
                - search_tags (str): Tags to add/update in the found items' meta.

        Returns:
            dict: Return code and message.
        
[mkandes@exp-15-58 ~]$
```

```
[mkandes@exp-15-58 ~]$  mlc list cache
[2025-06-29 15:09:37,497 cache_action.py:154 INFO] - Listing all the caches and their paths
......................................................
[mkandes@exp-15-58 ~]$
```

```
[mkandes@exp-15-58 ~]$ mlcr help
[2025-06-29 15:10:19,467 module.py:576 INFO] - * mlcr help
Traceback (most recent call last):
  File "/scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/bin/mlcr", line 8, in <module>
    sys.exit(mlcr())
  File "/scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages/mlc/main.py", line 86, in mlcr
    main()
  File "/scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages/mlc/main.py", line 273, in main
    res = method(run_args)
  File "/scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages/mlc/script_action.py", line 309, in run
    return self.call_script_module_function("run", run_args)
  File "/scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages/mlc/script_action.py", line 244, in call_script_module_function
    raise ScriptExecutionError(f"Script {function_name} execution failed. Error : {error}")
mlc.script_action.ScriptExecutionError: Script run execution failed. Error : no scripts were found with tags: help (when variations ignored)
[mkandes@exp-15-58 ~]$
```

```
[mkandes@exp-15-58 ~]$ cat /scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/bin/mlcr
#!/scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/bin/python
# -*- coding: utf-8 -*-
import re
import sys
from mlc.main import mlcr
if __name__ == '__main__':
    sys.argv[0] = re.sub(r'(-script\.pyw|\.exe)?$', '', sys.argv[0])
    sys.exit(mlcr())
[mkandes@exp-15-58 ~]$ 
```

- https://github.com/mlcommons/mlperf-automations/blob/9a1f0fab584a3736d5964e0b0b78f3a6699f3c9f/.github/workflows/test-mlc-script-features.yml#L148
- https://github.com/mlcommons/mlperf-automations/blob/9a1f0fab584a3736d5964e0b0b78f3a6699f3c9f/docs/getting-started.md?plain=1#L33

```
[mkandes@exp-15-58 ~]$ mlcr detect,os -j
[2025-06-29 15:33:49,588 module.py:576 INFO] - * mlcr detect,os
[2025-06-29 15:33:49,624 module.py:5128 INFO] -        ! cd /home/mkandes
[2025-06-29 15:33:49,624 module.py:5129 INFO] -        ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/run.sh from tmp-run.sh
[2025-06-29 15:33:58,435 module.py:5274 INFO] -        ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/customize.py
[2025-06-29 15:33:58,583 module.py:2197 INFO] - {
  "return": 0,
  "env": {
    "MLC_HOST_OS_TYPE": "linux",
    "MLC_HOST_OS_BITS": "64",
    "MLC_HOST_OS_FLAVOR": "rocky",
    "MLC_HOST_OS_FLAVOR_LIKE": "rhel centos fedora",
    "MLC_HOST_OS_VERSION": "8.9",
    "MLC_HOST_OS_KERNEL_VERSION": "4.18.0-513.24.1.el8_9.x86_64",
    "MLC_HOST_OS_GLIBC_VERSION": "2.28",
    "MLC_HOST_OS_MACHINE": "x86_64",
    "MLC_HOST_OS_PACKAGE_MANAGER": "dnf",
    "MLC_HOST_OS_PACKAGE_MANAGER_INSTALL_CMD": "dnf install -y",
    "MLC_HOST_OS_PACKAGE_MANAGER_UPDATE_CMD": "dnf update -y",
    "+MLC_HOST_OS_DEFAULT_LIBRARY_PATH": [
      "/usr/x86_64-redhat-linux/lib64",
      "/usr/lib64",
      "/usr/local/lib64",
      "/lib64",
      "/usr/x86_64-redhat-linux/lib",
      "/usr/local/lib",
      "/lib",
      "/usr/lib"
    ],
    "MLC_HOST_PLATFORM_FLAVOR": "x86_64",
    "MLC_HOST_PYTHON_BITS": "64",
    "MLC_HOST_SYSTEM_NAME": "exp-15-58"
  },
  "new_env": {
    "MLC_HOST_OS_TYPE": "linux",
    "MLC_HOST_OS_BITS": "64",
    "MLC_HOST_OS_FLAVOR": "rocky",
    "MLC_HOST_OS_FLAVOR_LIKE": "rhel centos fedora",
    "MLC_HOST_OS_VERSION": "8.9",
    "MLC_HOST_OS_KERNEL_VERSION": "4.18.0-513.24.1.el8_9.x86_64",
    "MLC_HOST_OS_GLIBC_VERSION": "2.28",
    "MLC_HOST_OS_MACHINE": "x86_64",
    "MLC_HOST_OS_PACKAGE_MANAGER": "dnf",
    "MLC_HOST_OS_PACKAGE_MANAGER_INSTALL_CMD": "dnf install -y",
    "MLC_HOST_OS_PACKAGE_MANAGER_UPDATE_CMD": "dnf update -y",
    "+MLC_HOST_OS_DEFAULT_LIBRARY_PATH": [
      "/usr/x86_64-redhat-linux/lib64",
      "/usr/lib64",
      "/usr/local/lib64",
      "/lib64",
      "/usr/x86_64-redhat-linux/lib",
      "/usr/local/lib",
      "/lib",
      "/usr/lib"
    ],
    "MLC_HOST_PLATFORM_FLAVOR": "x86_64",
    "MLC_HOST_PYTHON_BITS": "64",
    "MLC_HOST_SYSTEM_NAME": "exp-15-58"
  },
  "state": {
    "os_uname_machine": "x86_64",
    "os_uname_all": "Linux exp-15-58 4.18.0-513.24.1.el8_9.x86_64 #1 SMP Thu Apr 4 18:13:02 UTC 2024 x86_64 x86_64 x86_64 GNU/Linux"
  },
  "new_state": {
    "os_uname_machine": "x86_64",
    "os_uname_all": "Linux exp-15-58 4.18.0-513.24.1.el8_9.x86_64 #1 SMP Thu Apr 4 18:13:02 UTC 2024 x86_64 x86_64 x86_64 GNU/Linux"
  },
  "deps": []
}
[mkandes@exp-15-58 ~]$
```

```
mkandes@exp-15-58 ~]$ mlc help script

    ####################################################################################################################
    Script Action
    ####################################################################################################################

    The following actions are currently supported for scripts:
    1.  Add
    2.  Find
    3.  Show
    4.  Move(mv)
    5.  Remove(rm)
    6.  Copy(cp)
    7.  Run
    8.  Docker
    9.  Test
    10. Experiment

    Scripts in MLCFlow can be identified using different methods:

    Using tags: --tags=<comma-separated-tags> (e.g., --tags=detect,os)
    Using alias: <script_alias> (e.g., detect-os)
    Using UID: <script_uid> (e.g., 5b4e0237da074764)
    Using both alias and UID: <script_alias>,<script_uid> (e.g., detect-os,5b4e0237da074764)

    
        Access function to simulate CLI actions in Python.

        Args:
        options (dict): Dictionary containing action and relevant parameters.
        
    ####################################################################################################################
    Target: Script
    Action: Add
    ####################################################################################################################

    The `add` action creates a new script in a registered MLC repository.  

    Syntax:

    mlc add script <user@repo>:new_script --tags=benchmark

    Options:
        --template_tags: A comma-separated list of tags to create a new MLC script based on existing templates.  

    Example Output:
          
      arjun@intel-spr-i9:~$ mlc add script gateoverflow@mlperf-automations --tags=benchmark --template_tags=app,mlperf,inference
      More than one script found for None:
      1. /home/arjun/MLC/repos/gateoverflow@mlperf-automations/script/app-mlperf-inference-mlcommons-python
      2. /home/arjun/MLC/repos/gateoverflow@mlperf-automations/script/app-mlperf-inference-ctuning-cpp-tflite
      3. /home/arjun/MLC/repos/gateoverflow@mlperf-automations/script/app-mlperf-inference
      4. /home/arjun/MLC/repos/gateoverflow@mlperf-automations/script/app-mlperf-inference-mlcommons-cpp
      Select the correct one (enter number, default=1): 1
      [2025-02-14 02:58:33,453 main.py:664 INFO] - Folder successfully copied from /home/arjun/MLC/repos/
        gateoverflow@mlperf-automations/script/app-mlperf-inference-mlcommons-python to /home/arjun/MLC/repos/
        gateoverflow@mlperf-automations/script/gateoverflow@mlperf-automations

        
    ####################################################################################################################
    Target: Script
    Action: doc
    ####################################################################################################################

    The `doc` action creates automatic README for scripts from the contents in `meta.yaml`.  

    Example Command:

    mlc doc script --tags=detect,os

        
    ####################################################################################################################
    Target: Script
    Action: Docker
    ####################################################################################################################

    The `docker` action runs scripts inside a containerized environment.  

    An MLCFlow script can be executed inside a Docker container using either of the following syntaxes:

    1. Docker Run: mlc docker run --tags=<script tags> <run flags> (e.g., mlc docker run --tags=detect,os --docker_dt 
                       --docker_cache=no)
    2. Docker Script: mlc docker script --tags=<script tags> <run flags> (e.g., mlc docker script --tags=detect,os 
                          --docker_dt --docker_cache=no)

    Flags Available:

    1. --docker_dt or --docker_detached:
        Runs the specified script inside a Docker container in detached mode (e.g., `mlc docker run --tags=detect,os --docker_dt).
        By default, the Docker container is launched in interactive mode.
    2. --docker_cache:
        Disabling this flag forces Docker to build all layers from scratch, ignoring cached layers. (e.g., mlc docker run --tags=detect,os --docker_cache=no)
        By default, the value is set to true/yes.
    3. --docker_rebuild:
        Enables rebuilding the Docker container even if an existing container with the same tag is present. (e.g., mlc docker run --tags=detect,os --docker_rebuild)
        By default, the value is set to False.
    4. --dockerfile_recreate:
        Forces recreation of the **Dockerfile** during execution. (e.g., mlc docker run --tags=detect,os --docker_rebuild --dockerfile_recreate)
        By default, the value is set to False.

    Example Command:

    mlc docker script --tags=detect,os -j

        
    ####################################################################################################################
    Target: Script
    Action: Experiment
    ####################################################################################################################

    The `experiment` action currently does the function same as of run script, proper workflow will be added in future.
    experiment-specific functionality.

    Example Command:

    mlc experiment script --tags=detect,os -j

        
    ####################################################################################################################
    Target: Script
    Action: Find (Alias: Search)
    ####################################################################################################################

    The `find` (or `search`) action retrieves the path of scripts available in MLC repositories.

    Example Command:

    mlc find script --tags=detect,os -f

        
    ####################################################################################################################
    Target: Script
    Action: List
    ####################################################################################################################

    The `list` action displays all scripts and their paths from repositories registered in MLC.  

    Example Command:

    mlc list script

        
    ####################################################################################################################
    Target: Script
    Action: Remove(rm)
    ####################################################################################################################

    The `remove` (`rm`) action deletes one or more scripts from MLC repositories.  

    Example Command:

    mlc rm script --tags=detect,os -f

        
    ####################################################################################################################
    Target: Script
    Action: Run
    ####################################################################################################################

    The `run` action executes a script from an MLC repository.  

    Example Command:

    mlc run script --tags=detect,os -j

    Options:

    1. -j: Displays the output in JSON format.
    2. Instead of using `mlc run script --tags=`, you can simply use `mlcr`.
    3. *<Individual script inputs>: The `mlcr` command can accept additional inputs defined in the script's `input_mappings` metadata.  

        
    ####################################################################################################################
    Target: Script
    Action: Find (Alias: Search)
    ####################################################################################################################

    The `find` (or `search`) action retrieves the path of scripts available in MLC repositories.

    Example Command:

    mlc find script --tags=detect,os -f

        
    ####################################################################################################################
    Target: Script
    Action: Show
    ####################################################################################################################

    The `show` action retrieves the path and metadata of the searched script in MLC repositories.  

    Example Command:

    mlc show script --tags=detect,os

    Example Output:
          
      arjun@intel-spr-i9:~$ mlc show script --tags=detect,os
      [2025-02-14 02:56:16,604 main.py:1404 INFO] - Showing script with tags: detect,os
      Location: /home/arjun/MLC/repos/gateoverflow@mlperf-automations/script/detect-os:
      Main Script Meta:
        uid: 863735b7db8c44fc
        alias: detect-os
        tags: ['detect-os', 'detect', 'os', 'info']
        new_env_keys: ['MLC_HOST_OS_*', '+MLC_HOST_OS_*', 'MLC_HOST_PLATFORM_*', 'MLC_HOST_PYTHON_*', 'MLC_HOST_SYSTEM_NAME', 
                       'MLC_RUN_STATE_DOCKER', '+PATH']
        new_state_keys: ['os_uname_*']
      ......................................................
      For full script meta, see meta file at /home/arjun/MLC/repos/gateoverflow@mlperf-automations/script/detect-os/meta.yaml

    Note:
    - The `find` action is a subset of `show`, retrieving only the path of the searched script in MLC repositories.

        
    ####################################################################################################################
    Target: Script
    Action: test
    ####################################################################################################################

    The `test` action validates scripts that are configured with a `tests` section in `meta.yaml`.  

    Example Command:

    mlc test script --tags=benchmark

        
        Update the tags of found items based on the input.

        Args:
            i (dict): Input dictionary with:
                - tags (str): Comma-separated tags to search for.
                - search_tags (str): Tags to add/update in the found items' meta.

        Returns:
            dict: Return code and message.
        
[mkandes@exp-15-58 ~]$
```

```
ILSVRC2012_val_00004220.JPEG
ILSVRC2012_val_00003883.JPEG
ILSVRC2012_val_00003515.JPEG
ILSVRC2012_val_00002155.JPEG
ILSVRC2012_val_00000854.JPEG


[2025-06-29 16:58:33,491 module.py:5274 INFO] -                ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/extract-file/customize.py
[2025-06-29 16:58:33,537 module.py:5274 INFO] -              ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-dataset-imagenet-val/customize.py
[2025-06-29 16:58:33,767 module.py:2166 INFO] -         - cache UID: 2aed75727a274cff
[2025-06-29 16:58:33,800 module.py:576 INFO] -       * mlcr get,dataset-aux,image-classification,imagenet-aux
[2025-06-29 16:58:33,802 module.py:1285 INFO] -            ! load /home/mkandes/MLC/repos/local/cache/get-dataset-imagenet-aux_0d2b6b53/mlc-cached-state.json
[2025-06-29 16:58:33,884 module.py:576 INFO] -       * mlcr get,generic-python-lib,_package.opencv-python-headless
[2025-06-29 16:58:34,103 module.py:576 INFO] -         * mlcr detect,os
[2025-06-29 16:58:34,118 module.py:5128 INFO] -                ! cd /home/mkandes/MLC/repos/local/cache/get-generic-python-lib_8d93e973
[2025-06-29 16:58:34,118 module.py:5129 INFO] -                ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/run.sh from tmp-run.sh
[2025-06-29 16:58:34,276 module.py:5274 INFO] -                ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/customize.py
[2025-06-29 16:58:34,332 module.py:576 INFO] -         * mlcr detect,cpu
[2025-06-29 16:58:34,379 module.py:576 INFO] -           * mlcr detect,os
[2025-06-29 16:58:34,431 module.py:5128 INFO] -                  ! cd /home/mkandes/MLC/repos/local/cache/get-generic-python-lib_8d93e973
[2025-06-29 16:58:34,431 module.py:5129 INFO] -                  ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/run.sh from tmp-run.sh
[2025-06-29 16:58:34,538 module.py:5274 INFO] -                  ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/customize.py
[2025-06-29 16:58:34,592 module.py:5128 INFO] -                ! cd /home/mkandes/MLC/repos/local/cache/get-generic-python-lib_8d93e973
[2025-06-29 16:58:34,592 module.py:5129 INFO] -                ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-cpu/run.sh from tmp-run.sh
[2025-06-29 16:58:34,854 module.py:5274 INFO] -                ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-cpu/customize.py
[2025-06-29 16:58:35,009 module.py:576 INFO] -         * mlcr get,python3
[2025-06-29 16:58:35,011 module.py:1285 INFO] -              ! load /home/mkandes/MLC/repos/local/cache/get-python3_abfb7b11/mlc-cached-state.json
[2025-06-29 16:58:35,011 module.py:2241 INFO] - Path to Python: /scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/bin/python3
[2025-06-29 16:58:35,011 module.py:2241 INFO] - Python version: 3.9.23
[2025-06-29 16:58:35,102 module.py:576 INFO] -         * mlcr get,generic-python-lib,_pip
[2025-06-29 16:58:35,137 module.py:576 INFO] -           * mlcr get,python3
[2025-06-29 16:58:35,137 module.py:1285 INFO] -                ! load /home/mkandes/MLC/repos/local/cache/get-python3_abfb7b11/mlc-cached-state.json
[2025-06-29 16:58:35,138 module.py:2241 INFO] - Path to Python: /scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/bin/python3
[2025-06-29 16:58:35,138 module.py:2241 INFO] - Python version: 3.9.23
[2025-06-29 16:58:35,138 module.py:5128 INFO] -                ! cd /home/mkandes/MLC/repos/local/cache/get-generic-python-lib_8d93e973
[2025-06-29 16:58:35,138 module.py:5129 INFO] -                ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-generic-python-lib/validate_cache.sh from tmp-run.sh
[2025-06-29 16:58:35,221 module.py:5274 INFO] -                ! call "detect_version" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-generic-python-lib/customize.py
[2025-06-29 16:58:35,225 customize.py:152 INFO] -               Detected version: 25.1.1
[2025-06-29 16:58:35,264 module.py:576 INFO] -           * mlcr get,python3
[2025-06-29 16:58:35,265 module.py:1285 INFO] -                ! load /home/mkandes/MLC/repos/local/cache/get-python3_abfb7b11/mlc-cached-state.json
[2025-06-29 16:58:35,266 module.py:2241 INFO] - Path to Python: /scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/bin/python3
[2025-06-29 16:58:35,266 module.py:2241 INFO] - Python version: 3.9.23
[2025-06-29 16:58:35,266 module.py:1285 INFO] -              ! load /home/mkandes/MLC/repos/local/cache/get-generic-python-lib_9a9a1763/mlc-cached-state.json
[2025-06-29 16:58:35,321 module.py:5128 INFO] -                  ! cd /home/mkandes/MLC/repos/local/cache/get-generic-python-lib_8d93e973
[2025-06-29 16:58:35,321 module.py:5129 INFO] -                  ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-generic-python-lib/run.sh from tmp-run.sh
[2025-06-29 16:58:35,434 module.py:5274 INFO] -                  ! call "detect_version" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-generic-python-lib/customize.py
[2025-06-29 16:58:35,439 customize.py:117 INFO] -             Extra PIP CMD:   --break-system-packages 
[2025-06-29 16:58:35,448 module.py:5128 INFO] -              ! cd /home/mkandes/MLC/repos/local/cache/get-generic-python-lib_8d93e973
[2025-06-29 16:58:35,448 module.py:5129 INFO] -              ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-generic-python-lib/install.sh from tmp-run.sh

/scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/bin/python3 -m pip install "opencv-python-headless" --break-system-packages
Collecting opencv-python-headless
  Downloading opencv_python_headless-4.11.0.86-cp37-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (20 kB)
Collecting numpy>=1.17.0 (from opencv-python-headless)
  Downloading numpy-2.0.2-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (60 kB)
Downloading opencv_python_headless-4.11.0.86-cp37-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (50.0 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 50.0/50.0 MB 101.1 MB/s eta 0:00:00
Downloading numpy-2.0.2-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (19.5 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 19.5/19.5 MB 76.1 MB/s eta 0:00:00
Installing collected packages: numpy, opencv-python-headless
Successfully installed numpy-2.0.2 opencv-python-headless-4.11.0.86
[2025-06-29 16:58:40,565 module.py:5128 INFO] -              ! cd /home/mkandes/MLC/repos/local/cache/get-generic-python-lib_8d93e973
[2025-06-29 16:58:40,565 module.py:5129 INFO] -              ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-generic-python-lib/run.sh from tmp-run.sh
[2025-06-29 16:58:40,724 module.py:5274 INFO] -              ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-generic-python-lib/customize.py
[2025-06-29 16:58:40,729 customize.py:152 INFO] -             Detected version: 4.11.0.86
[2025-06-29 16:58:40,898 module.py:2166 INFO] -         - cache UID: 8d93e97337734c64
[2025-06-29 16:58:41,017 module.py:576 INFO] -       * mlcr get,generic-python-lib,_pillow
[2025-06-29 16:58:41,234 module.py:576 INFO] -         * mlcr detect,os
[2025-06-29 16:58:41,257 module.py:5128 INFO] -                ! cd /home/mkandes/MLC/repos/local/cache/get-generic-python-lib_06d38343
[2025-06-29 16:58:41,257 module.py:5129 INFO] -                ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/run.sh from tmp-run.sh
[2025-06-29 16:58:41,391 module.py:5274 INFO] -                ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/customize.py
[2025-06-29 16:58:41,503 module.py:576 INFO] -         * mlcr detect,cpu
[2025-06-29 16:58:41,543 module.py:576 INFO] -           * mlcr detect,os
[2025-06-29 16:58:41,561 module.py:5128 INFO] -                  ! cd /home/mkandes/MLC/repos/local/cache/get-generic-python-lib_06d38343
[2025-06-29 16:58:41,561 module.py:5129 INFO] -                  ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/run.sh from tmp-run.sh
[2025-06-29 16:58:41,737 module.py:5274 INFO] -                  ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/customize.py
[2025-06-29 16:58:41,878 module.py:5128 INFO] -                ! cd /home/mkandes/MLC/repos/local/cache/get-generic-python-lib_06d38343
[2025-06-29 16:58:41,878 module.py:5129 INFO] -                ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-cpu/run.sh from tmp-run.sh
[2025-06-29 16:58:42,281 module.py:5274 INFO] -                ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-cpu/customize.py
[2025-06-29 16:58:42,402 module.py:576 INFO] -         * mlcr get,python3
[2025-06-29 16:58:42,403 module.py:1285 INFO] -              ! load /home/mkandes/MLC/repos/local/cache/get-python3_abfb7b11/mlc-cached-state.json
[2025-06-29 16:58:42,404 module.py:2241 INFO] - Path to Python: /scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/bin/python3
[2025-06-29 16:58:42,404 module.py:2241 INFO] - Python version: 3.9.23
[2025-06-29 16:58:42,490 module.py:576 INFO] -         * mlcr get,generic-python-lib,_pip
[2025-06-29 16:58:42,587 module.py:576 INFO] -           * mlcr get,python3
[2025-06-29 16:58:42,588 module.py:1285 INFO] -                ! load /home/mkandes/MLC/repos/local/cache/get-python3_abfb7b11/mlc-cached-state.json
[2025-06-29 16:58:42,588 module.py:2241 INFO] - Path to Python: /scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/bin/python3
[2025-06-29 16:58:42,588 module.py:2241 INFO] - Python version: 3.9.23
[2025-06-29 16:58:42,589 module.py:5128 INFO] -                ! cd /home/mkandes/MLC/repos/local/cache/get-generic-python-lib_06d38343
[2025-06-29 16:58:42,589 module.py:5129 INFO] -                ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-generic-python-lib/validate_cache.sh from tmp-run.sh
[2025-06-29 16:58:42,733 module.py:5274 INFO] -                ! call "detect_version" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-generic-python-lib/customize.py
[2025-06-29 16:58:42,738 customize.py:152 INFO] -               Detected version: 25.1.1
[2025-06-29 16:58:42,814 module.py:576 INFO] -           * mlcr get,python3
[2025-06-29 16:58:42,815 module.py:1285 INFO] -                ! load /home/mkandes/MLC/repos/local/cache/get-python3_abfb7b11/mlc-cached-state.json
[2025-06-29 16:58:42,815 module.py:2241 INFO] - Path to Python: /scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/bin/python3
[2025-06-29 16:58:42,815 module.py:2241 INFO] - Python version: 3.9.23
[2025-06-29 16:58:42,816 module.py:1285 INFO] -              ! load /home/mkandes/MLC/repos/local/cache/get-generic-python-lib_9a9a1763/mlc-cached-state.json
[2025-06-29 16:58:42,870 module.py:5128 INFO] -                  ! cd /home/mkandes/MLC/repos/local/cache/get-generic-python-lib_06d38343
[2025-06-29 16:58:42,870 module.py:5129 INFO] -                  ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-generic-python-lib/run.sh from tmp-run.sh
[2025-06-29 16:58:42,988 module.py:5274 INFO] -                  ! call "detect_version" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-generic-python-lib/customize.py
[2025-06-29 16:58:42,993 customize.py:117 INFO] -             Extra PIP CMD:   --break-system-packages 
[2025-06-29 16:58:43,010 module.py:5128 INFO] -              ! cd /home/mkandes/MLC/repos/local/cache/get-generic-python-lib_06d38343
[2025-06-29 16:58:43,010 module.py:5129 INFO] -              ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-generic-python-lib/install.sh from tmp-run.sh

/scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/bin/python3 -m pip install "Pillow" --break-system-packages
Collecting Pillow
  Downloading pillow-11.2.1-cp39-cp39-manylinux_2_28_x86_64.whl.metadata (8.9 kB)
Downloading pillow-11.2.1-cp39-cp39-manylinux_2_28_x86_64.whl (4.6 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 4.6/4.6 MB 33.2 MB/s eta 0:00:00
Installing collected packages: Pillow
Successfully installed Pillow-11.2.1
[2025-06-29 16:58:44,921 module.py:5128 INFO] -              ! cd /home/mkandes/MLC/repos/local/cache/get-generic-python-lib_06d38343
[2025-06-29 16:58:44,921 module.py:5129 INFO] -              ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-generic-python-lib/run.sh from tmp-run.sh
[2025-06-29 16:58:45,031 module.py:5274 INFO] -              ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-generic-python-lib/customize.py
[2025-06-29 16:58:45,036 customize.py:152 INFO] -             Detected version: 11.2.1
[2025-06-29 16:58:45,170 module.py:2166 INFO] -         - cache UID: 06d38343eba94720
[2025-06-29 16:58:45,218 module.py:576 INFO] -       * mlcr mlperf,mlcommons,inference,source,src
[2025-06-29 16:58:45,220 module.py:1285 INFO] -            ! load /home/mkandes/MLC/repos/local/cache/get-mlperf-inference-src_1466b17d/mlc-cached-state.json
[2025-06-29 16:58:45,308 module.py:576 INFO] -       * mlcr get,generic-sys-util,_libgl
[2025-06-29 16:58:45,554 module.py:576 INFO] -         * mlcr detect,os
[2025-06-29 16:58:45,572 module.py:5128 INFO] -                ! cd /home/mkandes/MLC/repos/local/cache/get-generic-sys-util_6a02f65f
[2025-06-29 16:58:45,572 module.py:5129 INFO] -                ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/run.sh from tmp-run.sh
[2025-06-29 16:58:45,802 module.py:5274 INFO] -                ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/customize.py
[2025-06-29 16:58:45,974 module.py:576 INFO] -         * mlcr get,generic-sys-util,_install,_libgl
[2025-06-29 16:58:46,257 module.py:576 INFO] -           * mlcr detect,os
[2025-06-29 16:58:46,280 module.py:5128 INFO] -                  ! cd /home/mkandes/MLC/repos/local/cache/get-generic-sys-util_dd38a68b
[2025-06-29 16:58:46,280 module.py:5129 INFO] -                  ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/run.sh from tmp-run.sh
[2025-06-29 16:58:46,373 module.py:5274 INFO] -                  ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/customize.py
[2025-06-29 16:58:46,447 module.py:5128 INFO] -                ! cd /home/mkandes/MLC/repos/local/cache/get-generic-sys-util_dd38a68b
[2025-06-29 16:58:46,447 module.py:5129 INFO] -                ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-generic-sys-util/install.sh from tmp-run.sh
ldconfig -p | grep -i libgl.so.* || sudo dnf install -y mesa-libGL
        libGL.so.1 (libc6,x86-64) => /cm/local/apps/cuda/libs/current/lib64/libGL.so.1
        libGL.so.1 (libc6,x86-64) => /lib64/libGL.so.1
        libGL.so (libc6,x86-64) => /cm/local/apps/cuda/libs/current/lib64/libGL.so
        libGL.so (libc6,x86-64) => /lib64/libGL.so
[2025-06-29 16:58:46,482 module.py:5274 INFO] -                ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-generic-sys-util/customize.py
[2025-06-29 16:58:46,680 module.py:2166 INFO] -           - cache UID: dd38a68bd9a14563
[2025-06-29 16:58:46,699 module.py:5274 INFO] -              ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-generic-sys-util/customize.py
[2025-06-29 16:58:46,955 module.py:2166 INFO] -         - cache UID: 6a02f65f6aae4319
Using MLCommons Inference source from '/home/mkandes/MLC/repos/local/cache/get-git-repo_inference-src_8e301348/inference'
[2025-06-29 16:58:47,245 module.py:5128 INFO] -            ! cd /home/mkandes/MLC/repos/local/cache/get-preprocessed-dataset-imagenet_1a8cd9de
[2025-06-29 16:58:47,245 module.py:5129 INFO] -            ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-preprocessed-dataset-imagenet/run.sh from tmp-run.sh
INFO:imagenet:Preprocessing 50000 images using 40 threads
INFO:imagenet:loaded 50000 images, cache=True, already_preprocessed=False, took=2158.1sec
[2025-06-29 17:34:45,648 module.py:5274 INFO] -            ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-preprocessed-dataset-imagenet/customize.py
[2025-06-29 17:34:46,361 module.py:2166 INFO] -       - cache UID: 1a8cd9de7b454ad9
[2025-06-29 17:34:46,420 module.py:576 INFO] -     * mlcr get,ml-model,raw,resnet50,_onnx
[2025-06-29 17:34:46,720 module.py:576 INFO] -       * mlcr download-and-extract,_url.https://armi.in/files/resnet50_v1_op11/resnet50_v1.onnx
[2025-06-29 17:34:47,014 module.py:576 INFO] -         * mlcr download,file,_cmutil,_url.https://armi.in/files/resnet50_v1_op11/resnet50_v1.onnx
[2025-06-29 17:34:47,246 module.py:576 INFO] -           * mlcr detect,os
[2025-06-29 17:34:47,261 module.py:5128 INFO] -                  ! cd /home/mkandes/MLC/repos/local/cache/download-file_ml-model-resnet_86766d11
[2025-06-29 17:34:47,261 module.py:5129 INFO] -                  ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/run.sh from tmp-run.sh
[2025-06-29 17:34:47,381 module.py:5274 INFO] -                  ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/customize.py
[2025-06-29 17:34:47,426 customize.py:78 INFO] - 
[2025-06-29 17:34:47,427 customize.py:79 INFO] - Downloading from https://armi.in/files/resnet50_v1_op11/resnet50_v1.onnx
Downloading to /home/mkandes/MLC/repos/local/cache/download-file_ml-model-resnet_86766d11/resnet50_v1.onnx

Downloaded: 100%
[2025-06-29 17:34:54,319 module.py:5128 INFO] -                ! cd /home/mkandes/MLC/repos/local/cache/download-file_ml-model-resnet_86766d11
[2025-06-29 17:34:54,319 module.py:5129 INFO] -                ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/download-file/run.sh from tmp-run.sh

Checking checksum: echo f6a4da60cd5f084d97efc2c1ddb10beb 'resnet50_v1.onnx' | md5sum  -c -
resnet50_v1.onnx: OK

Verifying checksum after download: echo f6a4da60cd5f084d97efc2c1ddb10beb 'resnet50_v1.onnx' | md5sum  -c -
resnet50_v1.onnx: OK
[2025-06-29 17:34:54,687 module.py:5274 INFO] -                ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/download-file/customize.py
[2025-06-29 17:34:54,850 module.py:2166 INFO] -           - cache UID: 86766d11bcb74c02
[2025-06-29 17:34:54,860 module.py:5274 INFO] -              ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/download-and-extract/customize.py
[2025-06-29 17:34:55,019 module.py:2166 INFO] -         - cache UID: 87653ae2125740af
[2025-06-29 17:34:55,056 module.py:5274 INFO] -            ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-ml-model-resnet50/customize.py
[2025-06-29 17:34:55,329 module.py:2166 INFO] -       - cache UID: 19553deb3b644a5a
[2025-06-29 17:34:55,330 module.py:2241 INFO] - Path to the ML model: /home/mkandes/MLC/repos/local/cache/download-file_ml-model-resnet_86766d11/resnet50_v1.onnx
[2025-06-29 17:34:55,456 module.py:576 INFO] -     * mlcr generate,user-conf,mlperf,inference,_wg-inference
[2025-06-29 17:34:55,563 module.py:576 INFO] -       * mlcr detect,os
[2025-06-29 17:34:55,578 module.py:5128 INFO] -              ! cd /home/mkandes/MLC/repos/local/cache/get-sys-utils-cm_9cfd60f1
[2025-06-29 17:34:55,578 module.py:5129 INFO] -              ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/run.sh from tmp-run.sh
[2025-06-29 17:34:55,980 module.py:5274 INFO] -              ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/customize.py
[2025-06-29 17:34:56,205 module.py:576 INFO] -       * mlcr detect,cpu
[2025-06-29 17:34:56,283 module.py:576 INFO] -         * mlcr detect,os
[2025-06-29 17:34:56,314 module.py:5128 INFO] -                ! cd /home/mkandes/MLC/repos/local/cache/get-sys-utils-cm_9cfd60f1
[2025-06-29 17:34:56,314 module.py:5129 INFO] -                ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/run.sh from tmp-run.sh
[2025-06-29 17:34:56,511 module.py:5274 INFO] -                ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/customize.py
[2025-06-29 17:34:56,561 module.py:5128 INFO] -              ! cd /home/mkandes/MLC/repos/local/cache/get-sys-utils-cm_9cfd60f1
[2025-06-29 17:34:56,561 module.py:5129 INFO] -              ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-cpu/run.sh from tmp-run.sh
[2025-06-29 17:34:56,806 module.py:5274 INFO] -              ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-cpu/customize.py
[2025-06-29 17:34:56,910 module.py:576 INFO] -       * mlcr get,python
[2025-06-29 17:34:56,912 module.py:1285 INFO] -            ! load /home/mkandes/MLC/repos/local/cache/get-python3_abfb7b11/mlc-cached-state.json
[2025-06-29 17:34:56,912 module.py:2241 INFO] - Path to Python: /scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/bin/python3
[2025-06-29 17:34:56,912 module.py:2241 INFO] - Python version: 3.9.23
[2025-06-29 17:34:56,949 module.py:576 INFO] -       * mlcr get,sut,configs
[2025-06-29 17:34:57,030 module.py:576 INFO] -         * mlcr get,cache,dir,_name.mlperf-inference-sut-configs
[2025-06-29 17:34:57,251 module.py:5274 INFO] -                ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-cache-dir/customize.py
[2025-06-29 17:34:57,418 module.py:2166 INFO] -           - cache UID: 18912b5d3f1d4d19
[2025-06-29 17:34:57,450 module.py:5274 INFO] -              ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-mlperf-inference-sut-configs/customize.py
Config file missing for given hw_name: 'exp_15_58', implementation: 'cpp', device: 'cpu,  backend: 'onnxruntime', copying from default
[2025-06-29 17:34:57,684 module.py:576 INFO] -       * mlcr get,mlcommons,inference,src
[2025-06-29 17:34:57,686 module.py:1285 INFO] -            ! load /home/mkandes/MLC/repos/local/cache/get-mlperf-inference-src_1466b17d/mlc-cached-state.json
Using MLCommons Inference source from '/home/mkandes/MLC/repos/local/cache/get-git-repo_inference-src_8e301348/inference'
Original configuration value 1.0 target_qps
Adjusted configuration value 1.01 target_qps
[2025-06-29 17:34:57,703 customize.py:429 INFO] - Output Dir: '/home/mkandes/MLC/repos/local/cache/get-mlperf-inference-results-dir_bd2ab658/test_results/exp_15_58-cpp-cpu-onnxruntime-vdefault-default_config/resnet50/offline/performance/run_1'
[2025-06-29 17:34:57,703 customize.py:430 INFO] - resnet50.Offline.target_qps = 1.0
resnet50.Offline.max_query_count = 1000
resnet50.Offline.min_query_count = 1000
resnet50.Offline.min_duration = 0
resnet50.Offline.sample_concatenate_permutation = 0

[2025-06-29 17:34:57,778 module.py:5274 INFO] -          ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/app-mlperf-inference-mlcommons-cpp/customize.py
[2025-06-29 17:34:57,816 module.py:576 INFO] -   * mlcr compile,cpp-program
[2025-06-29 17:34:57,896 module.py:576 INFO] -     * mlcr detect,cpu
[2025-06-29 17:34:57,936 module.py:576 INFO] -       * mlcr detect,os
[2025-06-29 17:34:57,954 module.py:5128 INFO] -              ! cd /home/mkandes/MLC/repos/local/cache/get-sys-utils-cm_9cfd60f1
[2025-06-29 17:34:57,954 module.py:5129 INFO] -              ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/run.sh from tmp-run.sh
[2025-06-29 17:34:58,169 module.py:5274 INFO] -              ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/customize.py
[2025-06-29 17:34:58,234 module.py:5128 INFO] -            ! cd /home/mkandes/MLC/repos/local/cache/get-sys-utils-cm_9cfd60f1
[2025-06-29 17:34:58,234 module.py:5129 INFO] -            ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-cpu/run.sh from tmp-run.sh
[2025-06-29 17:34:58,457 module.py:5274 INFO] -            ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-cpu/customize.py
[2025-06-29 17:34:58,548 module.py:576 INFO] -     * mlcr get,compiler
[2025-06-29 17:34:58,550 module.py:1285 INFO] -          ! load /home/mkandes/MLC/repos/local/cache/get-llvm_2987f0c2/mlc-cached-state.json
[2025-06-29 17:34:58,579 module.py:576 INFO] -     * mlcr get,compiler-flags
[2025-06-29 17:34:58,616 module.py:576 INFO] -       * mlcr detect,cpu
[2025-06-29 17:34:58,650 module.py:576 INFO] -         * mlcr detect,os
[2025-06-29 17:34:58,672 module.py:5128 INFO] -                ! cd /home/mkandes/MLC/repos/local/cache/get-sys-utils-cm_9cfd60f1
[2025-06-29 17:34:58,672 module.py:5129 INFO] -                ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/run.sh from tmp-run.sh
[2025-06-29 17:34:58,799 module.py:5274 INFO] -                ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/customize.py
[2025-06-29 17:34:58,897 module.py:5128 INFO] -              ! cd /home/mkandes/MLC/repos/local/cache/get-sys-utils-cm_9cfd60f1
[2025-06-29 17:34:58,897 module.py:5129 INFO] -              ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-cpu/run.sh from tmp-run.sh
[2025-06-29 17:34:59,064 module.py:5274 INFO] -              ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-cpu/customize.py
[2025-06-29 17:34:59,171 module.py:5128 INFO] -          ! cd /home/mkandes/MLC/repos/local/cache/get-sys-utils-cm_9cfd60f1
[2025-06-29 17:34:59,171 module.py:5129 INFO] -          ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/compile-program/run.sh from tmp-run.sh
RUN_DIR=/home/mkandes/MLC/repos/local/cache/get-sys-utils-cm_9cfd60f1

Checking compiler version ...

clang version 15.0.6
Target: x86_64-unknown-linux-gnu
Thread model: posix
InstalledDir: /home/mkandes/MLC/repos/local/cache/install-llvm-prebuilt_85445f9f/bin

Compiling source files ...

main.cpp

/home/mkandes/MLC/repos/local/cache/install-llvm-prebuilt_85445f9f/bin/clang++ -c -std=c++14 -DMLC_MODEL_RESNET50 -DMLC_MLPERF_BACKEND_ONNXRUNTIME -DMLC_MLPERF_DEVICE_CPU -O2 -O4 -I'/home/mkandes/MLC/repos/local/cache/get-mlperf-inference-loadgen_7999c0f3/install/include' -I'/home/mkandes/MLC/repos/local/cache/get-onnxruntime-prebuilt_df6d836f/install/onnxruntime-linux-x64-1.20.1/include' -I'/home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/app-mlperf-inference-mlcommons-cpp/inc' main.cpp -o main.o
clang-15: warning: -O4 is equivalent to -O3 [-Wdeprecated]

Linking ...

/home/mkandes/MLC/repos/local/cache/install-llvm-prebuilt_85445f9f/bin/clang++ -std=c++14 -DMLC_MODEL_RESNET50 -DMLC_MLPERF_BACKEND_ONNXRUNTIME -DMLC_MLPERF_DEVICE_CPU -O2 -O4 main.o -o "/home/mkandes/MLC/repos/local/cache/get-sys-utils-cm_9cfd60f1/run.out" -L'/home/mkandes/MLC/repos/local/cache/get-mlperf-inference-loadgen_7999c0f3/install/lib' -L'/home/mkandes/MLC/repos/local/cache/get-onnxruntime-prebuilt_df6d836f/install/onnxruntime-linux-x64-1.20.1/lib' -lmlperf_loadgen -lpthread -lonnxruntime -O2 -O4
/usr/bin/ld: /home/mkandes/MLC/repos/local/cache/get-mlperf-inference-loadgen_7999c0f3/install/lib/libmlperf_loadgen.a(loadgen.cc.o): relocation R_X86_64_32S against `.rodata' can not be used when making a PIE object; recompile with -fPIC
/usr/bin/ld: /home/mkandes/MLC/repos/local/cache/get-mlperf-inference-loadgen_7999c0f3/install/lib/libmlperf_loadgen.a(logging.cc.o): relocation R_X86_64_32S against `.rodata' can not be used when making a PIE object; recompile with -fPIC
/usr/bin/ld: /home/mkandes/MLC/repos/local/cache/get-mlperf-inference-loadgen_7999c0f3/install/lib/libmlperf_loadgen.a(test_settings_internal.cc.o): relocation R_X86_64_32S against `.rodata' can not be used when making a PIE object; recompile with -fPIC
/usr/bin/ld: /home/mkandes/MLC/repos/local/cache/get-mlperf-inference-loadgen_7999c0f3/install/lib/libmlperf_loadgen.a(utils.cc.o): relocation R_X86_64_32S against `.rodata' can not be used when making a PIE object; recompile with -fPIC
/usr/bin/ld: /home/mkandes/MLC/repos/local/cache/get-mlperf-inference-loadgen_7999c0f3/install/lib/libmlperf_loadgen.a(results.cc.o): relocation R_X86_64_32 against symbol `__pthread_key_create@@GLIBC_2.2.5' can not be used when making a PIE object; recompile with -fPIC
/usr/bin/ld: /home/mkandes/MLC/repos/local/cache/get-mlperf-inference-loadgen_7999c0f3/install/lib/libmlperf_loadgen.a(version.cc.o): relocation R_X86_64_32S against `.rodata' can not be used when making a PIE object; recompile with -fPIC
/usr/bin/ld: /home/mkandes/MLC/repos/local/cache/get-mlperf-inference-loadgen_7999c0f3/install/lib/libmlperf_loadgen.a(version_generated.cc.o): relocation R_X86_64_32 against `.bss' can not be used when making a PIE object; recompile with -fPIC
/usr/bin/ld: /home/mkandes/MLC/repos/local/cache/get-mlperf-inference-loadgen_7999c0f3/install/lib/libmlperf_loadgen.a(early_stopping.cc.o): relocation R_X86_64_32 against `.bss' can not be used when making a PIE object; recompile with -fPIC
/usr/bin/ld: /home/mkandes/MLC/repos/local/cache/get-mlperf-inference-loadgen_7999c0f3/install/lib/libmlperf_loadgen.a(issue_query_controller.cc.o): relocation R_X86_64_32S against `.rodata' can not be used when making a PIE object; recompile with -fPIC
/usr/bin/ld: final link failed: Nonrepresentable section on output
clang-15: error: linker command failed with exit code 1 (use -v to see invocation)
Traceback (most recent call last):
  File "/scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/bin/mlcr", line 8, in <module>
    sys.exit(mlcr())
  File "/scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages/mlc/main.py", line 86, in mlcr
    main()
  File "/scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages/mlc/main.py", line 273, in main
    res = method(run_args)
  File "/scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages/mlc/script_action.py", line 309, in run
    return self.call_script_module_function("run", run_args)
  File "/scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages/mlc/script_action.py", line 230, in call_script_module_function
    result = automation_instance.run(run_args)  # Pass args to the run method
  File "/home/mkandes/MLC/repos/mlcommons@mlperf-automations/automation/script/module.py", line 227, in run
    r = self._run(i)
  File "/home/mkandes/MLC/repos/mlcommons@mlperf-automations/automation/script/module.py", line 1784, in _run
    r = customize_code.preprocess(ii)
  File "/home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/run-mlperf-inference-app/customize.py", line 285, in preprocess
    r = mlc.access(ii)
  File "/scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages/mlc/action.py", line 56, in access
    result = method(options)
  File "/scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages/mlc/script_action.py", line 309, in run
    return self.call_script_module_function("run", run_args)
  File "/scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages/mlc/script_action.py", line 230, in call_script_module_function
    result = automation_instance.run(run_args)  # Pass args to the run method
  File "/home/mkandes/MLC/repos/mlcommons@mlperf-automations/automation/script/module.py", line 227, in run
    r = self._run(i)
  File "/home/mkandes/MLC/repos/mlcommons@mlperf-automations/automation/script/module.py", line 1858, in _run
    r = self._call_run_deps(prehook_deps, self.local_env_keys, local_env_keys_from_meta, env, state, const, const_state, add_deps_recursive,
  File "/home/mkandes/MLC/repos/mlcommons@mlperf-automations/automation/script/module.py", line 3322, in _call_run_deps
    r = script._run_deps(deps, local_env_keys, env, state, const, const_state, add_deps_recursive, recursion_spaces,
  File "/home/mkandes/MLC/repos/mlcommons@mlperf-automations/automation/script/module.py", line 3495, in _run_deps
    r = self.action_object.access(ii)
  File "/scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages/mlc/action.py", line 56, in access
    result = method(options)
  File "/scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages/mlc/script_action.py", line 309, in run
    return self.call_script_module_function("run", run_args)
  File "/scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages/mlc/script_action.py", line 230, in call_script_module_function
    result = automation_instance.run(run_args)  # Pass args to the run method
  File "/home/mkandes/MLC/repos/mlcommons@mlperf-automations/automation/script/module.py", line 227, in run
    r = self._run(i)
  File "/home/mkandes/MLC/repos/mlcommons@mlperf-automations/automation/script/module.py", line 1902, in _run
    r = self._run_deps(post_deps, clean_env_keys_post_deps, env, state, const, const_state, add_deps_recursive, recursion_spaces,
  File "/home/mkandes/MLC/repos/mlcommons@mlperf-automations/automation/script/module.py", line 3495, in _run_deps
    r = self.action_object.access(ii)
  File "/scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages/mlc/action.py", line 56, in access
    result = method(options)
  File "/scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages/mlc/script_action.py", line 309, in run
    return self.call_script_module_function("run", run_args)
  File "/scratch/mkandes/job_40744653/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages/mlc/script_action.py", line 244, in call_script_module_function
    raise ScriptExecutionError(f"Script {function_name} execution failed. Error : {error}")
mlc.script_action.ScriptExecutionError: Script run execution failed. Error : MLC script failed (name = compile-program, return code = 256)


^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Please file an issue at https://github.com/mlcommons/mlperf-automations/issues along with the full MLC command being run and the relevant
or full console log.

[mkandes@exp-15-58 ~]$
```

