# Upgrade of hardtack to ubuntu 24.04.2 LTS complete

```
mkandes@hardtack:~$ cat /etc/os-release 
PRETTY_NAME="Ubuntu 24.04.2 LTS"
NAME="Ubuntu"
VERSION_ID="24.04"
VERSION="24.04.2 LTS (Noble Numbat)"
VERSION_CODENAME=noble
ID=ubuntu
ID_LIKE=debian
HOME_URL="https://www.ubuntu.com/"
SUPPORT_URL="https://help.ubuntu.com/"
BUG_REPORT_URL="https://bugs.launchpad.net/ubuntu/"
PRIVACY_POLICY_URL="https://www.ubuntu.com/legal/terms-and-policies/privacy-policy"
UBUNTU_CODENAME=noble
LOGO=ubuntu-logo
```

Ended up not being able to use Dell-specific factory reset application option. The boot screen would hang with a single underscored cursor. I found a few observations of the same issue from other users online. However, there was not a clear, definitive solution to the problem as some reported different methods to resolution. I ended up simply creating usb image to boot and install 24.04.2 LTS from an iso using the Startup Disk Creator app. The complete disk was wiped and installed with an ecrypted ZFS filesystem.

```
mkandes@hardtack:~$ df -Th /
Filesystem               Type  Size  Used Avail Use% Mounted on
rpool/ROOT/ubuntu_ybsehk zfs   1.8T  4.4G  1.8T   1% /
mkandes@hardtack:~$ 
```

Now working on getting the system back into usable form. The first task was to run the Software Updater app and then reboot the system. This also helped resolve some initial input problems. e.g., bluetooth was not enabled on first boot and required a restart. 

On the second boot the Chrome broswer was installed and configured, which also included importing my bookmark backup file. Next, I installed Slack and logged back in to a few different workspaces. How do you leave these workspaces? Probably should drop a few.

Next, Zoom ...

Will wait to run Dropbox overnight later today ...

Next, setting up SSH ... copied backup of `~/.ssh` to `$HOME` directory.

```
mkandes@hardtack:~$ ls -lahtr ~/.ssh
total 33K
-rw-r--r--  1 mkandes mkandes  742 Jun 12 08:11 id_rsa.pub
-rw-r--r--  1 mkandes mkandes 3.4K Jun 12 08:11 id_rsa
drwxr-x--- 22 mkandes mkandes   28 Jun 12 09:32 ..
-rw-r--r--  1 mkandes mkandes  925 Jun 12 09:32 config
drwxr-xr-x  2 mkandes mkandes    5 Jun 12 09:32 .
mkandes@hardtack:~$
```

Need to adjust permissions. 

```
mkandes@hardtack:~$ chmod 700 ~/.ssh
mkandes@hardtack:~$ chmod 600 ~/.ssh/id_rsa
mkandes@hardtack:~$ chmod 644 ~/.ssh/id_rsa.pub 
mkandes@hardtack:~$ ls -lahtr ~/.ssh
total 33K
-rw-r--r--  1 mkandes mkandes  742 Jun 12 08:11 id_rsa.pub
-rw-------  1 mkandes mkandes 3.4K Jun 12 08:11 id_rsa
drwxr-x--- 22 mkandes mkandes   28 Jun 12 09:32 ..
-rw-r--r--  1 mkandes mkandes  925 Jun 12 09:32 config
drwx------  2 mkandes mkandes    5 Jun 12 09:32 .
mkandes@hardtack:~$
```

```
mkandes@hardtack:~$ ssh expanse
The authenticity of host 'login.expanse.sdsc.edu (198.202.100.14)' can't be established.
ED25519 key fingerprint is SHA256:L2aPmUWNAwHOBbYNYX/E0P/hPIoyJzq9Wt6g/PFDjJ8.
This key is not known by any other names.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added 'login.expanse.sdsc.edu' (ED25519) to the list of known hosts.
sign_and_send_pubkey: signing failed for RSA "/home/mkandes/.ssh/id_rsa" from agent: agent refused operation
(mkandes@login.expanse.sdsc.edu) Password: 

mkandes@hardtack:~$ ssh expanse
(mkandes@login.expanse.sdsc.edu) TOTP code for mkandes: 100112
Welcome to Bright release         9.0

                                                         Based on Rocky Linux 8
                                                                    ID: #000002

--------------------------------------------------------------------------------

                                 WELCOME TO
                  _______  __ ____  ___    _   _______ ______
                 / ____/ |/ // __ \/   |  / | / / ___// ____/
                / __/  |   // /_/ / /| | /  |/ /\__ \/ __/
               / /___ /   |/ ____/ ___ |/ /|  /___/ / /___
              /_____//_/|_/_/   /_/  |_/_/ |_//____/_____/

--------------------------------------------------------------------------------

Use the following commands to adjust your environment:

'module avail'            - show available modules
'module add <module>'     - adds a module to your environment for this session
'module initadd <module>' - configure module to be loaded at every login

-------------------------------------------------------------------------------
Last login: Wed Jun 11 09:50:58 2025 from 208.58.212.11
[mkandes@login02 ~]$
```

Next, timetrap ...

```
mkandes@hardtack:~$ gem --help
Command 'gem' not found, but can be installed with:
sudo apt install ruby-rubygems
mkandes@hardtack:~$ sudo apt-get install ruby-rubygems 
[sudo] password for mkandes: 
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  fonts-lato javascript-common libjs-jquery libruby libruby3.2 rake ruby
  ruby-net-telnet ruby-sdbm ruby-webrick ruby-xmlrpc ruby3.2
  rubygems-integration
Suggested packages:
  apache2 | lighttpd | httpd ri ruby-dev bundler
The following NEW packages will be installed:
  fonts-lato javascript-common libjs-jquery libruby libruby3.2 rake ruby
  ruby-net-telnet ruby-rubygems ruby-sdbm ruby-webrick ruby-xmlrpc ruby3.2
  rubygems-integration
0 upgraded, 14 newly installed, 0 to remove and 1 not upgraded.
Need to get 8,926 kB of archives.
After this operation, 41.1 MB of additional disk space will be used.
Do you want to continue? [Y/n] y
...
Setting up ruby3.2 (3.2.3-1ubuntu0.24.04.5) ...
Setting up libruby:amd64 (1:3.2~ubuntu1) ...
Setting up ruby (1:3.2~ubuntu1) ...
Setting up rake (13.0.6-3) ...
Setting up libruby3.2:amd64 (3.2.3-1ubuntu0.24.04.5) ...
Setting up ruby-rubygems (3.4.20-1) ...
Setting up ruby-sdbm:amd64 (1.0.0-5build4) ...
Processing triggers for fontconfig (2.15.0-1.1ubuntu2) ...
Processing triggers for libc-bin (2.39-0ubuntu8.4) ...
Processing triggers for man-db (2.12.0-4build2) ...
mkandes@hardtack:~$
```

```
mkandes@hardtack:~$ sudo gem install timetrap
Fetching timetrap-1.15.5.gem
Fetching chronic-0.10.2.gem
Fetching sqlite3-1.7.3-x86_64-linux.gem
Fetching sequel-5.90.0.gem
Successfully installed sqlite3-1.7.3-x86_64-linux
Successfully installed sequel-5.90.0
Successfully installed chronic-0.10.2
Successfully installed timetrap-1.15.5
Parsing documentation for sqlite3-1.7.3-x86_64-linux
Installing ri documentation for sqlite3-1.7.3-x86_64-linux
Parsing documentation for sequel-5.90.0
Installing ri documentation for sequel-5.90.0
Parsing documentation for chronic-0.10.2
Installing ri documentation for chronic-0.10.2
Parsing documentation for timetrap-1.15.5
Installing ri documentation for timetrap-1.15.5
Done installing documentation for sqlite3, sequel, chronic, timetrap after 5 seconds
4 gems installed
mkandes@hardtack:~$
```

```
mkandes@hardtack:~$ timetrap sheet
 Timesheet  Running     Today       Total Time
*default     0:00:00     0:00:00     0:00:00
mkandes@hardtack:~$ ls -lahtr ~/.timetrap.db 
-rw-r--r-- 1 mkandes mkandes 16K Jun 12 09:44 /home/mkandes/.timetrap.db
mkandes@hardtack:~$ cp /media/mkandes/Secure_Key/.timetrap.db ./
mkandes@hardtack:~$ timetrap sheet
 Timesheet  Running     Today       Total Time
 ciml        0:00:00     0:00:00     0:48:28
 expanse     0:00:00     0:00:00     8:59:58
 hpcgpt      0:00:00     0:00:00     2:08:21
 icicle      0:00:00     0:00:00    58:54:07
-rehs        0:00:00     0:00:00     1:03:50
*sdsc       17:32:58     0:00:00    23:21:16
 voyager     0:00:00     0:00:00     1:00:29
mkandes@hardtack:~$
```

```
mkandes@hardtack:~$ timetrap display -v
Timesheet: sdsc
Id  Day                Start      End        Duration   Notes
45  Wed Jun 11, 2025   07:39:06 - 10:25:16   2:46:10    upgrade laptop from ubuntu 22.04 to 24.04
46                     11:24:45 - 12:45:43   1:20:58    upgrade laptop from ubuntu 22.04 to 24.04
47                     13:01:11 - 14:42:21   1:41:10    hpc weekly
49                     16:12:09 -           17:33:44    upgrade laptop from ubuntu 22.04 to 24.04
                                            23:22:02
    ---------------------------------------------------------------------------------------------
    Total                                   23:22:02
mkandes@hardtack:~$
```

```
mkandes@hardtack:~$ timetrap sheet
 Timesheet  Running     Today       Total Time
 ciml        0:00:00     0:00:00     0:48:28
 expanse     0:00:00     0:00:00     8:59:58
 hpcgpt      0:00:00     0:00:00     2:08:21
 icicle      0:00:00     0:00:00    58:54:07
-rehs        0:00:00     0:00:00     1:03:50
*sdsc       17:32:58     0:00:00    23:21:16
 voyager     0:00:00     0:00:00     1:00:29
mkandes@hardtack:~$ timetrap display -v
Timesheet: sdsc
Id  Day                Start      End        Duration   Notes
45  Wed Jun 11, 2025   07:39:06 - 10:25:16   2:46:10    upgrade laptop from ubuntu 22.04 to 24.04
46                     11:24:45 - 12:45:43   1:20:58    upgrade laptop from ubuntu 22.04 to 24.04
47                     13:01:11 - 14:42:21   1:41:10    hpc weekly
49                     16:12:09 -           17:33:44    upgrade laptop from ubuntu 22.04 to 24.04
                                            23:22:02
    ---------------------------------------------------------------------------------------------
    Total                                   23:22:02
mkandes@hardtack:~$ timetrap out
Checked out of entry "upgrade laptop from ubuntu 22.04 to 24.04" in sheet "sdsc".
mkandes@hardtack:~$ timetrap edit --id 49 --end "2025-06-11 20:33:44"
Editing entry with id 49

Timesheet: sdsc
    Day                Start      End        Duration   Notes
    Wed Jun 11, 2025   16:12:09 - 20:33:44   4:21:35    upgrade laptop from ubuntu 22.04 to 24.04
                                             4:21:35
    ---------------------------------------------------------------------------------------------
    Total                                    4:21:35
mkandes@hardtack:~$ timetrap in upgrade laptop from ubuntu 22.04 to 24.04
Checked into sheet "sdsc".
mkandes@hardtack:~$ timetrap display -v
Timesheet: sdsc
Id  Day                Start      End        Duration   Notes
45  Wed Jun 11, 2025   07:39:06 - 10:25:16   2:46:10    upgrade laptop from ubuntu 22.04 to 24.04
46                     11:24:45 - 12:45:43   1:20:58    upgrade laptop from ubuntu 22.04 to 24.04
47                     13:01:11 - 14:42:21   1:41:10    hpc weekly
49                     16:12:09 - 20:33:44   4:21:35    upgrade laptop from ubuntu 22.04 to 24.04
                                            10:09:53
50  Thu Jun 12, 2025   09:47:59 -            0:00:05    upgrade laptop from ubuntu 22.04 to 24.04
                                             0:00:05
    ---------------------------------------------------------------------------------------------
    Total                                   10:09:58
mkandes@hardtack:~$ timetrap edit --id 50 --start 06:35:59
Editing entry with id 50

Timesheet: sdsc
    Day                Start      End        Duration   Notes
    Thu Jun 12, 2025   06:35:59 -            3:12:27    upgrade laptop from ubuntu 22.04 to 24.04
                                             3:12:27
    ---------------------------------------------------------------------------------------------
    Total                                    3:12:27
mkandes@hardtack:~$ timetrap out
Checked out of entry "upgrade laptop from ubuntu 22.04 to 24.04" in sheet "sdsc".
mkandes@hardtack:~$ timetrap sheeet
Invalid command: "sheeet"
mkandes@hardtack:~$ timetrap sheet
 Timesheet  Running     Today       Total Time
 ciml        0:00:00     0:00:00     0:48:28
 expanse     0:00:00     0:00:00     8:59:58
 hpcgpt      0:00:00     0:00:00     2:08:21
 icicle      0:00:00     0:00:00    58:54:07
-rehs        0:00:00     0:00:00     1:03:50
*sdsc        0:00:00     3:12:30    13:22:23
 voyager     0:00:00     0:00:00     1:00:29
mkandes@hardtack:~$
```

Next, gnupg ...

```
mkandes@hardtack:~$ cp -r /media/mkandes/Secure_Key/.gnupg ./
mkandes@hardtack:~$ chown -R $(whoami) ~/.gnupg/
mkandes@hardtack:~$ find ~/.gnupg -type f -exec chmod 600 {} \;
mkandes@hardtack:~$ find ~/.gnupg -type d -exec chmod 700 {} \;
mkandes@hardtack:~$ ls -lahtr ~/.gnupg/
total 226K
drwxr-x--- 22 mkandes mkandes   29 Jun 12 09:53 ..
drwx------  2 mkandes mkandes    4 Jun 12 09:55 private-keys-v1.d
-rw-------  1 mkandes mkandes 2.1K Jun 12 09:55 trustdb.gpg
-rw-------  1 mkandes mkandes  49K Jun 12 09:55 pubring.kbx~
-rw-------  1 mkandes mkandes   20 Jun 12 09:55 .#lk0x00005b7ef7fd2280.hardtack.35451
-rw-------  1 mkandes mkandes  49K Jun 12 09:55 pubring.kbx
-rw-------  1 mkandes mkandes   20 Jun 12 09:55 .#lk0x00006241576a9280.hardtack.43294
-rw-------  1 mkandes mkandes   20 Jun 12 09:55 .#lk0x000057ed9167d280.hardtack.43343
-rw-------  1 mkandes mkandes    7 Jun 12 09:55 reader_0.status
-rw-------  1 mkandes mkandes  105 Jun 12 09:55 dirmngr.conf
-rw-------  1 mkandes mkandes  600 Jun 12 09:55 random_seed
-rw-------  1 mkandes mkandes   24 Jun 12 09:55 .#lk0x0000600001170420.castleyankee.13428
-rw-------  1 mkandes mkandes  48K Jun 12 09:55 tofu.db
-rw-------  1 mkandes mkandes   34 Jun 12 09:55 gpg.conf
-rw-------  1 mkandes mkandes   41 Jun 12 09:55 gpg-agent.conf
-rw-------  1 mkandes mkandes   20 Jun 12 09:55 .#lk0x0000564a6ca32f20.hardtack.12749
-rw-------  1 mkandes mkandes 4.0K Jun 12 09:55 ._gpg.conf
drwx------  2 mkandes mkandes    3 Jun 12 09:55 openpgp-revocs.d
-rw-------  1 mkandes mkandes   20 Jun 12 09:55 .#lk0x0000630cb54de280.hardtack.355121
-rw-------  1 mkandes mkandes   20 Jun 12 09:55 .#lk0x00005c1a56b6fa70.hardtack.354998
drwx------  2 mkandes mkandes    3 Jun 12 09:55 crls.d
drwx------  5 mkandes mkandes   22 Jun 12 09:55 .
mkandes@hardtack:~$ cd .gnupg/
mkandes@hardtack:~/.gnupg$ rm .#lk0x0000*
mkandes@hardtack:~/.gnupg$ ls -lahtr
total 191K
drwxr-x--- 22 mkandes mkandes   29 Jun 12 09:53 ..
drwx------  2 mkandes mkandes    4 Jun 12 09:55 private-keys-v1.d
-rw-------  1 mkandes mkandes 2.1K Jun 12 09:55 trustdb.gpg
-rw-------  1 mkandes mkandes  49K Jun 12 09:55 pubring.kbx~
-rw-------  1 mkandes mkandes  49K Jun 12 09:55 pubring.kbx
-rw-------  1 mkandes mkandes    7 Jun 12 09:55 reader_0.status
-rw-------  1 mkandes mkandes  105 Jun 12 09:55 dirmngr.conf
-rw-------  1 mkandes mkandes  600 Jun 12 09:55 random_seed
-rw-------  1 mkandes mkandes  48K Jun 12 09:55 tofu.db
-rw-------  1 mkandes mkandes   34 Jun 12 09:55 gpg.conf
-rw-------  1 mkandes mkandes   41 Jun 12 09:55 gpg-agent.conf
-rw-------  1 mkandes mkandes 4.0K Jun 12 09:55 ._gpg.conf
drwx------  2 mkandes mkandes    3 Jun 12 09:55 openpgp-revocs.d
drwx------  2 mkandes mkandes    3 Jun 12 09:55 crls.d
drwx------  5 mkandes mkandes   15 Jun 12 09:57 .
mkandes@hardtack:~/.gnupg$
```

```
mkandes@hardtack:~$ sudo apt install gnupg
[sudo] password for mkandes: 
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
gnupg is already the newest version (2.4.4-2ubuntu17.2).
gnupg set to manually installed.
0 upgraded, 0 newly installed, 0 to remove and 1 not upgraded.
mkandes@hardtack:~$
```

```
mkandes@hardtack:~$ gpg --list-keys
/home/mkandes/.gnupg/pubring.kbx
--------------------------------
pub   rsa4096 2021-01-14 [SC] [expires: 2029-04-13]
      BE249B3DF7D588D90A0399DA3648B690B2B157E4
uid           [ultimate] Marty Kandes <mkandes@sdsc.edu>
sub   rsa4096 2021-01-14 [E] [expires: 2029-04-13]

pub   rsa4064 2019-03-14 [SC] [expires: 2028-03-14]
      65566730F9DA512291E263089C47D4DBF549007A
uid           [  full  ] Jeff Makey <jeff@sdsc.edu>
uid           [ unknown] Jeff Makey <jeff@makey.net>
sub   rsa4064 2019-03-14 [SE] [expires: 2028-03-14]

pub   rsa4096 2016-07-18 [SC] [expires: 2026-07-16]
      6FD963EBDBFCF8BF1D5470ADF5990C9776745B02
uid           [  full  ] Scott Sakai (Supersedes 587AD228) <ssakai@sdsc.edu>
sub   rsa4096 2016-07-18 [E] [expires: 2026-07-16]

pub   rsa4096 2016-03-24 [SC] [expired: 2023-01-16]
      2CA999800D11C5946C9DBFEE52364D7BBCEB35B8
uid           [ expired] Trevor Cooper <tcooper@sdsc.edu>
uid           [ expired] Trevor Cooper <tcooper@ucsd.edu>
uid           [ expired] Trevor Cooper <tcooper@rockylinux.org>

pub   rsa4096 2015-12-18 [SC] [expired: 2024-12-18]
      5A718B2D398825674F5284EC850F759FD88AA325
uid           [ expired] Dmitry Mishin <dmishin@sdsc.edu>
uid           [ expired] Dmitry Mishin <dmishin@ucsd.edu>

pub   rsa3072 2020-03-17 [SC] [expired: 2022-03-17]
      402E2B5973ABF210C512969793F180E457993607
uid           [ expired] Haisong Cai <cai@sdsc.edu>

pub   rsa4096 2021-01-14 [SC]
      0F2F316B470129CDF01C58530F8E73A4F8AC9908
uid           [ unknown] Christopher Irving <cirving@ucsd.edu>
uid           [  full  ] Christopher Irving <cirving@sdsc.edu>
sub   rsa4096 2021-01-14 [E]

pub   rsa4096 2021-01-14 [SC]
      ABA90A2E64D9B2603C0FA99B4270BD10BF0FF37B
uid           [ unknown] Thomas Hutton <hutton@sand.net>
uid           [  full  ] Thomas Hutton (gmail) <thomas.e.hutton@gmail.com>
uid           [  full  ] Thomas Hutton <hutton@sdsc.edu>
uid           [  full  ] Thomas Hutton <hutton@ucsd.edu>
uid           [ unknown] Thomas Hutton <hutton@sdslug.org>
sub   rsa4096 2021-01-14 [E]

pub   rsa2048 2021-01-14 [SC] [expires: 2026-01-13]
      4C9D98C92A048C67E2CA5B1869340F1B2BF4E6CC
uid           [  full  ] Hocks <ehocks@ucsd.edu>
sub   rsa2048 2021-01-14 [E] [expires: 2026-01-13]

pub   rsa2048 2021-01-14 [SC] [expires: 2026-01-13]
      825DE567F912242D79310FE2F5782261C6EF74B9
uid           [  full  ] Fernando Silva <silvaf@sdsc.edu>
sub   rsa2048 2021-01-14 [E] [expires: 2026-01-13]

pub   rsa2048 2021-01-14 [SC] [expires: 2026-01-13]
      C36A12D8E896373CA823023F0703346DE79A5234
uid           [  full  ] Jerry Greenberg <jpg@sdsc.edu>
sub   rsa2048 2021-01-14 [E] [expires: 2026-01-13]

pub   rsa4096 2021-01-14 [SC] [expired: 2025-01-14]
      7DAF3E8B0925C336C91C13ED2DFDFEDEDC5B7179
uid           [ expired] Mahidhar Tatineni (csnsuperh) <mahidhar@sdsc.edu>

pub   ed25519 2018-11-30 [SC]
      248097092B458509C508DAC0350585C4E9518F26
uid           [ unknown] proton@srp.modulus
sub   cv25519 2018-11-30 [E]

mkandes@hardtack:~$
```
