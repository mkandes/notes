# Upgrade of hardtack to ubuntu 24.04.2 LTS complete

```
mkandes@hardtack:~$ cat /etc/os-release 
PRETTY_NAME="Ubuntu 24.04.2 LTS"
NAME="Ubuntu"
VERSION_ID="24.04"
VERSION="24.04.2 LTS (Noble Numbat)"
VERSION_CODENAME=noble
ID=ubuntu
ID_LIKE=debian
HOME_URL="https://www.ubuntu.com/"
SUPPORT_URL="https://help.ubuntu.com/"
BUG_REPORT_URL="https://bugs.launchpad.net/ubuntu/"
PRIVACY_POLICY_URL="https://www.ubuntu.com/legal/terms-and-policies/privacy-policy"
UBUNTU_CODENAME=noble
LOGO=ubuntu-logo
```

Ended up not being able to use Dell-specific factory reset application option. The boot screen would hang with a single underscored cursor. I found a few observations of the same issue from other users online. However, there was not a clear, definitive solution to the problem as some reported different methods to resolution. I ended up simply creating usb image to boot and install 24.04.2 LTS from an iso using the Startup Disk Creator app. The complete disk was wiped and installed with an ecrypted ZFS filesystem.

```
mkandes@hardtack:~$ df -Th /
Filesystem               Type  Size  Used Avail Use% Mounted on
rpool/ROOT/ubuntu_ybsehk zfs   1.8T  4.4G  1.8T   1% /
mkandes@hardtack:~$ 
```

Now working on getting the system back into usable form. The first task was to run the Software Updater app and then reboot the system. This also helped resolve some initial input problems. e.g., bluetooth was not enabled on first boot and required a restart. 

On the second boot the Chrome broswer was installed and configured, which also included importing my bookmark backup file. Next, I installed Slack and logged back in to a few different workspaces. How do you leave these workspaces? Probably should drop a few.

Next, Zoom ...

Will wait to run Dropbox overnight later today ...

Next, setting up SSH ... copied backup of `~/.ssh` to `$HOME` directory.

```
mkandes@hardtack:~$ ls -lahtr ~/.ssh
total 33K
-rw-r--r--  1 mkandes mkandes  742 Jun 12 08:11 id_rsa.pub
-rw-r--r--  1 mkandes mkandes 3.4K Jun 12 08:11 id_rsa
drwxr-x--- 22 mkandes mkandes   28 Jun 12 09:32 ..
-rw-r--r--  1 mkandes mkandes  925 Jun 12 09:32 config
drwxr-xr-x  2 mkandes mkandes    5 Jun 12 09:32 .
mkandes@hardtack:~$
```

Need to adjust permissions. 

```
mkandes@hardtack:~$ chmod 700 ~/.ssh
mkandes@hardtack:~$ chmod 600 ~/.ssh/id_rsa
mkandes@hardtack:~$ chmod 644 ~/.ssh/id_rsa.pub 
mkandes@hardtack:~$ ls -lahtr ~/.ssh
total 33K
-rw-r--r--  1 mkandes mkandes  742 Jun 12 08:11 id_rsa.pub
-rw-------  1 mkandes mkandes 3.4K Jun 12 08:11 id_rsa
drwxr-x--- 22 mkandes mkandes   28 Jun 12 09:32 ..
-rw-r--r--  1 mkandes mkandes  925 Jun 12 09:32 config
drwx------  2 mkandes mkandes    5 Jun 12 09:32 .
mkandes@hardtack:~$
```

```
mkandes@hardtack:~$ ssh expanse
The authenticity of host 'login.expanse.sdsc.edu (198.202.100.14)' can't be established.
ED25519 key fingerprint is SHA256:L2aPmUWNAwHOBbYNYX/E0P/hPIoyJzq9Wt6g/PFDjJ8.
This key is not known by any other names.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added 'login.expanse.sdsc.edu' (ED25519) to the list of known hosts.
sign_and_send_pubkey: signing failed for RSA "/home/mkandes/.ssh/id_rsa" from agent: agent refused operation
(mkandes@login.expanse.sdsc.edu) Password: 

mkandes@hardtack:~$ ssh expanse
(mkandes@login.expanse.sdsc.edu) TOTP code for mkandes: 100112
Welcome to Bright release         9.0

                                                         Based on Rocky Linux 8
                                                                    ID: #000002

--------------------------------------------------------------------------------

                                 WELCOME TO
                  _______  __ ____  ___    _   _______ ______
                 / ____/ |/ // __ \/   |  / | / / ___// ____/
                / __/  |   // /_/ / /| | /  |/ /\__ \/ __/
               / /___ /   |/ ____/ ___ |/ /|  /___/ / /___
              /_____//_/|_/_/   /_/  |_/_/ |_//____/_____/

--------------------------------------------------------------------------------

Use the following commands to adjust your environment:

'module avail'            - show available modules
'module add <module>'     - adds a module to your environment for this session
'module initadd <module>' - configure module to be loaded at every login

-------------------------------------------------------------------------------
Last login: Wed Jun 11 09:50:58 2025 from 208.58.212.11
[mkandes@login02 ~]$
```

Next, timetrap ...

```
mkandes@hardtack:~$ gem --help
Command 'gem' not found, but can be installed with:
sudo apt install ruby-rubygems
mkandes@hardtack:~$ sudo apt-get install ruby-rubygems 
[sudo] password for mkandes: 
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  fonts-lato javascript-common libjs-jquery libruby libruby3.2 rake ruby
  ruby-net-telnet ruby-sdbm ruby-webrick ruby-xmlrpc ruby3.2
  rubygems-integration
Suggested packages:
  apache2 | lighttpd | httpd ri ruby-dev bundler
The following NEW packages will be installed:
  fonts-lato javascript-common libjs-jquery libruby libruby3.2 rake ruby
  ruby-net-telnet ruby-rubygems ruby-sdbm ruby-webrick ruby-xmlrpc ruby3.2
  rubygems-integration
0 upgraded, 14 newly installed, 0 to remove and 1 not upgraded.
Need to get 8,926 kB of archives.
After this operation, 41.1 MB of additional disk space will be used.
Do you want to continue? [Y/n] y
...
Setting up ruby3.2 (3.2.3-1ubuntu0.24.04.5) ...
Setting up libruby:amd64 (1:3.2~ubuntu1) ...
Setting up ruby (1:3.2~ubuntu1) ...
Setting up rake (13.0.6-3) ...
Setting up libruby3.2:amd64 (3.2.3-1ubuntu0.24.04.5) ...
Setting up ruby-rubygems (3.4.20-1) ...
Setting up ruby-sdbm:amd64 (1.0.0-5build4) ...
Processing triggers for fontconfig (2.15.0-1.1ubuntu2) ...
Processing triggers for libc-bin (2.39-0ubuntu8.4) ...
Processing triggers for man-db (2.12.0-4build2) ...
mkandes@hardtack:~$
```

```
mkandes@hardtack:~$ sudo gem install timetrap
Fetching timetrap-1.15.5.gem
Fetching chronic-0.10.2.gem
Fetching sqlite3-1.7.3-x86_64-linux.gem
Fetching sequel-5.90.0.gem
Successfully installed sqlite3-1.7.3-x86_64-linux
Successfully installed sequel-5.90.0
Successfully installed chronic-0.10.2
Successfully installed timetrap-1.15.5
Parsing documentation for sqlite3-1.7.3-x86_64-linux
Installing ri documentation for sqlite3-1.7.3-x86_64-linux
Parsing documentation for sequel-5.90.0
Installing ri documentation for sequel-5.90.0
Parsing documentation for chronic-0.10.2
Installing ri documentation for chronic-0.10.2
Parsing documentation for timetrap-1.15.5
Installing ri documentation for timetrap-1.15.5
Done installing documentation for sqlite3, sequel, chronic, timetrap after 5 seconds
4 gems installed
mkandes@hardtack:~$
```

```
mkandes@hardtack:~$ timetrap sheet
 Timesheet  Running     Today       Total Time
*default     0:00:00     0:00:00     0:00:00
mkandes@hardtack:~$ ls -lahtr ~/.timetrap.db 
-rw-r--r-- 1 mkandes mkandes 16K Jun 12 09:44 /home/mkandes/.timetrap.db
mkandes@hardtack:~$ cp /media/mkandes/Secure_Key/.timetrap.db ./
mkandes@hardtack:~$ timetrap sheet
 Timesheet  Running     Today       Total Time
 ciml        0:00:00     0:00:00     0:48:28
 expanse     0:00:00     0:00:00     8:59:58
 hpcgpt      0:00:00     0:00:00     2:08:21
 icicle      0:00:00     0:00:00    58:54:07
-rehs        0:00:00     0:00:00     1:03:50
*sdsc       17:32:58     0:00:00    23:21:16
 voyager     0:00:00     0:00:00     1:00:29
mkandes@hardtack:~$
```

```
mkandes@hardtack:~$ timetrap display -v
Timesheet: sdsc
Id  Day                Start      End        Duration   Notes
45  Wed Jun 11, 2025   07:39:06 - 10:25:16   2:46:10    upgrade laptop from ubuntu 22.04 to 24.04
46                     11:24:45 - 12:45:43   1:20:58    upgrade laptop from ubuntu 22.04 to 24.04
47                     13:01:11 - 14:42:21   1:41:10    hpc weekly
49                     16:12:09 -           17:33:44    upgrade laptop from ubuntu 22.04 to 24.04
                                            23:22:02
    ---------------------------------------------------------------------------------------------
    Total                                   23:22:02
mkandes@hardtack:~$
```

```
mkandes@hardtack:~$ timetrap sheet
 Timesheet  Running     Today       Total Time
 ciml        0:00:00     0:00:00     0:48:28
 expanse     0:00:00     0:00:00     8:59:58
 hpcgpt      0:00:00     0:00:00     2:08:21
 icicle      0:00:00     0:00:00    58:54:07
-rehs        0:00:00     0:00:00     1:03:50
*sdsc       17:32:58     0:00:00    23:21:16
 voyager     0:00:00     0:00:00     1:00:29
mkandes@hardtack:~$ timetrap display -v
Timesheet: sdsc
Id  Day                Start      End        Duration   Notes
45  Wed Jun 11, 2025   07:39:06 - 10:25:16   2:46:10    upgrade laptop from ubuntu 22.04 to 24.04
46                     11:24:45 - 12:45:43   1:20:58    upgrade laptop from ubuntu 22.04 to 24.04
47                     13:01:11 - 14:42:21   1:41:10    hpc weekly
49                     16:12:09 -           17:33:44    upgrade laptop from ubuntu 22.04 to 24.04
                                            23:22:02
    ---------------------------------------------------------------------------------------------
    Total                                   23:22:02
mkandes@hardtack:~$ timetrap out
Checked out of entry "upgrade laptop from ubuntu 22.04 to 24.04" in sheet "sdsc".
mkandes@hardtack:~$ timetrap edit --id 49 --end "2025-06-11 20:33:44"
Editing entry with id 49

Timesheet: sdsc
    Day                Start      End        Duration   Notes
    Wed Jun 11, 2025   16:12:09 - 20:33:44   4:21:35    upgrade laptop from ubuntu 22.04 to 24.04
                                             4:21:35
    ---------------------------------------------------------------------------------------------
    Total                                    4:21:35
mkandes@hardtack:~$ timetrap in upgrade laptop from ubuntu 22.04 to 24.04
Checked into sheet "sdsc".
mkandes@hardtack:~$ timetrap display -v
Timesheet: sdsc
Id  Day                Start      End        Duration   Notes
45  Wed Jun 11, 2025   07:39:06 - 10:25:16   2:46:10    upgrade laptop from ubuntu 22.04 to 24.04
46                     11:24:45 - 12:45:43   1:20:58    upgrade laptop from ubuntu 22.04 to 24.04
47                     13:01:11 - 14:42:21   1:41:10    hpc weekly
49                     16:12:09 - 20:33:44   4:21:35    upgrade laptop from ubuntu 22.04 to 24.04
                                            10:09:53
50  Thu Jun 12, 2025   09:47:59 -            0:00:05    upgrade laptop from ubuntu 22.04 to 24.04
                                             0:00:05
    ---------------------------------------------------------------------------------------------
    Total                                   10:09:58
mkandes@hardtack:~$ timetrap edit --id 50 --start 06:35:59
Editing entry with id 50

Timesheet: sdsc
    Day                Start      End        Duration   Notes
    Thu Jun 12, 2025   06:35:59 -            3:12:27    upgrade laptop from ubuntu 22.04 to 24.04
                                             3:12:27
    ---------------------------------------------------------------------------------------------
    Total                                    3:12:27
mkandes@hardtack:~$ timetrap out
Checked out of entry "upgrade laptop from ubuntu 22.04 to 24.04" in sheet "sdsc".
mkandes@hardtack:~$ timetrap sheeet
Invalid command: "sheeet"
mkandes@hardtack:~$ timetrap sheet
 Timesheet  Running     Today       Total Time
 ciml        0:00:00     0:00:00     0:48:28
 expanse     0:00:00     0:00:00     8:59:58
 hpcgpt      0:00:00     0:00:00     2:08:21
 icicle      0:00:00     0:00:00    58:54:07
-rehs        0:00:00     0:00:00     1:03:50
*sdsc        0:00:00     3:12:30    13:22:23
 voyager     0:00:00     0:00:00     1:00:29
mkandes@hardtack:~$
```
