# How to install and run MLCFlow (on Expanse)

Let's use a JupyterLab session on Expanse for our development environment. 
You can launch a JupyterLab session on Exapsne with [galyleo](https://github.com/mkandes/galyleo). 
First, you need to put the location of galyleo in your [PATH](https://en.wikipedia.org/wiki/PATH_(variable)) environment variable.

*Command*:
```
export PATH="/cm/shared/apps/sdsc/galyleo:${PATH}"
```

*Output*:
```
[mkandes@login01 ~]$ export PATH="/cm/shared/apps/sdsc/galyleo:${PATH}"
[mkandes@login01 ~]$ echo $?
0
[mkandes@login01 ~]$
```

Once galyleo is in your PATH, you can run its launch command to create your JupyterLab session. 
For the REHS project this summer, we are targeting Expanse's GPU-accelerated compute nodes for our MLPerf Inference Benchmarks.
As such, we'll start by grabing a JupyterLab session on one of Expanse's gpu-debug nodes. 
But first, we need to define our software environment. 
Use the following conda environment yaml file as your starting point for developing a software environment that is compatible with MLCFlow and your specific MLPerf Inference Benchamrk.

```
name: mlcflow-dev

channels:
  - conda-forge
  - nvidia

dependencies:
  - python=3.9
  - pip
  - jupyterlab
  - cudatoolkit=11.8
  - cudnn
```

Create a copy of this yaml file in your [HOME](https://en.wikipedia.org/wiki/Home_directory) directory on Expanse.

```
[mkandes@login01 ~]$ echo $HOME
/home/mkandes
[mkandes@login01 ~]$ ls
data  mlcflow-dev.yaml  projects  references  scripts  software  tmp
[mkandes@login01 ~]$ cat mlcflow-dev.yaml 
name: mlcflow-dev

channels:
  - conda-forge
  - nvidia

dependencies:
  - python=3.9
  - pip
  - jupyterlab
  - cudatoolkit=11.8
  - cudnn
[mkandes@login01 ~]$
```

You're now ready to launch the JupyterLab session with this initial development environment.
Run the following galyleo launch command. Don't forget to change your account.

*Command*:
```
galyleo launch --account use300 --partition gpu-debug --cpus 10 --memory 92 --gpus 1 --time-limit 00:30:00 --conda-yml mlcflow-dev.yaml
```

*Output*:
```
[mkandes@login01 ~]$ galyleo launch --account use300 --partition gpu-debug --cpus 10 --memory 92 --gpus 1 --time-limit 00:30:00 --conda-yml mlcflow-dev.yaml 
Preparing galyleo for launch into Jupyter orbit ...
Listing all launch parameters ...
  command-line options       : values
    -A | --account           : use300
    -R | --reservation       : 
    -p | --partition         : gpu-debug
    -q | --qos               : 
    -N | --nodes             : 1
    -c | --cpus              : 10
    -m | --memory            : 92 GB
    -g | --gpus              : 1
       | --gres              : 
    -t | --time-limit        : 00:30:00
    -C | --constraint        : 
    -i | --interface         : lab
    -d | --notebook-dir      : 
       | --scratch-dir       : "/scratch/${USER}/job_${SLURM_JOB_ID}"
    -e | --env-modules       : singularitypro
       | --append-modulepath : 
    -s | --sif               : 
    -B | --bind              : 
       | --nv                : 
       | --conda-init        : 
       | --conda-env         : 
       | --conda-yml         : /home/mkandes/mlcflow-dev.yaml
       | --conda-version     : latest
       | --mamba             : false
       | --cache             : false
       | --spark-home        : 
       | --disable-checklist : false
       | --checklist-timeout : 10 s
    -Q | --quiet             : 1
Your token is 
catatonic-supplier-gush
200
Generating Jupyter launch script ...
md5sum: mlcflow-dev.md5: No such file or directory
Submitted Jupyter launch script to Slurm. Your SLURM_JOB_ID is 40678928.
Success! Token linked to jobid.
Please copy and paste the HTTPS URL provided below into your web browser.
Do not share this URL with others. It is the password to your Jupyter notebook session.
Your Jupyter notebook session will begin once compute resources are allocated to your job by the scheduler.
https://catatonic-supplier-gush.expanse-user-content.sdsc.edu/?token=c006deeb55b1e399fcc84fb09c8e4218
[mkandes@login01 ~]$
```

Copy and paste the URL provided in your web broswer and then wait.
Once the job begins running, it will build a new copy of your conda environment and then open the JupyterLab session.
You can use JupyterLab's Terminal application to run command-line arguments within your conda environment --- e.g., `pip install mlcflow.
See how far the conda environment you've generate can support running your benchmark successfully. 
If you need to add additional software in the environment, you can modify it on the fly with conda and/or pip-based installs.
If you reach a point where you want to start from scratch, then go ahead and shutdown the JupyterLab session,
modify your conda yaml file with the new changes, and then start another development session with JupyterLab. 
This should allow you to iterate fairly quickly when making many changes to your conda environment. 

When you first start up a new JupyterLab session, you'll probably just want to make sure conda is setup correctly and installed all of the software you asked for.

```
mkandes@exp-7-59 ~]$ which conda
/scratch/mkandes/job_40678928/miniconda3/condabin/conda
[mkandes@exp-7-59 ~]$ conda env list

# conda environments:
#
base                   /scratch/mkandes/job_40678928/miniconda3
mlcflow-dev          * /scratch/mkandes/job_40678928/miniconda3/envs/mlcflow-dev

[mkandes@exp-7-59 ~]$ conda list
# packages in environment at /scratch/mkandes/job_40678928/miniconda3/envs/mlcflow-dev:
#
# Name                           Version          Build               Channel
_libgcc_mutex                    0.1              conda_forge         conda-forge
_openmp_mutex                    4.5              2_gnu               conda-forge
anyio                            4.9.0            pyh29332c3_0        conda-forge
argon2-cffi                      25.1.0           pyhd8ed1ab_0        conda-forge
argon2-cffi-bindings             21.2.0           py39h8cd3c5a_5      conda-forge
arrow                            1.3.0            pyhd8ed1ab_1        conda-forge
asttokens                        3.0.0            pyhd8ed1ab_1        conda-forge
async-lru                        2.0.5            pyh29332c3_0        conda-forge
attrs                            25.3.0           pyh71513ae_0        conda-forge
babel                            2.17.0           pyhd8ed1ab_0        conda-forge
beautifulsoup4                   4.13.4           pyha770c72_0        conda-forge
bleach                           6.2.0            pyh29332c3_4        conda-forge
bleach-with-css                  6.2.0            h82add2a_4          conda-forge
brotli-python                    1.1.0            py39hf88036b_3      conda-forge
bzip2                            1.0.8            h4bc722e_7          conda-forge
ca-certificates                  2025.6.15        hbd8a1cb_0          conda-forge
cached-property                  1.5.2            hd8ed1ab_1          conda-forge
cached_property                  1.5.2            pyha770c72_1        conda-forge
certifi                          2025.6.15        pyhd8ed1ab_0        conda-forge
cffi                             1.17.1           py39h15c3d72_0      conda-forge
charset-normalizer               3.4.2            pyhd8ed1ab_0        conda-forge
comm                             0.2.2            pyhd8ed1ab_1        conda-forge
cuda-version                     11.8             h70ddcb2_3          conda-forge
cudatoolkit                      11.8.0           h4ba93d1_13         conda-forge
cudnn                            9.10.1.4         haad7af6_0          conda-forge
debugpy                          1.8.14           py39hf88036b_0      conda-forge
decorator                        5.2.1            pyhd8ed1ab_0        conda-forge
defusedxml                       0.7.1            pyhd8ed1ab_0        conda-forge
exceptiongroup                   1.3.0            pyhd8ed1ab_0        conda-forge
executing                        2.2.0            pyhd8ed1ab_0        conda-forge
fqdn                             1.5.1            pyhd8ed1ab_1        conda-forge
h11                              0.16.0           pyhd8ed1ab_0        conda-forge
h2                               4.2.0            pyhd8ed1ab_0        conda-forge
hpack                            4.1.0            pyhd8ed1ab_0        conda-forge
httpcore                         1.0.9            pyh29332c3_0        conda-forge
httpx                            0.28.1           pyhd8ed1ab_0        conda-forge
hyperframe                       6.1.0            pyhd8ed1ab_0        conda-forge
idna                             3.10             pyhd8ed1ab_1        conda-forge
importlib-metadata               8.7.0            pyhe01879c_1        conda-forge
importlib_resources              6.5.2            pyhd8ed1ab_0        conda-forge
ipykernel                        6.29.5           pyh3099207_0        conda-forge
ipython                          8.18.1           pyh707e725_3        conda-forge
isoduration                      20.11.0          pyhd8ed1ab_1        conda-forge
jedi                             0.19.2           pyhd8ed1ab_1        conda-forge
jinja2                           3.1.6            pyhd8ed1ab_0        conda-forge
json5                            0.12.0           pyhd8ed1ab_0        conda-forge
jsonpointer                      3.0.0            py39hf3d152e_1      conda-forge
jsonschema                       4.24.0           pyhd8ed1ab_0        conda-forge
jsonschema-specifications        2025.4.1         pyh29332c3_0        conda-forge
jsonschema-with-format-nongpl    4.24.0           hd8ed1ab_0          conda-forge
jupyter-lsp                      2.2.5            pyhe01879c_2        conda-forge
jupyter_client                   8.6.3            pyhd8ed1ab_1        conda-forge
jupyter_core                     5.8.1            pyh31011fe_0        conda-forge
jupyter_events                   0.12.0           pyh29332c3_0        conda-forge
jupyter_server                   2.16.0           pyhe01879c_0        conda-forge
jupyter_server_terminals         0.5.3            pyhd8ed1ab_1        conda-forge
jupyterlab                       4.4.3            pyhd8ed1ab_0        conda-forge
jupyterlab_pygments              0.3.0            pyhd8ed1ab_2        conda-forge
jupyterlab_server                2.27.3           pyhd8ed1ab_1        conda-forge
keyutils                         1.6.1            h166bdaf_0          conda-forge
krb5                             1.21.3           h659f571_0          conda-forge
ld_impl_linux-64                 2.43             h1423503_5          conda-forge
libcudnn                         9.10.1.4         h7d33bf5_0          conda-forge
libcudnn-dev                     9.10.1.4         h0fdc2d1_0          conda-forge
libedit                          3.1.20250104     pl5321h7949ede_0    conda-forge
libexpat                         2.7.0            h5888daf_0          conda-forge
libffi                           3.4.6            h2dba641_1          conda-forge
libgcc                           15.1.0           h767d61c_3          conda-forge
libgcc-ng                        15.1.0           h69a702a_3          conda-forge
libgomp                          15.1.0           h767d61c_3          conda-forge
liblzma                          5.8.1            hb9d3cd8_2          conda-forge
libnsl                           2.0.1            hb9d3cd8_1          conda-forge
libsodium                        1.0.20           h4ab18f5_0          conda-forge
libsqlite                        3.50.1           h6cd9bfd_7          conda-forge
libstdcxx                        15.1.0           h8f9b012_3          conda-forge
libstdcxx-ng                     15.1.0           h4852527_3          conda-forge
libuuid                          2.38.1           h0b41bf4_0          conda-forge
libxcrypt                        4.4.36           hd590300_1          conda-forge
libzlib                          1.3.1            hb9d3cd8_2          conda-forge
markupsafe                       3.0.2            py39h9399b63_1      conda-forge
matplotlib-inline                0.1.7            pyhd8ed1ab_1        conda-forge
mistune                          3.1.3            pyh29332c3_0        conda-forge
nbclient                         0.10.2           pyhd8ed1ab_0        conda-forge
nbconvert-core                   7.16.6           pyh29332c3_0        conda-forge
nbformat                         5.10.4           pyhd8ed1ab_1        conda-forge
ncurses                          6.5              h2d0b736_3          conda-forge
nest-asyncio                     1.6.0            pyhd8ed1ab_1        conda-forge
notebook-shim                    0.2.4            pyhd8ed1ab_1        conda-forge
openssl                          3.5.0            h7b32b05_1          conda-forge
overrides                        7.7.0            pyhd8ed1ab_1        conda-forge
packaging                        25.0             pyh29332c3_1        conda-forge
pandocfilters                    1.5.0            pyhd8ed1ab_0        conda-forge
parso                            0.8.4            pyhd8ed1ab_1        conda-forge
pexpect                          4.9.0            pyhd8ed1ab_1        conda-forge
pickleshare                      0.7.5            pyhd8ed1ab_1004     conda-forge
pip                              25.1.1           pyh8b19718_0        conda-forge
pkgutil-resolve-name             1.3.10           pyhd8ed1ab_2        conda-forge
platformdirs                     4.3.8            pyhe01879c_0        conda-forge
prometheus_client                0.22.1           pyhd8ed1ab_0        conda-forge
prompt-toolkit                   3.0.51           pyha770c72_0        conda-forge
psutil                           7.0.0            py39h8cd3c5a_0      conda-forge
ptyprocess                       0.7.0            pyhd8ed1ab_1        conda-forge
pure_eval                        0.2.3            pyhd8ed1ab_1        conda-forge
pycparser                        2.22             pyh29332c3_1        conda-forge
pygments                         2.19.2           pyhd8ed1ab_0        conda-forge
pysocks                          1.7.1            pyha55dd90_7        conda-forge
python                           3.9.23           hc30ae73_0_cpython  conda-forge
python-dateutil                  2.9.0.post0      pyhff2d567_1        conda-forge
python-fastjsonschema            2.21.1           pyhd8ed1ab_0        conda-forge
python-json-logger               2.0.7            pyhd8ed1ab_0        conda-forge
python_abi                       3.9              7_cp39              conda-forge
pytz                             2025.2           pyhd8ed1ab_0        conda-forge
pyyaml                           6.0.2            py39h9399b63_2      conda-forge
pyzmq                            27.0.0           py39h4e4fb57_0      conda-forge
readline                         8.2              h8c095d6_2          conda-forge
referencing                      0.36.2           pyh29332c3_0        conda-forge
requests                         2.32.4           pyhd8ed1ab_0        conda-forge
rfc3339-validator                0.1.4            pyhd8ed1ab_1        conda-forge
rfc3986-validator                0.1.1            pyh9f0ad1d_0        conda-forge
rpds-py                          0.25.1           py39h20260ba_0      conda-forge
send2trash                       1.8.3            pyh0d859eb_1        conda-forge
setuptools                       80.9.0           pyhff2d567_0        conda-forge
six                              1.17.0           pyhd8ed1ab_0        conda-forge
sniffio                          1.3.1            pyhd8ed1ab_1        conda-forge
soupsieve                        2.7              pyhd8ed1ab_0        conda-forge
stack_data                       0.6.3            pyhd8ed1ab_1        conda-forge
terminado                        0.18.1           pyh0d859eb_0        conda-forge
tinycss2                         1.4.0            pyhd8ed1ab_0        conda-forge
tk                               8.6.13           noxft_hd72426e_102  conda-forge
tomli                            2.2.1            pyhd8ed1ab_1        conda-forge
tornado                          6.5.1            py39h8cd3c5a_0      conda-forge
traitlets                        5.14.3           pyhd8ed1ab_1        conda-forge
types-python-dateutil            2.9.0.20250516   pyhd8ed1ab_0        conda-forge
typing-extensions                4.14.0           h32cad80_0          conda-forge
typing_extensions                4.14.0           pyhe01879c_0        conda-forge
typing_utils                     0.1.0            pyhd8ed1ab_1        conda-forge
tzdata                           2025b            h78e105d_0          conda-forge
uri-template                     1.3.0            pyhd8ed1ab_1        conda-forge
urllib3                          2.5.0            pyhd8ed1ab_0        conda-forge
wcwidth                          0.2.13           pyhd8ed1ab_1        conda-forge
webcolors                        24.11.1          pyhd8ed1ab_0        conda-forge
webencodings                     0.5.1            pyhd8ed1ab_3        conda-forge
websocket-client                 1.8.0            pyhd8ed1ab_1        conda-forge
wheel                            0.45.1           pyhd8ed1ab_1        conda-forge
yaml                             0.2.5            h7f98852_2          conda-forge
zeromq                           4.3.5            h3b0a872_7          conda-forge
zipp                             3.23.0           pyhd8ed1ab_0        conda-forge
zstandard                        0.23.0           py39h8cd3c5a_2      conda-forge
[mkandes@exp-7-59 ~]$ 
```

We can now explore how to install and setup MLCFlow.

```
[mkandes@exp-7-59 ~]$ python3 -m venv mlcflow
[mkandes@exp-7-59 ~]$ . mlcflow/bin/activate
(mlcflow) [mkandes@exp-7-59 ~]$ which activate
/usr/bin/which: no activate in (/home/mkandes/mlcflow/bin:/scratch/mkandes/job_40678928/miniconda3/envs/mlcflow-dev/bin:/scratch/mkandes/job_40678928/miniconda3/condabin:/cm/local/apps/singularitypro/3.11/bin:/cm/shared/apps/sdsc/1.0/bin:/cm/shared/apps/sdsc/1.0/sbin:/cm/shared/apps/slurm/current/sbin:/cm/shared/apps/slurm/current/bin:/cm/shared/apps/sdsc/galyleo:/home/mkandes/.juliaup/bin:/home/mkandes/.local/bin:/home/mkandes/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin)
(mlcflow) [mkandes@exp-7-59 ~]$ ls
data  mlcflow  mlcflow-dev.yaml  projects  references  scripts  software  tmp
(mlcflow) [mkandes@exp-7-59 ~]$ pip install mlcflow
Collecting mlcflow
  Downloading mlcflow-1.0.18-py3-none-any.whl (47 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 47.1/47.1 kB 347.5 kB/s eta 0:00:00
Collecting colorama
  Downloading colorama-0.4.6-py2.py3-none-any.whl (25 kB)
Collecting requests
  Downloading requests-2.32.4-py3-none-any.whl (64 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 64.8/64.8 kB 537.6 kB/s eta 0:00:00
Collecting giturlparse
  Downloading giturlparse-0.12.0-py2.py3-none-any.whl (15 kB)
Collecting pyyaml
  Downloading PyYAML-6.0.2-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (737 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 737.4/737.4 kB 6.9 MB/s eta 0:00:00
Collecting certifi>=2017.4.17
  Downloading certifi-2025.6.15-py3-none-any.whl (157 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 157.7/157.7 kB 1.2 MB/s eta 0:00:00
Collecting idna<4,>=2.5
  Downloading idna-3.10-py3-none-any.whl (70 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 70.4/70.4 kB 604.1 kB/s eta 0:00:00
Collecting urllib3<3,>=1.21.1
  Downloading urllib3-2.5.0-py3-none-any.whl (129 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 129.8/129.8 kB 1.2 MB/s eta 0:00:00
Collecting charset_normalizer<4,>=2
  Downloading charset_normalizer-3.4.2-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (149 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 149.5/149.5 kB 1.1 MB/s eta 0:00:00
Installing collected packages: urllib3, pyyaml, idna, giturlparse, colorama, charset_normalizer, certifi, requests, mlcflow
Successfully installed certifi-2025.6.15 charset_normalizer-3.4.2 colorama-0.4.6 giturlparse-0.12.0 idna-3.10 mlcflow-1.0.18 pyyaml-6.0.2 requests-2.32.4 urllib3-2.5.0

[notice] A new release of pip is available: 23.0.1 -> 25.1.1
[notice] To update, run: pip install --upgrade pip
(mlcflow) [mkandes@exp-7-59 ~]$
```

First lesson learned. We likely don't want to create a virual environment as suggested (as optional) in the MLCFlow installation instructions.

```
[mkandes@login01 ~]$ ls -lahtr
total 525K
-rw-r--r--   1 mkandes use300   18 Sep  7  2020 .bash_logout
-rw-r--r--   1 mkandes use300  334 Sep  7  2020 .emacs
-rw-r--r--   1 mkandes use300   17 Jan  7  2021 .vimrc
-rw-r--r--   1 mkandes use300  252 Feb 16  2021 .gitconfig
-rw-------   1 mkandes use300    0 Feb 17  2022 .viminfo.tmp
drwxr-xr-x   5 mkandes use300    6 Dec 12  2023 .ood_portal
drwxr-xr-x  12 mkandes use300   12 Jul  3  2024 projects
-rw-r--r--   1 mkandes use300  414 Sep 20  2024 .bash_profile
drwxr-xr-x   2 mkandes use300    3 Oct  1  2024 .vim
-rw-r--r--   1 mkandes use300   13 Nov 18  2024 .Rhistory
-rw-------   1 mkandes use300  177 Nov 18  2024 .sh_history
drwxr-xr-x  12 mkandes use300   15 Dec 17  2024 data
drwx------   3 mkandes use300    3 Feb 19 08:53 .dbus
-rw-------   1 mkandes use300  373 Feb 19 09:48 .Xauthority
drwx------   2 mkandes use300    7 Mar 14 12:12 .ssh
drwxr-xr-x   2 mkandes use300    3 Mar 31 13:13 .dgl
drwxr-xr-x   2 mkandes use300    3 Apr  7 16:57 .vasp
-rw-------   1 mkandes use300    0 Apr  8 08:57 .history
drwxr-xr-x   3 mkandes use300    3 Apr 14 06:42 .lmod.d
drwx------   3 mkandes use300    3 Apr 14 09:55 .singularity
drwxr-xr-x   3 mkandes use300    3 May  1 08:35 references
drwx------   3 mkandes use300    3 May  2 07:56 .local
drwx------   3 mkandes use300    3 May  2 12:35 .nv
-rw-------   1 mkandes use300  607 May  8 15:52 .python_history-76625.tmp
drwx------   5 mkandes use300    5 May  9 15:29 .config
drwxr-xr-x   5 mkandes use300    6 May 13 08:35 .jupyter
-rw-r--r--   1 mkandes use300 1.7K May 15 19:22 .bashrc
-rw-r--r--   1 mkandes use300  11K May 15 19:33 .dircolors.bak
drwxr-xr-x   3 mkandes use300    3 May 16 10:15 tmp
drwxr-xr-x 106 mkandes use300  106 Jun  6 07:43 software
drwxr-xr-x   3 mkandes use300    3 Jun 10 06:36 .ipython
drwxr-xr-x   3 mkandes use300   12 Jun 10 20:22 scripts
drwxr-xr-x   7 mkandes use300    7 Jun 23 16:07 .cache
-rw-------   1 mkandes use300 1.1K Jun 23 16:16 .python_history
drwxr-xr-x   2 mkandes use300    3 Jun 25 11:15 .keras
drwxr-xr-x   4 mkandes use300    4 Jun 26 11:15 .spack
-rw-------   1 mkandes use300  830 Jun 26 16:40 .lesshst
-rw-r--r--   1 mkandes use300 1.1K Jun 26 16:45 .wget-hsts
drwxr-xr-x   2 mkandes use300    5 Jun 27 16:06 .conda
-rw-r--r--   1 mkandes use300  140 Jun 27 16:09 mlcflow-dev.yaml
-rw-------   1 mkandes use300  23K Jun 27 16:09 .viminfo
drwx------   3 mkandes use300    5 Jun 27 16:09 .galyleo
drwxr-x---  27 mkandes use300   46 Jun 27 16:24 .
drwxr-xr-x   5 mkandes use300    7 Jun 27 16:24 mlcflow
-rw-------   1 mkandes use300  80K Jun 27 16:31 .bash_history
drwxr-xr-x 478 root    root      0 Jun 27 16:39 ..
[mkandes@login01 ~]$ cd mlcflow/
[mkandes@login01 mlcflow]$ ls
bin  include  lib  lib64  pyvenv.cfg
[mkandes@login01 mlcflow]$ cd bin/
[mkandes@login01 bin]$ ls
activate      activate.fish  mlc   normalizer  pip3    python   python3.9
activate.csh  Activate.ps1   mlcr  pip         pip3.9  python3
[mkandes@login01 bin]$ ls -lahtr
total 135K
drwxr-xr-x 5 mkandes use300    7 Jun 27 16:24 ..
lrwxrwxrwx 1 mkandes use300   69 Jun 27 16:24 python3 -> /scratch/mkandes/job_40678928/miniconda3/envs/mlcflow-dev/bin/python3
lrwxrwxrwx 1 mkandes use300    7 Jun 27 16:24 python -> python3
lrwxrwxrwx 1 mkandes use300    7 Jun 27 16:24 python3.9 -> python3
-rwxr-xr-x 1 mkandes use300  238 Jun 27 16:25 pip
-rwxr-xr-x 1 mkandes use300  238 Jun 27 16:25 pip3
-rwxr-xr-x 1 mkandes use300  238 Jun 27 16:25 pip3.9
-rw-r--r-- 1 mkandes use300 2.0K Jun 27 16:25 activate.fish
-rw-r--r-- 1 mkandes use300  850 Jun 27 16:25 activate.csh
-rw-r--r-- 1 mkandes use300 8.7K Jun 27 16:25 Activate.ps1
-rw-r--r-- 1 mkandes use300 1.9K Jun 27 16:25 activate
-rwxr-xr-x 1 mkandes use300  243 Jun 27 16:26 normalizer
-rwxr-xr-x 1 mkandes use300  224 Jun 27 16:26 mlc
drwxr-xr-x 2 mkandes use300   15 Jun 27 16:26 .
-rwxr-xr-x 1 mkandes use300  224 Jun 27 16:26 mlcr
[mkandes@login01 bin]$
```

This is the way.
```
[mkandes@exp-7-59 ~]$ nvidia-smi
Fri Jun 27 16:56:34 2025       
+-----------------------------------------------------------------------------+
| NVIDIA-SMI 525.85.12    Driver Version: 525.85.12    CUDA Version: 12.0     |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|                               |                      |               MIG M. |
|===============================+======================+======================|
|   0  Tesla V100-SXM2...  On   | 00000000:86:00.0 Off |                    0 |
| N/A   33C    P0    41W / 300W |      0MiB / 32768MiB |      0%      Default |
|                               |                      |                  N/A |
+-------------------------------+----------------------+----------------------+
                                                                               
+-----------------------------------------------------------------------------+
| Processes:                                                                  |
|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |
|        ID   ID                                                   Usage      |
|=============================================================================|
|  No running processes found                                                 |
+-----------------------------------------------------------------------------+
[mkandes@exp-7-59 ~]$ which conda
/scratch/mkandes/job_40679644/miniconda3/condabin/conda
[mkandes@exp-7-59 ~]$ pip install mlcflow
Collecting mlcflow
  Downloading mlcflow-1.0.18-py3-none-any.whl.metadata (19 kB)
Requirement already satisfied: requests in /scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from mlcflow) (2.32.4)
Requirement already satisfied: pyyaml in /scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from mlcflow) (6.0.2)
Collecting giturlparse (from mlcflow)
  Downloading giturlparse-0.12.0-py2.py3-none-any.whl.metadata (4.5 kB)
Collecting colorama (from mlcflow)
  Downloading colorama-0.4.6-py2.py3-none-any.whl.metadata (17 kB)
Requirement already satisfied: charset_normalizer<4,>=2 in /scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from requests->mlcflow) (3.4.2)
Requirement already satisfied: idna<4,>=2.5 in /scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from requests->mlcflow) (3.10)
Requirement already satisfied: urllib3<3,>=1.21.1 in /scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from requests->mlcflow) (2.5.0)
Requirement already satisfied: certifi>=2017.4.17 in /scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from requests->mlcflow) (2025.6.15)
Downloading mlcflow-1.0.18-py3-none-any.whl (47 kB)
Downloading colorama-0.4.6-py2.py3-none-any.whl (25 kB)
Downloading giturlparse-0.12.0-py2.py3-none-any.whl (15 kB)
Installing collected packages: giturlparse, colorama, mlcflow
Successfully installed colorama-0.4.6 giturlparse-0.12.0 mlcflow-1.0.18
[mkandes@exp-7-59 ~]$ which mlc
/scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/bin/mlc
[mkandes@exp-7-59 ~]$
```

# How to begin running MLPerf Inference Benchmarks via MLCFlow

```
[mkandes@exp-7-59 ~]$ mlcr install,python-venv --name=mlperf
[2025-06-27 17:04:04,539 action.py:194 INFO] - Created repos.json in /home/mkandes/MLC and initialised with local cache folder path: /home/mkandes/MLC/repos/local
[2025-06-27 17:04:04,624 main.py:275 ERROR] - Script automation not found. Have you done "mlc pull repo mlcommons@mlperf-automations --branch=dev"?
Traceback (most recent call last):
  File "/scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/bin/mlcr", line 8, in <module>
    sys.exit(mlcr())
  File "/scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages/mlc/main.py", line 86, in mlcr
    main()
  File "/scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages/mlc/main.py", line 276, in main
    raise Exception(f"""An error occurred {res}""")
Exception: An error occurred {'return': 1, 'error': 'Script automation not found. Have you done "mlc pull repo mlcommons@mlperf-automations --branch=dev"?'}
[mkandes@exp-7-59 ~]$ 
```

```
[mkandes@exp-7-59 ~]$  pip install mlc-scripts
Collecting mlc-scripts
  Downloading mlc_scripts-1.0.2.tar.gz (9.5 kB)
  Installing build dependencies ... done
  Getting requirements to build wheel ... done
  Preparing metadata (pyproject.toml) ... done
Requirement already satisfied: requests in /scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from mlc-scripts) (2.32.4)
Requirement already satisfied: pyyaml in /scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from mlc-scripts) (6.0.2)
Requirement already satisfied: mlcflow in /scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from mlc-scripts) (1.0.18)
Requirement already satisfied: giturlparse in /scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from mlc-scripts) (0.12.0)
Requirement already satisfied: colorama in /scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from mlcflow->mlc-scripts) (0.4.6)
Requirement already satisfied: charset_normalizer<4,>=2 in /scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from requests->mlc-scripts) (3.4.2)
Requirement already satisfied: idna<4,>=2.5 in /scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from requests->mlc-scripts) (3.10)
Requirement already satisfied: urllib3<3,>=1.21.1 in /scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from requests->mlc-scripts) (2.5.0)
Requirement already satisfied: certifi>=2017.4.17 in /scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from requests->mlc-scripts) (2025.6.15)
Building wheels for collected packages: mlc-scripts
  Building wheel for mlc-scripts (pyproject.toml) ... done
  Created wheel for mlc-scripts: filename=mlc_scripts-1.0.2-py3-none-any.whl size=10674 sha256=15135ae508f159ec86fb5d793e8981aafc239c6f90e5b0ad3370426879798bf6
  Stored in directory: /home/mkandes/.cache/pip/wheels/47/08/a4/b9403480a2a6ef73571b25ab2f8a38a262f3573b08185c44ba
Successfully built mlc-scripts
Installing collected packages: mlc-scripts
Successfully installed mlc-scripts-1.0.2
[mkandes@exp-7-59 ~]$ mlcr install,python-venv --name=mlperf
[2025-06-27 17:06:51,853 module.py:576 INFO] - * mlcr install,python-venv
[2025-06-27 17:06:52,187 module.py:576 INFO] -   * mlcr get,python,-virtual
[2025-06-27 17:06:52,601 module.py:3890 INFO] -       * /scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/bin/python3
[2025-06-27 17:06:52,640 module.py:5128 INFO] -              ! cd /home/mkandes/MLC/repos/local/cache/get-python3_4454bc1b
[2025-06-27 17:06:52,640 module.py:5129 INFO] -              ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-python3/run.sh from tmp-run.sh
[2025-06-27 17:06:52,709 module.py:5274 INFO] -              ! call "detect_version" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-python3/customize.py
[2025-06-27 17:06:52,712 customize.py:69 INFO] -         Detected version: 3.9.23
[2025-06-27 17:06:52,712 module.py:3890 INFO] -       * /usr/bin/python3
[2025-06-27 17:06:52,720 module.py:5128 INFO] -              ! cd /home/mkandes/MLC/repos/local/cache/get-python3_4454bc1b
[2025-06-27 17:06:52,721 module.py:5129 INFO] -              ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-python3/run.sh from tmp-run.sh
[2025-06-27 17:06:52,783 module.py:5274 INFO] -              ! call "detect_version" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-python3/customize.py
[2025-06-27 17:06:52,785 customize.py:69 INFO] -         Detected version: 3.6.8
[2025-06-27 17:06:52,785 module.py:3890 INFO] -       * /usr/bin/python3.9
[2025-06-27 17:06:52,812 module.py:5128 INFO] -              ! cd /home/mkandes/MLC/repos/local/cache/get-python3_4454bc1b
[2025-06-27 17:06:52,812 module.py:5129 INFO] -              ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-python3/run.sh from tmp-run.sh
[2025-06-27 17:06:52,864 module.py:5274 INFO] -              ! call "detect_version" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-python3/customize.py
[2025-06-27 17:06:52,867 customize.py:69 INFO] -         Detected version: 3.9.18
[2025-06-27 17:06:52,867 module.py:3890 INFO] -       * /usr/bin/python3.11
[2025-06-27 17:06:52,885 module.py:5128 INFO] -              ! cd /home/mkandes/MLC/repos/local/cache/get-python3_4454bc1b
[2025-06-27 17:06:52,885 module.py:5129 INFO] -              ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-python3/run.sh from tmp-run.sh
[2025-06-27 17:06:52,950 module.py:5274 INFO] -              ! call "detect_version" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-python3/customize.py
[2025-06-27 17:06:52,952 customize.py:69 INFO] -         Detected version: 3.11.5
[2025-06-27 17:06:52,952 module.py:3936 INFO] -     - More than 1 path found:
[2025-06-27 17:06:52,952 module.py:3942 INFO] -     0) /scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/bin/python3
[2025-06-27 17:06:52,952 module.py:3942 INFO] -     1) /usr/bin/python3
[2025-06-27 17:06:52,952 module.py:3942 INFO] -     2) /usr/bin/python3.9
[2025-06-27 17:06:52,952 module.py:3942 INFO] -     3) /usr/bin/python3.11
    Make your selection or press Enter for 0:
```

```
[2025-06-27 17:07:56,569 module.py:3959 INFO] -     Selected 0: /scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/bin/python3
[2025-06-27 17:07:56,569 module.py:4206 INFO] -       # Found artifact in /scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/bin/python3
[2025-06-27 17:07:56,579 module.py:5128 INFO] -          ! cd /home/mkandes/MLC/repos/local/cache/get-python3_4454bc1b
[2025-06-27 17:07:56,579 module.py:5129 INFO] -          ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-python3/run.sh from tmp-run.sh
[2025-06-27 17:07:56,668 module.py:5274 INFO] -          ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-python3/customize.py
[2025-06-27 17:07:56,671 customize.py:69 INFO] -         Detected version: 3.9.23
[2025-06-27 17:07:56,900 module.py:2166 INFO] -     - cache UID: 4454bc1baa364c85
[2025-06-27 17:07:56,900 module.py:2241 INFO] - Path to Python: /scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/bin/python3
[2025-06-27 17:07:56,900 module.py:2241 INFO] - Python version: 3.9.23
[2025-06-27 17:07:56,912 module.py:5128 INFO] -        ! cd /home/mkandes/MLC/repos/local/cache/install-python-venv_name-mlperf_c01151f8
[2025-06-27 17:07:56,912 module.py:5129 INFO] -        ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/install-python-venv/run.sh from tmp-run.sh
Collecting virtualenv
  Downloading virtualenv-20.31.2-py3-none-any.whl.metadata (4.5 kB)
Collecting distlib<1,>=0.3.7 (from virtualenv)
  Downloading distlib-0.3.9-py2.py3-none-any.whl.metadata (5.2 kB)
Collecting filelock<4,>=3.12.2 (from virtualenv)
  Downloading filelock-3.18.0-py3-none-any.whl.metadata (2.9 kB)
Requirement already satisfied: platformdirs<5,>=3.9.1 in /scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from virtualenv) (4.3.8)
Downloading virtualenv-20.31.2-py3-none-any.whl (6.1 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 6.1/6.1 MB 29.1 MB/s eta 0:00:00
Downloading distlib-0.3.9-py2.py3-none-any.whl (468 kB)
Downloading filelock-3.18.0-py3-none-any.whl (16 kB)
Installing collected packages: distlib, filelock, virtualenv
Successfully installed distlib-0.3.9 filelock-3.18.0 virtualenv-20.31.2
[2025-06-27 17:08:50,568 module.py:5274 INFO] -        ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/install-python-venv/customize.py
[2025-06-27 17:08:50,639 module.py:576 INFO] - * mlcr get,python3
[2025-06-27 17:08:50,851 module.py:5128 INFO] -        ! cd /home/mkandes/MLC/repos/local/cache/get-python3_virtual-name-ml_6c3057ce
[2025-06-27 17:08:50,851 module.py:5129 INFO] -        ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-python3/run.sh from tmp-run.sh
[2025-06-27 17:08:50,940 module.py:5274 INFO] -        ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-python3/customize.py
[2025-06-27 17:08:50,943 customize.py:69 INFO] -       Detected version: 3.9.23
[2025-06-27 17:08:51,117 module.py:2166 INFO] -   - cache UID: 6c3057ce28ce406b
[2025-06-27 17:08:51,117 module.py:2241 INFO] - Path to Python: /home/mkandes/MLC/repos/local/cache/install-python-venv_name-mlperf_c01151f8/mlperf/bin/python3
[2025-06-27 17:08:51,117 module.py:2241 INFO] - Python version: 3.9.23
[2025-06-27 17:08:51,347 module.py:2166 INFO] -   - cache UID: c01151f8312b4cdd
[mkandes@exp-7-59 ~]$
```

```
[mkandes@exp-7-59 ~]$ mlcr run-mlperf,inference,_find-performance,_full,_r5.0-dev \
>    --model=resnet50 \
>    --implementation=cpp \
>    --framework=onnxruntime \
>    --category=datacenter \
>    --scenario=Offline \
>    --execution_mode=test \
>    --device=cuda  \
>    --quiet \
>    --test_query_count=5000 --rerun
[2025-06-27 17:11:29,244 module.py:576 INFO] - * mlcr run-mlperf,inference,_find-performance,_full,_r5.0-dev
[2025-06-27 17:11:29,309 module.py:576 INFO] -   * mlcr detect,os
[2025-06-27 17:11:29,354 module.py:5128 INFO] -          ! cd /home/mkandes
[2025-06-27 17:11:29,354 module.py:5129 INFO] -          ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/run.sh from tmp-run.sh
[2025-06-27 17:11:29,541 module.py:5274 INFO] -          ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/customize.py
[2025-06-27 17:11:29,662 module.py:576 INFO] -   * mlcr detect,cpu
[2025-06-27 17:11:29,797 module.py:576 INFO] -     * mlcr detect,os
[2025-06-27 17:11:29,831 module.py:5128 INFO] -            ! cd /home/mkandes
[2025-06-27 17:11:29,832 module.py:5129 INFO] -            ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/run.sh from tmp-run.sh
[2025-06-27 17:11:30,078 module.py:5274 INFO] -            ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/customize.py
[2025-06-27 17:11:30,169 module.py:5128 INFO] -          ! cd /home/mkandes
[2025-06-27 17:11:30,170 module.py:5129 INFO] -          ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-cpu/run.sh from tmp-run.sh
[2025-06-27 17:11:30,474 module.py:5274 INFO] -          ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-cpu/customize.py
[2025-06-27 17:11:30,575 module.py:576 INFO] -   * mlcr get,python3
[2025-06-27 17:11:30,577 module.py:1285 INFO] -        ! load /home/mkandes/MLC/repos/local/cache/get-python3_4454bc1b/mlc-cached-state.json
[2025-06-27 17:11:30,577 module.py:2241 INFO] - Path to Python: /scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/bin/python3
[2025-06-27 17:11:30,577 module.py:2241 INFO] - Python version: 3.9.23
[2025-06-27 17:11:30,653 module.py:576 INFO] -   * mlcr get,mlcommons,inference,src
[2025-06-27 17:11:31,003 module.py:576 INFO] -     * mlcr detect,os
[2025-06-27 17:11:31,019 module.py:5128 INFO] -            ! cd /home/mkandes/MLC/repos/local/cache/get-mlperf-inference-src_9ff7a7ee
[2025-06-27 17:11:31,019 module.py:5129 INFO] -            ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/run.sh from tmp-run.sh
[2025-06-27 17:11:31,187 module.py:5274 INFO] -            ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/customize.py
[2025-06-27 17:11:31,318 module.py:576 INFO] -     * mlcr get,python3
[2025-06-27 17:11:31,319 module.py:1285 INFO] -          ! load /home/mkandes/MLC/repos/local/cache/get-python3_4454bc1b/mlc-cached-state.json
[2025-06-27 17:11:31,319 module.py:2241 INFO] - Path to Python: /scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/bin/python3
[2025-06-27 17:11:31,319 module.py:2241 INFO] - Python version: 3.9.23
[2025-06-27 17:11:31,418 module.py:576 INFO] -     * mlcr get,git,repo,_branch.master,_repo.https://github.com/mlcommons/inference
[2025-06-27 17:11:31,730 module.py:576 INFO] -       * mlcr detect,os
[2025-06-27 17:11:31,763 module.py:5128 INFO] -              ! cd /home/mkandes/MLC/repos/local/cache/get-git-repo_inference-src_d785eedd
[2025-06-27 17:11:31,763 module.py:5129 INFO] -              ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/run.sh from tmp-run.sh
[2025-06-27 17:11:31,933 module.py:5274 INFO] -              ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/customize.py
[2025-06-27 17:11:32,016 module.py:5128 INFO] -            ! cd /home/mkandes/MLC/repos/local/cache/get-git-repo_inference-src_d785eedd
[2025-06-27 17:11:32,016 module.py:5129 INFO] -            ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-git-repo/run.sh from tmp-run.sh
/home/mkandes/MLC/repos/local/cache/get-git-repo_inference-src_d785eedd
rm -rf inference
******************************************************
Current directory: /home/mkandes/MLC/repos/local/cache/get-git-repo_inference-src_d785eedd

Cloning inference from https://github.com/mlcommons/inference

git clone  -b master https://github.com/mlcommons/inference --depth 5 inference

Cloning into 'inference'...
remote: Enumerating objects: 908, done.
remote: Counting objects: 100% (908/908), done.
remote: Compressing objects: 100% (721/721), done.
remote: Total 908 (delta 214), reused 529 (delta 120), pack-reused 0 (from 0)
Receiving objects: 100% (908/908), 33.19 MiB | 39.98 MiB/s, done.
Resolving deltas: 100% (214/214), done.
Updating files: 100% (803/803), done.
git rev-parse HEAD >> ../tmp-mlc-git-hash.out
[2025-06-27 17:12:01,066 module.py:5274 INFO] -            ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-git-repo/customize.py
[2025-06-27 17:12:01,247 module.py:2166 INFO] -       - cache UID: d785eedd09394629
[2025-06-27 17:12:01,247 module.py:2241 INFO] - MLC cache path to the Git repo: /home/mkandes/MLC/repos/local/cache/get-git-repo_inference-src_d785eedd/inference
[2025-06-27 17:12:01,271 module.py:5274 INFO] -          ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-mlperf-inference-src/customize.py
[2025-06-27 17:12:01,607 module.py:2166 INFO] -     - cache UID: 9ff7a7eefe844e83
[2025-06-27 17:12:01,729 module.py:576 INFO] -   * mlcr get,sut,description
[2025-06-27 17:12:01,876 module.py:576 INFO] -     * mlcr detect,os
[2025-06-27 17:12:01,899 module.py:5128 INFO] -            ! cd /home/mkandes
[2025-06-27 17:12:01,899 module.py:5129 INFO] -            ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/run.sh from tmp-run.sh
[2025-06-27 17:12:02,087 module.py:5274 INFO] -            ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/customize.py
[2025-06-27 17:12:02,182 module.py:576 INFO] -     * mlcr detect,cpu
[2025-06-27 17:12:02,239 module.py:576 INFO] -       * mlcr detect,os
[2025-06-27 17:12:02,272 module.py:5128 INFO] -              ! cd /home/mkandes
[2025-06-27 17:12:02,272 module.py:5129 INFO] -              ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/run.sh from tmp-run.sh
[2025-06-27 17:12:02,462 module.py:5274 INFO] -              ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/customize.py
[2025-06-27 17:12:02,546 module.py:5128 INFO] -            ! cd /home/mkandes
[2025-06-27 17:12:02,546 module.py:5129 INFO] -            ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-cpu/run.sh from tmp-run.sh
[2025-06-27 17:12:02,792 module.py:5274 INFO] -            ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-cpu/customize.py
[2025-06-27 17:12:02,878 module.py:576 INFO] -     * mlcr get,python3
[2025-06-27 17:12:02,879 module.py:1285 INFO] -          ! load /home/mkandes/MLC/repos/local/cache/get-python3_4454bc1b/mlc-cached-state.json
[2025-06-27 17:12:02,879 module.py:2241 INFO] - Path to Python: /scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/bin/python3
[2025-06-27 17:12:02,879 module.py:2241 INFO] - Python version: 3.9.23
[2025-06-27 17:12:02,960 module.py:576 INFO] -     * mlcr get,compiler
[2025-06-27 17:12:03,252 module.py:576 INFO] -       * mlcr install,llvm,prebuilt
[2025-06-27 17:12:03,592 module.py:576 INFO] -         * mlcr detect,os
[2025-06-27 17:12:03,617 module.py:5128 INFO] -                ! cd /home/mkandes/MLC/repos/local/cache/install-llvm-prebuilt_0922d11f
[2025-06-27 17:12:03,617 module.py:5129 INFO] -                ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/run.sh from tmp-run.sh
[2025-06-27 17:12:03,995 module.py:5274 INFO] -                ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/customize.py
[2025-06-27 17:12:04,079 customize.py:23 INFO] -           # Requested version: 15.0.6
[2025-06-27 17:12:04,079 customize.py:171 INFO] -           # Prepared package URL: https://github.com/llvm/llvm-project/releases/download/llvmorg-15.0.6/clang+llvm-15.0.6-x86_64-linux-gnu-ubuntu-18.04.tar.xz
[2025-06-27 17:12:04,079 customize.py:173 INFO] - 
[2025-06-27 17:12:04,079 customize.py:174 INFO] - Downloading from https://github.com/llvm/llvm-project/releases/download/llvmorg-15.0.6/clang+llvm-15.0.6-x86_64-linux-gnu-ubuntu-18.04.tar.xz ...
Downloading to /home/mkandes/MLC/repos/local/cache/install-llvm-prebuilt_0922d11f/clang+llvm-15.0.6-x86_64-linux-gnu-ubuntu-18.04.tar.xz

Downloaded: 100%
[2025-06-27 17:12:07,851 module.py:5128 INFO] -              ! cd /home/mkandes/MLC/repos/local/cache/install-llvm-prebuilt_0922d11f
[2025-06-27 17:12:07,851 module.py:5129 INFO] -              ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/install-llvm-prebuilt/run.sh from tmp-run.sh

Unarchiving clang+llvm-15.0.6-x86_64-linux-gnu-ubuntu-18.04.tar.xz ...
```

```
[2025-06-27 17:17:35,696 module.py:5274 INFO] -              ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/install-llvm-prebuilt/customize.py
[2025-06-27 17:17:35,847 module.py:2166 INFO] -         - cache UID: 0922d11fd0104019
[2025-06-27 17:17:35,857 module.py:5128 INFO] -            ! cd /home/mkandes/MLC/repos/local/cache/get-llvm_7db4ba2b
[2025-06-27 17:17:35,857 module.py:5129 INFO] -            ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-llvm/run.sh from tmp-run.sh
[2025-06-27 17:17:35,908 module.py:5274 INFO] -            ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/get-llvm/customize.py
[2025-06-27 17:17:35,911 customize.py:61 INFO] -         Detected version: 15.0.6
[2025-06-27 17:17:35,946 module.py:576 INFO] -     * mlcr get,compiler-flags
[2025-06-27 17:17:36,023 module.py:576 INFO] -       * mlcr detect,cpu
[2025-06-27 17:17:36,066 module.py:576 INFO] -         * mlcr detect,os
[2025-06-27 17:17:36,100 module.py:5128 INFO] -                ! cd /home/mkandes/MLC/repos/local/cache/get-llvm_7db4ba2b
[2025-06-27 17:17:36,100 module.py:5129 INFO] -                ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/run.sh from tmp-run.sh
[2025-06-27 17:17:36,215 module.py:5274 INFO] -                ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/customize.py
[2025-06-27 17:17:36,266 module.py:5128 INFO] -              ! cd /home/mkandes/MLC/repos/local/cache/get-llvm_7db4ba2b
[2025-06-27 17:17:36,267 module.py:5129 INFO] -              ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-cpu/run.sh from tmp-run.sh
[2025-06-27 17:17:36,478 module.py:5274 INFO] -              ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-cpu/customize.py
[2025-06-27 17:17:36,729 module.py:2166 INFO] -       - cache UID: 7db4ba2b5da94e48
[2025-06-27 17:17:36,759 module.py:576 INFO] -     * mlcr get,cuda-devices,_with-pycuda
[2025-06-27 17:17:36,874 module.py:576 INFO] -       * mlcr get,cuda,_toolkit
[2025-06-27 17:17:37,101 module.py:576 INFO] -         * mlcr detect,os
[2025-06-27 17:17:37,127 module.py:5128 INFO] -                ! cd /home/mkandes/MLC/repos/local/cache/get-cuda_9c7b538c
[2025-06-27 17:17:37,127 module.py:5129 INFO] -                ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/run.sh from tmp-run.sh
[2025-06-27 17:17:37,229 module.py:5274 INFO] -                ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/customize.py
[2025-06-27 17:17:37,272 module.py:4141 INFO] -           # Requested paths: /scratch/mkandes/job_40679644/miniconda3/envs/mlcflow-dev/bin:/scratch/mkandes/job_40679644/miniconda3/condabin:/cm/local/apps/singularitypro/3.11/bin:/cm/shared/apps/sdsc/1.0/bin:/cm/shared/apps/sdsc/1.0/sbin:/cm/shared/apps/slurm/current/sbin:/cm/shared/apps/slurm/current/bin:/cm/shared/apps/sdsc/galyleo:/home/mkandes/.juliaup/bin:/home/mkandes/.local/bin:/home/mkandes/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/usr/local/cuda/bin:/usr/cuda/bin:/usr/local/cuda-11/bin:/usr/cuda-11/bin:/usr/local/cuda-12/bin:/usr/cuda-12/bin:/usr/local/packages/cuda
[2025-06-27 17:17:37,333 module.py:576 INFO] -         * mlcr install,cuda,prebuilt
[2025-06-27 17:17:37,557 module.py:576 INFO] -           * mlcr detect,os
[2025-06-27 17:17:37,571 module.py:5128 INFO] -                  ! cd /home/mkandes/MLC/repos/local/cache/install-cuda-prebuilt_0f354f45
[2025-06-27 17:17:37,571 module.py:5129 INFO] -                  ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/run.sh from tmp-run.sh
[2025-06-27 17:17:37,700 module.py:5274 INFO] -                  ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/customize.py
[2025-06-27 17:17:37,809 module.py:576 INFO] -           * mlcr download,file,_url.https://developer.download.nvidia.com/compute/cuda/11.8.0/local_installers/cuda_11.8.0_520.61.05_linux.run
[2025-06-27 17:17:38,223 module.py:576 INFO] -             * mlcr detect,os
[2025-06-27 17:17:38,237 module.py:5128 INFO] -                    ! cd /home/mkandes/MLC/repos/local/cache/download-file_cuda-run-file_57785060
[2025-06-27 17:17:38,237 module.py:5129 INFO] -                    ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/run.sh from tmp-run.sh
[2025-06-27 17:17:38,355 module.py:5274 INFO] -                    ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/detect-os/customize.py
[2025-06-27 17:17:38,391 customize.py:78 INFO] - 
[2025-06-27 17:17:38,391 customize.py:79 INFO] - Downloading from https://developer.download.nvidia.com/compute/cuda/11.8.0/local_installers/cuda_11.8.0_520.61.05_linux.run
Downloading to /home/mkandes/MLC/repos/local/cache/download-file_cuda-run-file_57785060/cuda_11.8.0_520.61.05_linux.run

Downloaded: 100%
[2025-06-27 17:18:05,937 module.py:5128 INFO] -                  ! cd /home/mkandes/MLC/repos/local/cache/download-file_cuda-run-file_57785060
[2025-06-27 17:18:05,937 module.py:5129 INFO] -                  ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/download-file/run.sh from tmp-run.sh
[2025-06-27 17:18:06,081 module.py:5274 INFO] -                  ! call "postprocess" from /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/download-file/customize.py
[2025-06-27 17:18:06,239 module.py:2166 INFO] -             - cache UID: 57785060e2c8424e
[2025-06-27 17:18:06,253 module.py:5128 INFO] -                ! cd /home/mkandes/MLC/repos/local/cache/install-cuda-prebuilt_0f354f45
[2025-06-27 17:18:06,253 module.py:5129 INFO] -                ! call /home/mkandes/MLC/repos/mlcommons@mlperf-automations/script/install-cuda-prebuilt/run.sh from tmp-run.sh
sudo bash /home/mkandes/MLC/repos/local/cache/download-file_cuda-run-file_57785060/cuda_11.8.0_520.61.05_linux.run --toolkitpath=/home/mkandes/MLC/repos/local/cache/install-cuda-prebuilt_0f354f45/install --defaultroot=/home/mkandes/MLC/repos/local/cache/install-cuda-prebuilt_0f354f45/install --toolkit  --silent --override 
PIN+Yubi:
```

```
[mkandes@exp-7-59 ~]$ pip install mlcflow
Collecting mlcflow
  Using cached mlcflow-1.0.18-py3-none-any.whl.metadata (19 kB)
Requirement already satisfied: requests in /scratch/mkandes/job_40681346/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from mlcflow) (2.32.4)
Requirement already satisfied: pyyaml in /scratch/mkandes/job_40681346/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from mlcflow) (6.0.2)
Collecting giturlparse (from mlcflow)
  Using cached giturlparse-0.12.0-py2.py3-none-any.whl.metadata (4.5 kB)
Collecting colorama (from mlcflow)
  Using cached colorama-0.4.6-py2.py3-none-any.whl.metadata (17 kB)
Requirement already satisfied: charset_normalizer<4,>=2 in /scratch/mkandes/job_40681346/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from requests->mlcflow) (3.4.2)
Requirement already satisfied: idna<4,>=2.5 in /scratch/mkandes/job_40681346/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from requests->mlcflow) (3.10)
Requirement already satisfied: urllib3<3,>=1.21.1 in /scratch/mkandes/job_40681346/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from requests->mlcflow) (2.5.0)
Requirement already satisfied: certifi>=2017.4.17 in /scratch/mkandes/job_40681346/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from requests->mlcflow) (2025.6.15)
Using cached mlcflow-1.0.18-py3-none-any.whl (47 kB)
Using cached colorama-0.4.6-py2.py3-none-any.whl (25 kB)
Using cached giturlparse-0.12.0-py2.py3-none-any.whl (15 kB)
Installing collected packages: giturlparse, colorama, mlcflow
Successfully installed colorama-0.4.6 giturlparse-0.12.0 mlcflow-1.0.18
[mkandes@exp-7-59 ~]$ pip install mlc-scripts
Collecting mlc-scripts
  Using cached mlc_scripts-1.0.2-py3-none-any.whl
Requirement already satisfied: requests in /scratch/mkandes/job_40681346/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from mlc-scripts) (2.32.4)
Requirement already satisfied: pyyaml in /scratch/mkandes/job_40681346/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from mlc-scripts) (6.0.2)
Requirement already satisfied: mlcflow in /scratch/mkandes/job_40681346/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from mlc-scripts) (1.0.18)
Requirement already satisfied: giturlparse in /scratch/mkandes/job_40681346/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from mlc-scripts) (0.12.0)
Requirement already satisfied: colorama in /scratch/mkandes/job_40681346/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from mlcflow->mlc-scripts) (0.4.6)
Requirement already satisfied: charset_normalizer<4,>=2 in /scratch/mkandes/job_40681346/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from requests->mlc-scripts) (3.4.2)
Requirement already satisfied: idna<4,>=2.5 in /scratch/mkandes/job_40681346/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from requests->mlc-scripts) (3.10)
Requirement already satisfied: urllib3<3,>=1.21.1 in /scratch/mkandes/job_40681346/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from requests->mlc-scripts) (2.5.0)
Requirement already satisfied: certifi>=2017.4.17 in /scratch/mkandes/job_40681346/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from requests->mlc-scripts) (2025.6.15)
Installing collected packages: mlc-scripts
Successfully installed mlc-scripts-1.0.2
[mkandes@exp-7-59 ~]$
```

```
[mkandes@exp-7-59 ~]$ which conda
/scratch/mkandes/job_40681573/miniconda3/condabin/conda
[mkandes@exp-7-59 ~]$ pip install mlcflow
Collecting mlcflow
  Downloading mlcflow-1.0.18-py3-none-any.whl.metadata (19 kB)
Requirement already satisfied: requests in /scratch/mkandes/job_40681573/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from mlcflow) (2.32.4)
Requirement already satisfied: pyyaml in /scratch/mkandes/job_40681573/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from mlcflow) (6.0.2)
Collecting giturlparse (from mlcflow)
  Downloading giturlparse-0.12.0-py2.py3-none-any.whl.metadata (4.5 kB)
Collecting colorama (from mlcflow)
  Downloading colorama-0.4.6-py2.py3-none-any.whl.metadata (17 kB)
Requirement already satisfied: charset_normalizer<4,>=2 in /scratch/mkandes/job_40681573/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from requests->mlcflow) (3.4.2)
Requirement already satisfied: idna<4,>=2.5 in /scratch/mkandes/job_40681573/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from requests->mlcflow) (3.10)
Requirement already satisfied: urllib3<3,>=1.21.1 in /scratch/mkandes/job_40681573/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from requests->mlcflow) (2.5.0)
Requirement already satisfied: certifi>=2017.4.17 in /scratch/mkandes/job_40681573/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from requests->mlcflow) (2025.6.15)
Downloading mlcflow-1.0.18-py3-none-any.whl (47 kB)
Downloading colorama-0.4.6-py2.py3-none-any.whl (25 kB)
Downloading giturlparse-0.12.0-py2.py3-none-any.whl (15 kB)
Installing collected packages: giturlparse, colorama, mlcflow
Successfully installed colorama-0.4.6 giturlparse-0.12.0 mlcflow-1.0.18
[mkandes@exp-7-59 ~]$ pip install mlc-scripts
Collecting mlc-scripts
  Downloading mlc_scripts-1.0.2.tar.gz (9.5 kB)
  Installing build dependencies ... done
  Getting requirements to build wheel ... done
  Preparing metadata (pyproject.toml) ... done
Requirement already satisfied: requests in /scratch/mkandes/job_40681573/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from mlc-scripts) (2.32.4)
Requirement already satisfied: pyyaml in /scratch/mkandes/job_40681573/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from mlc-scripts) (6.0.2)
Requirement already satisfied: mlcflow in /scratch/mkandes/job_40681573/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from mlc-scripts) (1.0.18)
Requirement already satisfied: giturlparse in /scratch/mkandes/job_40681573/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from mlc-scripts) (0.12.0)
Requirement already satisfied: colorama in /scratch/mkandes/job_40681573/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from mlcflow->mlc-scripts) (0.4.6)
Requirement already satisfied: charset_normalizer<4,>=2 in /scratch/mkandes/job_40681573/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from requests->mlc-scripts) (3.4.2)
Requirement already satisfied: idna<4,>=2.5 in /scratch/mkandes/job_40681573/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from requests->mlc-scripts) (3.10)
Requirement already satisfied: urllib3<3,>=1.21.1 in /scratch/mkandes/job_40681573/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from requests->mlc-scripts) (2.5.0)
Requirement already satisfied: certifi>=2017.4.17 in /scratch/mkandes/job_40681573/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages (from requests->mlc-scripts) (2025.6.15)
Building wheels for collected packages: mlc-scripts
  Building wheel for mlc-scripts (pyproject.toml) ... done
  Created wheel for mlc-scripts: filename=mlc_scripts-1.0.2-py3-none-any.whl size=10674 sha256=09ba998ea1db8750652067b624ad79e6e6d8736e959aa40d6ccc6de39b6a4ae9
  Stored in directory: /home/mkandes/.cache/pip/wheels/47/08/a4/b9403480a2a6ef73571b25ab2f8a38a262f3573b08185c44ba
Successfully built mlc-scripts
Installing collected packages: mlc-scripts
Successfully installed mlc-scripts-1.0.2
[mkandes@exp-7-59 ~]$ 
```

```
[mkandes@exp-7-59 ~]$ mlcr --help
Traceback (most recent call last):
  File "/scratch/mkandes/job_40681573/miniconda3/envs/mlcflow-dev/bin/mlcr", line 8, in <module>
    sys.exit(mlcr())
  File "/scratch/mkandes/job_40681573/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages/mlc/main.py", line 86, in mlcr
    main()
  File "/scratch/mkandes/job_40681573/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages/mlc/main.py", line 273, in main
    res = method(run_args)
  File "/scratch/mkandes/job_40681573/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages/mlc/script_action.py", line 309, in run
    return self.call_script_module_function("run", run_args)
  File "/scratch/mkandes/job_40681573/miniconda3/envs/mlcflow-dev/lib/python3.9/site-packages/mlc/script_action.py", line 230, in call_script_module_function
    result = automation_instance.run(run_args)  # Pass args to the run method
  File "/home/mkandes/MLC/repos/mlcommons@mlperf-automations/automation/script/module.py", line 227, in run
    r = self._run(i)
  File "/home/mkandes/MLC/repos/mlcommons@mlperf-automations/automation/script/module.py", line 535, in _run
    return utils.call_internal_module(
AttributeError: module 'mlc.utils' has no attribute 'call_internal_module'
[mkandes@exp-7-59 ~]$
```

# Reference(s):
- https://docs.mlcommons.org/mlcflow/
