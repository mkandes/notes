# systemd timers

```
[mkandes@login01 ~]$ cat /etc/cron.allow
cw3eml
cw3eprod
mulroony
sroj
xgalaxy
[mkandes@login01 ~]$
```

```
[mkandes@login01 ~]$ cat .config/systemd/user/get-batch-scripts.service 
[Unit]
Description="Get batch scripts for all new jobs in Slurm queue"

[Service]
ExecStart=%h/scripts/get-batch-scripts.sh
[mkandes@login01 ~]$ cat .config/systemd/user/get-batch-scripts.timer
[Unit]
Description="Run get-batch-scipts.service every 2 minutes"

[Timer]
OnCalendar=*-*-* *:0/2:00
Unit=get-batch-scripts.service

[Install]
WantedBy=timers.target
[mkandes@login01 ~]$
```

```
[mkandes@login01 ~]$ systemd-analyze verify .config/systemd/user/get-batch-scripts.*
/usr/lib/systemd/system/rdma-ndd.service:25: Unknown lvalue 'ProtectHostname' in section 'Service'
/usr/lib/systemd/system/rdma-ndd.service:26: Unknown lvalue 'ProtectKernelLogs' in section 'Service'
[mkandes@login01 ~]$
```

```
[mkandes@login01 ~]$ systemctl --user enable get-batch-scripts.timer
Created symlink /home/mkandes/.config/systemd/user/timers.target.wants/get-batch-scripts.timer → /home/mkandes/.config/systemd/user/get-batch-scripts.timer.
[mkandes@login01 ~]$ systemctl --user start get-batch-scripts.timer
[mkandes@login01 ~]$ systemctl --user status get-batch-scripts.timer
● get-batch-scripts.timer - "Run get-batch-scipts.service every 2 minutes"
   Loaded: loaded (/home/mkandes/.config/systemd/user/get-batch-scripts.timer; >
   Active: active (waiting) since Thu 2025-10-09 09:35:58 PDT; 20s ago
  Trigger: Thu 2025-10-09 09:38:00 PDT; 1min 41s left

Oct 09 09:35:58 login01 systemd[115983]: Started "Run get-batch-scipts.service
```

```
[mkandes@login01 ~]$ systemctl --user start get-batch-scripts.timer
Warning: The unit file, source configuration file or drop-ins of get-batch-scripts.timer changed on disk. Run 'systemctl --user daemon-reload' to reload units.
[mkandes@login01 ~]$ systemctl --user daemon-reload
[mkandes@login01 ~]$ systemctl --user start get-batch-scripts.timer
[mkandes@login01 ~]$ systemctl --user status get-batch-scripts.timer
● get-batch-scripts.timer - "Run get-batch-scripts.service every 2 minutes"
   Loaded: loaded (/home/mkandes/.config/systemd/user/get-batch-scripts.timer; >
   Active: active (running) since Thu 2025-10-09 09:43:38 PDT; 24s ago
  Trigger: n/a

Oct 09 09:43:38 login01 systemd[115983]: Started "Run get-batch-scipts.service 
```

```
[mkandes@login01 ~]$ journalctl --user -u get-batch-scripts.*
-- Logs begin at Thu 2025-10-09 07:25:25 PDT, end at Thu 2025-10-09 09:45:58 PDT. --
Oct 09 09:35:58 login01 systemd[115983]: Started "Run get-batch-scipts.service every 2 minutes".
Oct 09 09:36:03 login01 systemd[115983]: Started "Get batch scripts for all new jobs in Slurm queue".
Oct 09 09:36:03 login01 systemd[115983]: get-batch-scripts.service: Main process exited, code=exited, status=127/n/a
Oct 09 09:36:03 login01 systemd[115983]: get-batch-scripts.service: Failed with result 'exit-code'.
Oct 09 09:38:00 login01 systemd[115983]: Started "Get batch scripts for all new jobs in Slurm queue".
Oct 09 09:38:00 login01 systemd[115983]: get-batch-scripts.service: Main process exited, code=exited, status=127/n/a
Oct 09 09:38:00 login01 systemd[115983]: get-batch-scripts.service: Failed with result 'exit-code'.
Oct 09 09:38:27 login01 systemd[115983]: Stopped "Run get-batch-scipts.service every 2 minutes".
Oct 09 09:43:38 login01 systemd[115983]: Started "Run get-batch-scipts.service every 2 minutes".
Oct 09 09:43:38 login01 systemd[115983]: Started "Get batch scripts for all new jobs in Slurm queue".
Oct 09 09:43:38 login01 systemd[115983]: get-batch-scripts.service: Main process exited, code=exited, status=127/n/a
Oct 09 09:43:38 login01 systemd[115983]: get-batch-scripts.service: Failed with result 'exit-code'.
Oct 09 09:44:02 login01 systemd[115983]: Started "Get batch scripts for all new jobs in Slurm queue".
Oct 09 09:44:02 login01 systemd[115983]: get-batch-scripts.service: Main process exited, code=exited, status=127/n/a
Oct 09 09:44:02 login01 systemd[115983]: get-batch-scripts.service: Failed with result 'exit-code'.
Oct 09 09:45:58 login01 systemd[115983]: Stopped "Run get-batch-scripts.service every 2 minutes".
[mkandes@login01 ~]$
```

```
[mkandes@login01 ~]$ systemctl --user show-environment
DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/501506/bus
HOME=/home/mkandes
LANG=en_US.UTF-8
LOGNAME=mkandes
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin
SHELL=/bin/bash
USER=mkandes
XDG_RUNTIME_DIR=/run/user/501506
[mkandes@login01 ~]$q
```


# Reference(s):
- https://wiki.archlinux.org/title/Systemd/Timers
- https://documentation.suse.com/smart/systems-management/html/systemd-working-with-timers/index.html
- https://fedoramagazine.org/systemd-timers-for-scheduling-tasks/
