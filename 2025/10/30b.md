# Continue the development of headless VNC containers

Let's now try and separate out noVNC and TigerVNC into separate, but dependent containers. e.g., I think we should be able to also run TigerVNC within a Singularity container and connect the client via SSH like we did directly to the VM and the process should still be exposed on the VM --- albiet now containerized.

```
ubuntu@container-builder:~/naked-singularity/definition-files/ubuntu$ sudo singularity build --sandbox test ubuntu-22.04-x86_64.sif 
INFO:    Starting build...
INFO:    Verifying bootstrap image ubuntu-22.04-x86_64.sif
WARNING: integrity: signature not found for object group 1
WARNING: Bootstrap image could not be verified, but build will continue.
INFO:    Creating sandbox directory...
INFO:    Build complete: test
ubuntu@container-builder:~/naked-singularity/definition-files/ubuntu$
```

```
ubuntu@container-builder:~/naked-singularity/definition-files$ mkdir tigervnc
ubuntu@container-builder:~/naked-singularity/definition-files$ cd tigervnc/
ubuntu@container-builder:~/naked-singularity/definition-files/tigervnc$ cp ../novnc/Singularity.novnc-1.6-ubuntu-22.04-x86_64 ./
ubuntu@container-builder:~/naked-singularity/definition-files/tigervnc$ apt-cache search tigervnc
tigervnc-common - Virtual network computing; Common software needed by servers
tigervnc-scraping-server - Virtual network computing server performing X screen scraping
tigervnc-standalone-server - Standalone virtual network computing server
tigervnc-tools - Virtual network computing; Tools for both clients and servers
tigervnc-viewer - Virtual network computing client for X
tigervnc-xorg-extension - Virtual network computing X server extension
ubuntu@container-builder:~/naked-singularity/definition-files/tigervnc$ apt show -a tigervnc-standalone-server
Package: tigervnc-standalone-server
Version: 1.12.0+dfsg-4ubuntu0.22.04.1
Priority: optional
Section: universe/x11
Source: tigervnc
Origin: Ubuntu
Maintainer: Ubuntu Developers <ubuntu-devel-discuss@lists.ubuntu.com>
Original-Maintainer: TigerVNC Packaging Team <pkg-tigervnc-devel@lists.alioth.debian.org>
Bugs: https://bugs.launchpad.net/ubuntu/+filebug
Installed-Size: 2874 kB
Provides: vnc-server, xserver
Depends: xkb-data, x11-xkb-utils, xauth, tigervnc-common (= 1.12.0+dfsg-4ubuntu0.22.04.1), libaudit1 (>= 1:2.2.1), libbsd0 (>= 0.2.0), libc6 (>= 2.35), libgcc-s1 (>= 3.3.1), libgcrypt20 (>= 1.9.0), libgl1, libgnutls30 (>= 3.7.2), libjpeg8 (>= 8c), libpam0g (>= 0.99.7.1), libpixman-1-0 (>= 0.30.0), libselinux1 (>= 3.1~), libstdc++6 (>= 5.2), libsystemd0, libunwind8, libxau6 (>= 1:1.0.9), libxdmcp6, libxfont2 (>= 1:2.0.1), zlib1g (>= 1:1.1.4), perl:any, libfile-readbackwards-perl (>= 1.05)
Recommends: tigervnc-tools (= 1.12.0+dfsg-4ubuntu0.22.04.1), libgl1-mesa-dri (>= 7.1~rc1), xfonts-base, x11-xserver-utils
Suggests: xfonts-100dpi | xfonts-75dpi, xfonts-scalable, openssl
Homepage: http://www.tigervnc.org
Download-Size: 1138 kB
APT-Sources: http://nova.clouds.archive.ubuntu.com/ubuntu jammy-updates/universe amd64 Packages
Description: Standalone virtual network computing server
 VNC stands for Virtual Network Computing. It is, in essence, a remote display
 system that allows you to view a computing `desktop' environment not only on
 the machine where it is running but from anywhere on the Internet and from a
 wide variety of machine architectures. For this purpose, it implements a
 client/server model.
 .
 This package provides a standalone VNC server to which clients can connect.
 The server generates a display that can be viewed with a vncviewer.
 .
 Note: This server does not need a display. You need a VNC viewer to see
 something. This viewer may also be on a computer running other operating
 systems.

Package: tigervnc-standalone-server
Version: 1.12.0+dfsg-4
Priority: optional
Section: universe/x11
Source: tigervnc
Origin: Ubuntu
Maintainer: Ubuntu Developers <ubuntu-devel-discuss@lists.ubuntu.com>
Original-Maintainer: TigerVNC Packaging Team <pkg-tigervnc-devel@lists.alioth.debian.org>
Bugs: https://bugs.launchpad.net/ubuntu/+filebug
Installed-Size: 2874 kB
Provides: vnc-server, xserver
Depends: xkb-data, x11-xkb-utils, xauth, tigervnc-common (= 1.12.0+dfsg-4), libaudit1 (>= 1:2.2.1), libbsd0 (>= 0.2.0), libc6 (>= 2.35), libgcc-s1 (>= 3.3.1), libgcrypt20 (>= 1.9.0), libgl1, libgnutls30 (>= 3.7.2), libjpeg8 (>= 8c), libpam0g (>= 0.99.7.1), libpixman-1-0 (>= 0.30.0), libselinux1 (>= 3.1~), libstdc++6 (>= 5.2), libsystemd0, libunwind8, libxau6 (>= 1:1.0.9), libxdmcp6, libxfont2 (>= 1:2.0.1), zlib1g (>= 1:1.1.4), perl:any, libfile-readbackwards-perl (>= 1.05)
Recommends: tigervnc-tools (= 1.12.0+dfsg-4), libgl1-mesa-dri (>= 7.1~rc1), xfonts-base, x11-xserver-utils
Suggests: xfonts-100dpi | xfonts-75dpi, xfonts-scalable, openssl
Homepage: http://www.tigervnc.org
Download-Size: 1138 kB
APT-Sources: http://nova.clouds.archive.ubuntu.com/ubuntu jammy/universe amd64 Packages
Description: Standalone virtual network computing server
 VNC stands for Virtual Network Computing. It is, in essence, a remote display
 system that allows you to view a computing `desktop' environment not only on
 the machine where it is running but from anywhere on the Internet and from a
 wide variety of machine architectures. For this purpose, it implements a
 client/server model.
 .
 This package provides a standalone VNC server to which clients can connect.
 The server generates a display that can be viewed with a vncviewer.
 .
 Note: This server does not need a display. You need a VNC viewer to see
 something. This viewer may also be on a computer running other operating
 systems.

ubuntu@container-builder:~/naked-singularity/definition-files/tigervnc$
```

```
ubuntu@container-builder:~/naked-singularity/definition-files/tigervnc$ ls
Singularity.novnc-1.6-ubuntu-22.04-x86_64
ubuntu@container-builder:~/naked-singularity/definition-files/tigervnc$ mv Singularity.novnc-1.6-ubuntu-22.04-x86_64 Singularity.tigervnc-1.12-ubuntu-22.04-x86_64 
ubuntu@container-builder:~/naked-singularity/definition-files/tigervnc$ ls
Singularity.tigervnc-1.12-ubuntu-22.04-x86_64
ubuntu@container-builder:~/naked-singularity/definition-files/tigervnc$
```

# Reference(s):
- https://github.com/ConSol/docker-headless-vnc-container
- https://github.com/accetto/ubuntu-vnc-xfce-g3
- https://tigervnc.org/
- https://novnc.com/
- https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-vnc-on-ubuntu-22-04
- https://docs.jetstream-cloud.org/ui/exo/gpu-desktop/
- https://www.cyberciti.biz/faq/install-and-configure-tigervnc-server-on-ubuntu-18-04/
- https://askubuntu.com/questions/1375111/vncserver-exited-too-early
- https://www.digitalocean.com/community/tutorials/how-to-remotely-access-gui-applications-using-docker-and-caddy-on-debian-9
