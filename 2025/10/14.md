# How to create a `shared` group directory

```
[mkandes@login02 ~]$ mkdir /expanse/lustre/projects/use300/mkandes/shared
[mkandes@login02 ~]$ ls -lahtr /expanse/lustre/projects/use300/mkandes/shared
total 130K
drwxr-s--- 9 mkandes use300 74K Oct 14 19:18 ..
drwxr-sr-x 2 mkandes use300 56K Oct 14 19:18 .
[mkandes@login02 ~]$ chmod -R g+rwx /expanse/lustre/projects/use300/mkandes/shared
[mkandes@login02 ~]$ chmod -R o-rwx /expanse/lustre/projects/use300/mkandes/shared
[mkandes@login02 ~]$ ls -lahtr /expanse/lustre/projects/use300/mkandes/shared
total 130K
drwxr-s--- 9 mkandes use300 74K Oct 14 19:18 ..
drwxrws--- 2 mkandes use300 56K Oct 14 19:18 .
[mkandes@login02 ~]$
```

```
[mkandes@login02 ~]$ chmod -R g+s /expanse/lustre/projects/use300/mkandes/shared 
[mkandes@login02 ~]$ ls -lahtr /expanse/lustre/projects/use300/mkandes/shared
total 130K
drwxr-s--- 9 mkandes use300 74K Oct 14 19:18 ..
drwxrws--- 2 mkandes use300 56K Oct 14 19:18 .
[mkandes@login02 ~]$
```

```
[mkandes@login02 ~]$ setfacl -d -m g:use300:rwx /expanse/lustre/projects/use300/mkandes/shared 
[mkandes@login02 ~]$ setfacl -d -m o::--- /expanse/lustre/projects/use300/mkandes/shared
[mkandes@login02 ~]$ getfacl /expanse/lustre/projects/use300/mkandes/shared
getfacl: Removing leading '/' from absolute path names
# file: expanse/lustre/projects/use300/mkandes/shared
# owner: mkandes
# group: use300
# flags: -s-
user::rwx
group::rwx
other::---
default:user::rwx
default:group::rwx
default:group:use300:rwx
default:mask::rwx
default:other::---

[mkandes@login02 ~]$
```

```
[jpg@login02 mkandes]$ cd shared/
[jpg@login02 shared]$ ls
[jpg@login02 shared]$ touch jpgfile
[jpg@login02 shared]$ mkdir jpgdir
[jpg@login02 shared]$ cd jpgdir/
[jpg@login02 jpgdir]$ touch jpgfile2
[jpg@login02 jpgdir]$ ls
jpgfile2
[jpg@login02 jpgdir]$ ls -lahtr
total 113K
drwxrws---+ 3 mkandes use300 56K Oct 14 19:27 ..
-rw-rw----+ 1 jpg     use300   0 Oct 14 19:27 jpgfile2
drwxrws---+ 2 jpg     use300 56K Oct 14 19:27 .
[jpg@login02 jpgdir]$ cd ../
[jpg@login02 shared]$ ls
jpgdir  jpgfile
[jpg@login02 shared]$ ls -lahtr
total 186K
drwxr-s---  9 mkandes use300 74K Oct 14 19:18 ..
-rw-rw----+ 1 jpg     use300   0 Oct 14 19:27 jpgfile
drwxrws---+ 3 mkandes use300 56K Oct 14 19:27 .
drwxrws---+ 2 jpg     use300 56K Oct 14 19:27 jpgdir
[jpg@login02 shared]$ pwd
/expanse/lustre/projects/use300/mkandes/shared
[jpg@login02 shared]$
```

```
[mkandes@login02 ~]$ cd /expanse/lustre/projects/use300/mkandes/shared/
[mkandes@login02 shared]$ ls
jpgdir  jpgfile
[mkandes@login02 shared]$ ls -lahtr
total 186K
drwxr-s---  9 mkandes use300 74K Oct 14 19:18 ..
-rw-rw----+ 1 jpg     use300   0 Oct 14 19:27 jpgfile
drwxrws---+ 3 mkandes use300 56K Oct 14 19:27 .
drwxrws---+ 2 jpg     use300 56K Oct 14 19:27 jpgdir
[mkandes@login02 shared]$ rm jpgfile 
[mkandes@login02 shared]$ cd jpgdir/
[mkandes@login02 jpgdir]$ ls
jpgfile2
[mkandes@login02 jpgdir]$ rm jpgfile2 
[mkandes@login02 jpgdir]$ ls
[mkandes@login02 jpgdir]$ cd ../
[mkandes@login02 shared]$ ls
jpgdir
[mkandes@login02 shared]$ rm jpgdir/
rm: cannot remove 'jpgdir/': Is a directory
[mkandes@login02 shared]$ rmdir jpgdir/
[mkandes@login02 shared]$ ls
[mkandes@login02 shared]$
```

```
[jpg@login02 shared]$ mkdir jpgdir2
[jpg@login02 shared]$ cd jpgdir2/
[jpg@login02 jpgdir2]$ ls
[jpg@login02 jpgdir2]$ touch jpgfile3
[jpg@login02 jpgdir2]$ ls
jpgfile3
[jpg@login02 jpgdir2]$ pwd
/expanse/lustre/projects/use300/mkandes/shared/jpgdir2
[jpg@login02 jpgdir2]$
```

```
[nickel@login02 ~]$ cd /expanse/lustre/projects/use300/mkandes/shared
[nickel@login02 shared]$ ls
jpgdir2
[nickel@login02 shared]$ mkdir nikdir1
[nickel@login02 shared]$ cd nikdir1/
[nickel@login02 nikdir1]$ touch nikfile1
[nickel@login02 nikdir1]$ ls
nikfile1
[nickel@login02 nikdir1]$ cd ../jpgdir2/
[nickel@login02 jpgdir2]$ ls
jpgfile3
[nickel@login02 jpgdir2]$ ls -lahtr
total 113K
-rw-rw----+ 1 jpg     use300   0 Oct 14 19:29 jpgfile3
drwxrws---+ 2 jpg     use300 56K Oct 14 19:29 .
drwxrws---+ 4 mkandes use300 56K Oct 14 19:34 ..
[nickel@login02 jpgdir2]$ cd ../
[nickel@login02 shared]$ ls
jpgdir2  nikdir1
[nickel@login02 shared]$ rm -rf jpgdir2/
[nickel@login02 shared]$ ls
nikdir1
[nickel@login02 shared]$
```

```
[mkandes@login02 shared]$ ls -lahtr
total 186K
drwxr-s---  9 mkandes use300 74K Oct 14 19:18 ..
drwxrws---+ 2 nickel  use300 56K Oct 14 19:34 nikdir1
drwxrws---+ 3 mkandes use300 56K Oct 14 19:34 .
[mkandes@login02 shared]$ rm -rf nikdir1/
[mkandes@login02 shared]$ ls -lahtr
total 130K
drwxr-s---  9 mkandes use300 74K Oct 14 19:18 ..
drwxrws---+ 2 mkandes use300 56K Oct 14 19:35 .
[mkandes@login02 shared]$
```

```
[mkandes_test@login02]~% cd /expanse/lustre/projects/use300/mkandes/shared
cd: permission denied: /expanse/lustre/projects/use300/mkandes/shared
[mkandes_test@login02]~% ls
[mkandes_test@login02]~% cd /expanse/lustre/projects/use300/mkandes/      
cd: permission denied: /expanse/lustre/projects/use300/mkandes/
[mkandes_test@login02]~% cd /expanse/lustre/projects/use300/        
[mkandes_test@login02]/expanse/lustre/projects/use300%
```
