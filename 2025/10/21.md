# Creating headless VNC containers

```
## correct forwarding of shutdown signal
cleanup () {
    kill -s SIGTERM $!
    exit 0
}
trap cleanup SIGINT SIGTERM
```

```
Singularity> lsof -i -n
COMMAND    PID   USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
python3 130583 ubuntu    3u  IPv4 524427      0t0  TCP *:6901 (LISTEN)
Singularity> 
```

```
Singularity> ps aux | grep Xorg
ubuntu    131150  0.0  0.0   6480  2304 pts/2    S+   01:55   0:00 grep Xorg
Singularity>
```

```
Singularity> Xtigervnc $DISPLAY -depth $VNC_COL_DEPTH -geometry $VNC_RESOLUTION PasswordFile=$HOME/.config/tigervnc/passwd

Xvnc TigerVNC 1.15.0 - built Feb 16 2025 03:55:40
Copyright (C) 1999-2025 TigerVNC team and many others (see README.rst)
See https://www.tigervnc.org for information on TigerVNC.
Underlying X server release 12101004

_XSERVTransmkdir: ERROR: euid != 0,directory /tmp/.X11-unix will not be created.
Could not find any available render nodes
Failed to initialize DRI3 extension

Wed Oct 29 02:23:58 2025
 vncext:      VNC extension running!
 vncext:      Listening for VNC connections on all interface(s), port 5901
 vncext:      Created VNC server for screen 0
[mi] mieq: warning: overriding existing handler (nil) with 0x5b165253ff70 for event 2
[mi] mieq: warning: overriding existing handler (nil) with 0x5b165253ff70 for event 3

Wed Oct 29 02:25:03 2025
 Connections: Accepted: 127.0.0.1::59522
 SConnection: Client needs protocol version 3.8
 SConnection: Client requests security type VeNCrypt(19)
 SVeNCrypt:   Client requests security type VncAuth (2)
 VNCSConnST:  Server default pixel format depth 24 (32bpp) little-endian rgb888
 VNCSConnST:  Client pixel format depth 24 (32bpp) little-endian bgr888

Wed Oct 29 02:25:17 2025
 VNCSConnST:  Closing 127.0.0.1::59522: Clean disconnection
 EncodeManager: Framebuffer updates: 2
 EncodeManager:   Tight:
 EncodeManager:     Solid: 1 rects, 2.28 Mpixels
 EncodeManager:            16 B (1:570001 ratio)
 EncodeManager:   Total: 1 rects, 2.28 Mpixels
 EncodeManager:          16 B (1:570001 ratio)
 Connections: Closed: 127.0.0.1::59522
 ComparingUpdateTracker: 0 pixels in / 0 pixels out
 ComparingUpdateTracker: (1:-nan ratio)
 Connections: Accepted: 127.0.0.1::57510
 SConnection: Client needs protocol version 3.8
 SConnection: Client requests security type VeNCrypt(19)
 SVeNCrypt:   Client requests security type VncAuth (2)
 VNCSConnST:  Server default pixel format depth 24 (32bpp) little-endian rgb888
 VNCSConnST:  Client pixel format depth 24 (32bpp) little-endian bgr888

Wed Oct 29 02:25:28 2025
 VNCSConnST:  Closing 127.0.0.1::57510: Clean disconnection
 EncodeManager: Framebuffer updates: 2
 EncodeManager:   Tight:
 EncodeManager:     Solid: 1 rects, 2.28 Mpixels
 EncodeManager:            16 B (1:570001 ratio)
 EncodeManager:   Total: 1 rects, 2.28 Mpixels
 EncodeManager:          16 B (1:570001 ratio)
 Connections: Closed: 127.0.0.1::57510
 ComparingUpdateTracker: 0 pixels in / 0 pixels out
 ComparingUpdateTracker: (1:-nan ratio)
 Connections: Accepted: 127.0.0.1::50690
 SConnection: Client needs protocol version 3.8
 SConnection: Client requests security type VeNCrypt(19)
 SVeNCrypt:   Client requests security type VncAuth (2)

Wed Oct 29 02:25:37 2025
 VNCSConnST:  Server default pixel format depth 24 (32bpp) little-endian rgb888
 VNCSConnST:  Client pixel format depth 24 (32bpp) little-endian bgr888
```

# Reference(s):
- https://github.com/ConSol/docker-headless-vnc-container
- https://github.com/accetto/ubuntu-vnc-xfce-g3
- https://tigervnc.org/
- https://novnc.com
- https://husarnet.com/blog/remote-desktop-over-internet
