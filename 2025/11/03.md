# Headless VNC containers

```
ubuntu@container-builder:~/naked-singularity/definition-files/tigervnc$ singularity shell tigervnc-1.12-ubuntu-22.04-amd64.sif 
Singularity> vncpasswd
Password:
Verify:
Would you like to enter a view-only password (y/n)? n
A view-only password is not used
Singularity>
```

```
Singularity> vi ~/.vnc/xstartup
Singularity> cat ~/.vnc/xstartup 
#!/bin/sh
[ -x /etc/vnc/xstartup ] && exec /etc/vnc/xstartup
[ -r $HOME/.Xresources ] && xrdb $HOME/.Xresources
vncconfig -iconic &
dbus-launch --exit-with-session startxfce4
Singularity> vncserver -localhost -geometry 800x600 -depth 32
/usr/bin/xauth:  file /home/ubuntu/.Xauthority does not exist

New Xtigervnc server 'container-builder.js2local:1 (ubuntu)' on port 5901 for display :1.
Use xtigervncviewer -SecurityTypes VncAuth -passwd /home/ubuntu/.vnc/passwd :1 to connect to the VNC server.

vncserver: Can't exec '/home/ubuntu/.vnc/xstartup': Permission denied

=================== tail /home/ubuntu/.vnc/container-builder.js2local:5901.log ===================
Can't exec "/home/ubuntu/.vnc/xstartup": Permission denied at /usr/share/perl5/TigerVNC/Wrapper.pm line 1237.
==================================================================================================

Session startup via '/home/ubuntu/.vnc/xstartup' exited with status 1!

Maybe try something simple first, e.g.,
	tigervncserver -xstartup /usr/bin/xterm
The X session exited with status 1!
Killing Xtigervnc process ID 1486... success!
Singularity> chmod +x ~/.vnc/xstartup 
Singularity> vncserver -localhost -geometry 800x600 -depth 32

New Xtigervnc server 'container-builder.js2local:1 (ubuntu)' on port 5901 for display :1.
Use xtigervncviewer -SecurityTypes VncAuth -passwd /home/ubuntu/.vnc/passwd :1 to connect to the VNC server.

Singularity>
```

# Reference(s):
- https://github.com/ConSol/docker-headless-vnc-container
- https://github.com/accetto/ubuntu-vnc-xfce-g3
- https://tigervnc.org/
- https://novnc.com/
- https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-vnc-on-ubuntu-22-04
- https://docs.jetstream-cloud.org/ui/exo/gpu-desktop/
- https://www.cyberciti.biz/faq/install-and-configure-tigervnc-server-on-ubuntu-18-04/
- https://askubuntu.com/questions/1375111/vncserver-exited-too-early
- https://www.digitalocean.com/community/tutorials/how-to-remotely-access-gui-applications-using-docker-and-caddy-on-debian-9
