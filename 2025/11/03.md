# Headless VNC containers on Expanse

```
[mkandes@login02 ~]$ srun --partition=gpu-debug  --pty --account=use300 --nodes=1 --ntasks-per-node=10 --mem=92G --gpus=1 --time=00:30:00 --wait=0 --export=ALL /bin/bash
srun: job 43870206 queued and waiting for resources
srun: job 43870206 has been allocated resources
[mkandes@exp-7-59 ~]$
```

```
[mkandes@exp-7-59 ~]$ module load singularitypro/4.1.2 
[mkandes@exp-7-59 ~]$ singularity shell oras://ghcr.io/mkandes/tigervnc:latest-amd64
INFO:    Downloading oras image
558.8MiB / 558.8MiB [======================================] 100 % 58.9 MiB/s 0s
Singularity>
```

```
Singularity> vncpasswd
Password:
Verify:
Would you like to enter a view-only password (y/n)? n
A view-only password is not used
Singularity>
```

```
Singularity> vi ~/.vnc/xstartup
Singularity> cat ~/.vnc/xstartup 
#!/bin/sh
[ -x /etc/vnc/xstartup ] && exec /etc/vnc/xstartup
[ -r $HOME/.Xresources ] && xrdb $HOME/.Xresources
vncconfig -iconic &
dbus-launch --exit-with-session startxfce4
Singularity> chmod +x ~/.vnc/xstartup 
Singularity> vncserver -localhost -geometry 800x600 -depth 32

New Xtigervnc server 'container-builder.js2local:1 (ubuntu)' on port 5901 for display :1.
Use xtigervncviewer -SecurityTypes VncAuth -passwd /home/ubuntu/.vnc/passwd :1 to connect to the VNC server.

Singularity>
```

# Reference(s):
- https://github.com/ConSol/docker-headless-vnc-container
- https://github.com/accetto/ubuntu-vnc-xfce-g3
- https://tigervnc.org/
- https://novnc.com/
- https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-vnc-on-ubuntu-22-04
- https://docs.jetstream-cloud.org/ui/exo/gpu-desktop/
- https://www.cyberciti.biz/faq/install-and-configure-tigervnc-server-on-ubuntu-18-04/
- https://askubuntu.com/questions/1375111/vncserver-exited-too-early
- https://www.digitalocean.com/community/tutorials/how-to-remotely-access-gui-applications-using-docker-and-caddy-on-debian-9
