# Spack Mirrors + Build Caches

https://spack.readthedocs.io/en/latest/getting_started.html#gpg-signing

```
[mkandes@login02 gpu]$ spack gpg --help
usage: spack gpg [-h] SUBCOMMAND ...

handle GPG actions for spack

positional arguments:
  SUBCOMMAND  GPG sub-commands
    verify    verify a signed package
    trust     add a key to the keyring
    untrust   remove a key from the keyring
    sign      sign a package
    create    create a new key
    list      list keys available in the keyring
    init      add the default keys to the keyring
    export    export a gpg key, optionally including secret key
    publish   publish public keys to a build cache

optional arguments:
  -h, --help  show this help message and exit
[mkandes@login02 gpu]$
```

```
[mkandes@login02 gpu]$ spack gpg list
/home/mkandes/software/spack/repos/sdsc/gpu/opt/spack/gpg/pubring.kbx
---------------------------------------------------------------------
pub   rsa4096 2025-03-20 [SC]
      5B737A328D3C6BD3CE5079460FC7AA49516DF6F2
uid           [ultimate] martyk (GPG created for Spack) <mkandes@sdsc.edu>

[mkandes@login02 gpu]$
```

```
[mkandes@login02 cpu]$ spack gpg list
gpg: keybox '/home/mkandes/software/spack/repos/sdsc/cpu/opt/spack/gpg/pubring.kbx' created
gpg: /home/mkandes/software/spack/repos/sdsc/cpu/opt/spack/gpg/trustdb.gpg: trustdb created
[mkandes@login02 cpu]$
```

```
[mkandes@login02 gpu]$ spack gpg create --help
usage: spack gpg create [-h] [--comment COMMENT] [--expires EXPIRATION]
                        [--export DEST] [--export-secret DEST]
                        name email

positional arguments:
  name                  the name to use for the new key
  email                 the email address to use for the new key

optional arguments:
  --comment COMMENT     a description for the intended use of the key
  --expires EXPIRATION  when the key should expire
  --export DEST         export the public key to a file
  --export-secret DEST  export the private key to a file
  -h, --help            show this help message and exit
[mkandes@login02 gpu]$
```

https://spack.readthedocs.io/en/latest/mirrors.html#mirrors-mirrors-yaml

```
[mkandes@login02 opt]$ spack mirror --help
usage: spack mirror [-hn] [--deprecated] SUBCOMMAND ...

manage mirrors (source and binary)

positional arguments:
  SUBCOMMAND
    create           create a directory to be used as a spack mirror, and fill it with package archives
    destroy          given a url, recursively delete everything under it
    add              add a mirror to Spack
    remove (rm)      remove a mirror by name
    set-url          change the URL of a mirror
    set              configure the connection details of a mirror
    list             print out available mirrors to the console

optional arguments:
  --deprecated       fetch deprecated versions without warning
  -h, --help         show this help message and exit
  -n, --no-checksum  do not use checksums to verify downloaded files (unsafe)
[mkandes@login02 opt]$
```

```
[mkandes@login02 spack]$ spack mirror create -a -d mirror/
==> No safe (checksummed) versions for package apple-libunwind
==> No safe (checksummed) versions for package c
==> No safe (checksummed) versions for package cxx
==> No safe (checksummed) versions for package fj
==> No safe (checksummed) versions for package fortran
==> No safe (checksummed) versions for package fujitsu-mpi
==> No safe (checksummed) versions for package fujitsu-ssl2
==> No safe (checksummed) versions for package hpcx-mpi
==> No safe (checksummed) versions for package ibm-java
==> No safe (checksummed) versions for package idl
==> No safe (checksummed) versions for package influxdb
==> No safe (checksummed) versions for package openglu
==> No safe (checksummed) versions for package xlc
==> No safe (checksummed) versions for package xlf
==> Adding package 3dtk@1.2 to mirror
==> Warning: Error while fetching 3dtk@1.2
  All fetchers failed for spack-stage-3dtk-1.2-b47jrjhptvfvoupl2tksaw7r7unge23k
==> Adding package 3dtk@trunk to mirror
==> Warning: Error while fetching 3dtk@trunk
  All fetchers failed for spack-stage-3dtk-trunk-ttveetah67e7n7tt6ybkntedye4v5db3
==> Adding package 3proxy@0.8.11 to mirror
==> Fetching https://mirror.spack.io/_source-cache/archive/fc/fc4295e1a462baa61977fcc21747db7861c4e3d0dcca86cbaa3e06017e5c66c9.tar.gz
==> Adding package 3proxy@0.8.12 to mirror
==> Fetching https://mirror.spack.io/_source-cache/archive/c2/c2ad3798b4f0df06cfcc7b49f658304e451d60e4834e2705ef83ddb85a03f849.tar.gz
==> Adding package 3proxy@0.8.13 to mirror
==> Fetching https://mirror.spack.io/_source-cache/archive/a6/a6d3cf9dd264315fa6ec848f6fe6c9057db005ce4ca8ed1deb00f6e1c3900f88.tar.gz
==> Adding package 7zip@21.07 to mirror
==> Fetching https://mirror.spack.io/_source-cache/archive/21/213d594407cb8efcba36610b152ca4921eda14163310b43903d13e68313e1e39.tar.xz
==> Adding package abacus@2.2.0 to mirror
==> Fetching https://mirror.spack.io/_source-cache/archive/09/09d4a2508d903121d29813a85791eeb3a905acbe1c5664b8a88903f8eda64b8f.tar.gz
==> Adding package abacus@2.2.1 to mirror
==> Fetching https://mirror.spack.io/_source-cache/archive/14/14feca1d8d1ce025d3f263b85ebfbebc1a1efff704b6490e95b07603c55c1d63.tar.gz
==> Adding package abacus@2.2.2 to mirror
==> Fetching https://mirror.spack.io/_source-cache/archive/4a/4a7cf2ec6e43dd5c53d5f877a941367074f4714d93c1977a719782957916169e.tar.gz
```


https://spack-tutorial.readthedocs.io/en/latest/tutorial_binary_cache.html#binary-caches-tutorial

https://spack.readthedocs.io/en/latest/signing.html#build-cache-format
