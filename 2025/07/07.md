# How to install and test new Spack package prior to production deployment

In this example, we will consider the installation of the OneAPI compiler package in the spack/0.21.2/cpu/dev instance, which is already deployed on Expanse.

```
[mkandes@login02 ~]$ ls /cm/shared/apps/spack/0.21.2/cpu/dev/
bin           COPYRIGHT  LICENSE-APACHE  opt             README.md    var
CHANGELOG.md  etc        LICENSE-MIT     pyproject.toml  SECURITY.md
CITATION.cff  lib        NOTICE          pytest.ini      share
[mkandes@login02 training-accounts]$
```

Reset your *_test user account before testing new package install.

```
[mkandes@login02 training-accounts]$ ./reset-home-dirs.sh 
Check if there exists a HOME directory for username mkandes_test ...
/home/mkandes_test exists.
Reset /home/mkandes_test ...
Remove all regular directories ...
PIN+Yubi: 
No regular directories found.
Remove all regular files ...
No regular files found.
Remove all hidden directories ...
.ssh/
Copy /etc/skel files to /home/mkandes_test ...
.bash_logout
.bash_profile
.bashrc
.emacs
.kshrc
.zshrc
/home/mkandes_test has been reset successfully.
[mkandes@login02 training-accounts]$
```

Login to your *_test account.

```
[mkandes@login02 ~]$ sudo -u mkandes_test ssh login02
Welcome to Bright release         9.0

                                                         Based on Rocky Linux 8
                                                                    ID: #000002

--------------------------------------------------------------------------------

                                 WELCOME TO
                  _______  __ ____  ___    _   _______ ______
                 / ____/ |/ // __ \/   |  / | / / ___// ____/
                / __/  |   // /_/ / /| | /  |/ /\__ \/ __/
               / /___ /   |/ ____/ ___ |/ /|  /___/ / /___
              /_____//_/|_/_/   /_/  |_/_/ |_//____/_____/

--------------------------------------------------------------------------------

Use the following commands to adjust your environment:

'module avail'            - show available modules
'module add <module>'     - adds a module to your environment for this session
'module initadd <module>' - configure module to be loaded at every login

-------------------------------------------------------------------------------
[mkandes_test@login02]~% ls -lahtr
total 151K
-rw-r--r--    1 mkandes_test ddp386  75 Jul 29  2021 .gitconfig
-rw-r--r--    1 mkandes_test ddp386 376 Aug  2  2022 .bashrc
-rw-r--r--    1 mkandes_test ddp386 141 Aug  2  2022 .bash_profile
-rw-r--r--    1 mkandes_test ddp386  18 Aug  2  2022 .bash_logout
-rw-r--r--    1 mkandes_test ddp386 658 Sep 29  2022 .zshrc
-rw-r--r--    1 mkandes_test ddp386 334 Apr 12  2023 .emacs
-rw-r--r--    1 mkandes_test ddp386 172 Aug 25  2023 .kshrc
-rw-------    1 mkandes_test ddp386 24K Sep  4  2024 .bash_history
-rw-r--r--    1 mkandes_test ddp386 46K Apr 21 18:00 .zcompdump
-rw-------    1 mkandes_test ddp386 12K May 15 19:55 .viminfo
-rw-------    1 mkandes_test ddp386  49 May 15 20:01 .lesshst
drwxr-xr-x 1931 root         root     0 Jul  7 14:32 ..
drwxr-x---    2 mkandes_test ddp386  13 Jul  7 14:32 .
[mkandes_test@login02]~%
```
