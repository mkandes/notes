# Setting up perfSONAR on JS2

```
root@perfsonar-archiver:~# systemctl status logstash
● logstash.service - logstash
     Loaded: loaded (/usr/lib/systemd/system/logstash.service; enabled; preset: enabled)
    Drop-In: /etc/systemd/system/logstash.service.d
             └─override.conf, timeout-override.conf
     Active: active (running) since Tue 2025-09-02 14:07:31 UTC; 6min ago
   Main PID: 12118 (java)
      Tasks: 109 (limit: 35946)
     Memory: 1.4G (peak: 1.4G)
        CPU: 1min 42.342s
     CGroup: /system.slice/logstash.service
             └─12118 /usr/share/logstash/jdk/bin/java -Xms1g -Xmx1g -Djava.awt.headless=true -Dfile.encoding=UTF-8 -Djruby.compile.invokedynamic=t>

Sep 02 14:07:44 perfsonar-archiver logstash[12118]: [2025-09-02T14:07:44,072][INFO ][logstash.filters.geoip   ][pscheduler] DatabaseManager is not>
Sep 02 14:07:44 perfsonar-archiver logstash[12118]: [2025-09-02T14:07:44,084][INFO ][logstash.filters.geoip   ][pscheduler] Using geoip database {>
Sep 02 14:07:44 perfsonar-archiver logstash[12118]: [2025-09-02T14:07:44,098][INFO ][logstash.javapipeline    ][pscheduler] Starting pipeline {:pi>
Sep 02 14:07:44 perfsonar-archiver logstash[12118]: [2025-09-02T14:07:44,897][INFO ][logstash.javapipeline    ][prometheus] Pipeline Java executio>
Sep 02 14:07:44 perfsonar-archiver logstash[12118]: [2025-09-02T14:07:44,921][INFO ][logstash.javapipeline    ][prometheus] Pipeline started {"pip>
Sep 02 14:07:45 perfsonar-archiver logstash[12118]: [2025-09-02T14:07:45,564][INFO ][logstash.javapipeline    ][pscheduler] Pipeline Java executio>
Sep 02 14:07:45 perfsonar-archiver logstash[12118]: [2025-09-02T14:07:45,678][INFO ][logstash.javapipeline    ][pscheduler] Pipeline started {"pip>
Sep 02 14:07:45 perfsonar-archiver logstash[12118]: [2025-09-02T14:07:45,680][INFO ][logstash.inputs.http     ][pscheduler][4d121e6e24f1d4243fae8c>
Sep 02 14:07:45 perfsonar-archiver logstash[12118]: [2025-09-02T14:07:45,690][INFO ][logstash.agent           ] Pipelines running {:count=>2, :run>
Sep 02 14:07:45 perfsonar-archiver logstash[12118]: /usr/share/logstash/vendor/bundle/jruby/3.1.0/gems/manticore-0.9.1-java/lib/manticore/client.r>
root@perfsonar-archiver:~#
```

```
root@perfsonar-archiver:~# systemctl status opensearch
● opensearch.service - OpenSearch
     Loaded: loaded (/usr/lib/systemd/system/opensearch.service; enabled; preset: enabled)
    Drop-In: /etc/systemd/system/opensearch.service.d
             └─override.conf
     Active: active (running) since Tue 2025-09-02 14:07:10 UTC; 7min ago
       Docs: https://opensearch.org/
   Main PID: 11578 (java)
      Tasks: 126 (limit: 35946)
     Memory: 9.0G (peak: 9.0G)
        CPU: 1min 46.725s
     CGroup: /system.slice/opensearch.service
             └─11578 /usr/share/opensearch/jdk/bin/java -Xshare:auto -Dopensearch.networkaddress.cache.ttl=60 -Dopensearch.networkaddress.cache.ne>

Sep 02 14:07:00 perfsonar-archiver systemd-entrypoint[11578]: WARNING: System::setSecurityManager has been called by org.opensearch.bootstrap.Open>
Sep 02 14:07:00 perfsonar-archiver systemd-entrypoint[11578]: WARNING: Please consider reporting this to the maintainers of org.opensearch.bootstr>
Sep 02 14:07:00 perfsonar-archiver systemd-entrypoint[11578]: WARNING: System::setSecurityManager will be removed in a future release
Sep 02 14:07:01 perfsonar-archiver systemd-entrypoint[11578]: Sep 02, 2025 2:07:01 PM sun.util.locale.provider.LocaleProviderAdapter <clinit>
Sep 02 14:07:01 perfsonar-archiver systemd-entrypoint[11578]: WARNING: COMPAT locale provider will be removed in a future release
Sep 02 14:07:01 perfsonar-archiver systemd-entrypoint[11578]: WARNING: A terminally deprecated method in java.lang.System has been called
Sep 02 14:07:01 perfsonar-archiver systemd-entrypoint[11578]: WARNING: System::setSecurityManager has been called by org.opensearch.bootstrap.Secu>
Sep 02 14:07:01 perfsonar-archiver systemd-entrypoint[11578]: WARNING: Please consider reporting this to the maintainers of org.opensearch.bootstr>
Sep 02 14:07:01 perfsonar-archiver systemd-entrypoint[11578]: WARNING: System::setSecurityManager will be removed in a future release
Sep 02 14:07:10 perfsonar-archiver systemd[1]: Started opensearch.service - OpenSearch.
root@perfsonar-archiver:~#
```

```
root@perfsonar-archiver:~# cat /etc/perfsonar/opensearch/logstash_login
perfsonar:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXx.
```

```
root@perfsonar-archiver:~# psarchive troubleshoot
OpenSearch running ...... OK
Logstash running ...... OK
OpenSearch API (Localhost) ...... OK
Logstash Endpoint (Localhost) ...... OK
OpenSearch API (HTTPS Proxy) ...... OK
Logstash Proxy Credentials ...... OK
Logstash Endpoint (HTTPS Proxy) ...... OK
Logstash->OpenSearch Credentials ...... OK
Logstash->OpenSearch Authentication ...... OK
OpenSearch Data Exists ...... FAIL

There is no data in the database. This may be expected if this is a new archive and/or you have not yet setup measurements. If you reached this point, then the basic operations of your archive seem to be functioning. A good next step would be to login to a host running measurements and do the following:
1. Run pscheduler troubleshoot to make sure pScheduler is functioning
2. Run psconfig stats pscheduler to check if pSConfig is configuring pscheduler tests
3. If the measurement host is separate from this archive host, run psarchive troubleshoot --host ARCHIVE_HOSTNAME (replace ARCHIVE_HOSTNAME with the address of this host) from the measurement host

root@perfsonar-archiver:~# psarchive troubleshoot –skip-opensearch-data
usage: troubleshoot [-h] [--host HOST] [--quiet] [--skip-logstash-proxy] [--skip-opensearch-data]
troubleshoot: error: unrecognized arguments: –skip-opensearch-data
root@perfsonar-archiver:~# psarchive troubleshoot --skip-opensearch-data
OpenSearch running ...... OK
Logstash running ...... OK
OpenSearch API (Localhost) ...... OK
Logstash Endpoint (Localhost) ...... OK
OpenSearch API (HTTPS Proxy) ...... OK
Logstash Proxy Credentials ...... OK
Logstash Endpoint (HTTPS Proxy) ...... OK
Logstash->OpenSearch Credentials ...... OK
Logstash->OpenSearch Authentication ...... OK
root@perfsonar-archiver:~#
```

# Reference(s):
- https://docs.perfsonar.net/install_debian.html
