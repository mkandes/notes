# Setting up perfSONAR on JS2 + AraHaul

The perfSONAR project maintains a graphical interface to the services directory of all perfSONAR nodes. It can be found at this link: https://stats.perfsonar.net

- ps100g.sdsc.access-ci.org
- ps10g.sdsc.access-ci.org
- ps10g.iu.access-ci.org
- ps100g.iu.access-ci.org
- uct2-net1.mwt2.org
- uct2-net2.mwt2.org
- ps2-hpc-100g.nrel.gov

### perfSONAR Archive on JS2

```
ubuntu@js2-perfsonar-archive:~$ hostname -f
js2-perfsonar-archive.js2local
ubuntu@js2-perfsonar-archive:~$ ip addr
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: enp1s0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 8900 qdisc fq_codel state UP group default qlen 1000
    link/ether fa:16:3e:02:76:fe brd ff:ff:ff:ff:ff:ff
    inet 10.0.113.143/24 metric 100 brd 10.0.113.255 scope global dynamic enp1s0
       valid_lft 85886sec preferred_lft 85886sec
    inet6 fe80::f816:3eff:fe02:76fe/64 scope link 
       valid_lft forever preferred_lft forever
3: docker0: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc noqueue state DOWN group default 
    link/ether 02:42:90:e4:d6:b8 brd ff:ff:ff:ff:ff:ff
    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0
       valid_lft forever preferred_lft forever
ubuntu@js2-perfsonar-archive:~$  curl http://169.254.169.254/latest/meta-data/public-ipv4
149.165.154.129
ubuntu@js2-perfsonar-archive:~$
```

### perfSONAR Testpoint at Wilson Hall on AraHaul

```
root@WilsonHall-Host-000:~# ip addr                                                                                                                                          
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000                                                                                  
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00                                                                                                                    
    inet 127.0.0.1/8 scope host lo                                                                                                                                           
       valid_lft forever preferred_lft forever                                                                                                                               
498: eth0@if499: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1350 qdisc noqueue state UP group default qlen 1000                                                                   
    link/ether fa:16:3e:22:fb:f0 brd ff:ff:ff:ff:ff:ff link-netnsid 0                                                                                                        
    inet 10.0.4.22/24 brd 10.0.4.255 scope global eth0                                                                                                                       
       valid_lft forever preferred_lft forever                                                                                                                               
503: eth1@if11: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default                                                                              
    link/ether 02:42:c0:a8:2a:80 brd ff:ff:ff:ff:ff:ff link-netnsid 0                                                                                                        
    inet 192.168.42.128/24 brd 192.168.42.255 scope global eth1                                                                                                              
       valid_lft forever preferred_lft forever                                                                                                                               
505: eth2@if10: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UNKNOWN group default                                                                         
    link/ether 68:05:ca:fd:d7:68 brd ff:ff:ff:ff:ff:ff                                                                                                                       
    inet 192.168.0.128/24 brd 192.168.0.255 scope global eth2                                                                                                                
       valid_lft forever preferred_lft forever
```

```
root@WilsonHall-Host-000:/# cat /etc/os-release                                                                                                                              
PRETTY_NAME="Debian GNU/Linux 11 (bullseye)"                                                                                                                                 
NAME="Debian GNU/Linux"                                                                                                                                                      
VERSION_ID="11"                                                                                                                                                              
VERSION="11 (bullseye)"                                                                                                                                                      
VERSION_CODENAME=bullseye                                                                                                                                                    
ID=debian                                                                                                                                                                    
HOME_URL="https://www.debian.org/"                                                                                                                                           
SUPPORT_URL="https://www.debian.org/support"                                                                                                                                 
BUG_REPORT_URL="https://bugs.debian.org/"
```

```
2025-09-10 01:12:46,654 INFO exited: pscheduler-ticker (exit status 1; not expected)
2025-09-10 01:12:48,657 INFO spawned: 'pscheduler-ticker' with pid 18471
Traceback (most recent call last):
  File "/usr/lib/pscheduler/daemons/ticker", line 155, in <module>
Exception in thread Thread-1:
Traceback (most recent call last):
  File "/usr/lib/python3.9/threading.py", line 954, in _bootstrap_inner
    main_program()
  File "/usr/lib/pscheduler/daemons/ticker", line 115, in main_program
    db = pscheduler.pg_connection(dsn)
  File "/usr/lib/python3/dist-packages/pscheduler/db.py", line 43, in pg_connection
    self.run()
  File "/usr/lib/python3.9/threading.py", line 892, in run
    pg = psycopg2.connect(dsn)
  File "/usr/lib/python3/dist-packages/psycopg2/__init__.py", line 127, in connect
    self._target(*self._args, **self._kwargs)
  File "/usr/lib/pscheduler/daemons/ticker", line 109, in <lambda>
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: could not connect to server: No such file or directory
	Is the server running locally and accepting
	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?

2025-09-10 01:12:48,865 INFO exited: pscheduler-ticker (exit status 1; not expected)
2025-09-10 01:12:51,869 INFO spawned: 'pscheduler-ticker' with pid 18476
Traceback (most recent call last):
  File "/usr/lib/pscheduler/daemons/ticker", line 155, in <module>
Exception in thread Thread-1:
Traceback (most recent call last):
  File "/usr/lib/python3.9/threading.py", line 954, in _bootstrap_inner
    main_program()
  File "/usr/lib/pscheduler/daemons/ticker", line 115, in main_program
    db = pscheduler.pg_connection(dsn)
  File "/usr/lib/python3/dist-packages/pscheduler/db.py", line 43, in pg_connection
    self.run()
  File "/usr/lib/python3.9/threading.py", line 892, in run
    pg = psycopg2.connect(dsn)
  File "/usr/lib/python3/dist-packages/psycopg2/__init__.py", line 127, in connect
    self._target(*self._args, **self._kwargs)
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
  File "/usr/lib/pscheduler/daemons/ticker", line 109, in <lambda>
psycopg2.OperationalError: could not connect to server: No such file or directory
	Is the server running locally and accepting
	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?

2025-09-10 01:12:52,076 INFO exited: pscheduler-ticker (exit status 1; not expected)
2025-09-10 01:12:53,077 INFO gave up: pscheduler-ticker entered FATAL state, too many start retries too quickly
```

```
sed -i 's|14|13|g' /etc/supervisord.conf
```

```
2025-09-10 01:21:12,337 INFO stopped: perfsonar-lsregistrationdaemon (terminated by SIGTERM)
Exception in thread Thread-1:
Traceback (most recent call last):
  File "/usr/lib/python3.9/threading.py", line 954, in _bootstrap_inner
Traceback (most recent call last):
  File "/usr/lib/pscheduler/daemons/ticker", line 155, in <module>
    self.run()
  File "/usr/lib/pscheduler/daemons/ticker", line 115, in main_program
  File "/usr/lib/python3.9/threading.py", line 892, in run
    self._target(*self._args, **self._kwargs)
  File "/usr/lib/pscheduler/daemons/ticker", line 109, in <lambda>
    db = pscheduler.pg_connection(dsn)
  File "/usr/lib/python3/dist-packages/pscheduler/db.py", line 43, in pg_connection
    target=lambda: http_queue_maintainer(log))
  File "/usr/lib/pscheduler/daemons/ticker", line 58, in http_queue_maintainer
    pg = psycopg2.connect(dsn)
  File "/usr/lib/python3/dist-packages/psycopg2/__init__.py", line 127, in connect
    conn = pscheduler.pg_connection(dsn)
  File "/usr/lib/python3/dist-packages/pscheduler/db.py", line 43, in pg_connection
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: FATAL:  password authentication failed for user "pscheduler"
```

```
root@WilsonHall-Host-000:~# sed -i '25 s/^/#/' /etc/supervisord.conf
root@WilsonHall-Host-000:~# vi /etc/supervisord.conf
root@WilsonHall-Host-000:~# sed -i '26 s/^/#/' /etc/supervisord.conf
root@WilsonHall-Host-000:~# sed -i '27 s/^/#/' /etc/supervisord.conf
root@WilsonHall-Host-000:~#
```

### perfSONAR TestPoint at Agronomy Farm on AraHaul

```
root@AgronomyFarm-Host-000:~# ip addr                                                                                                                                        
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000                                                                                  
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00                                                                                                                    
    inet 127.0.0.1/8 scope host lo                                                                                                                                           
       valid_lft forever preferred_lft forever                                                                                                                               
19: eth0@if20: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1350 qdisc noqueue state UP group default qlen 1000                                                                     
    link/ether fa:16:3e:63:61:f0 brd ff:ff:ff:ff:ff:ff link-netnsid 0                                                                                                        
    inet 10.0.4.246/24 brd 10.0.4.255 scope global eth0                                                                                                                      
       valid_lft forever preferred_lft forever                                                                                                                               
24: eth1@if10: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UNKNOWN group default                                                                          
    link/ether 68:05:ca:fd:f6:1e brd ff:ff:ff:ff:ff:ff                                                                                                                       
    inet 192.168.0.2/24 brd 192.168.0.255 scope global eth1                                                                                                                  
       valid_lft forever preferred_lft forever                                                                                                                               
```

```
2025-09-10 01:12:26,282 INFO exited: pscheduler-runner (exit status 1; not expected)
2025-09-10 01:12:29,286 INFO spawned: 'pscheduler-runner' with pid 18413
Traceback (most recent call last):
  File "/usr/lib/pscheduler/daemons/runner", line 967, in <module>
    main_program()
  File "/usr/lib/pscheduler/daemons/runner", line 791, in main_program
    db = pscheduler.PgConnection(dsn, name="runner")
  File "/usr/lib/python3/dist-packages/pscheduler/db.py", line 95, in __init__
    self.pg = pg_connection(dsn, autocommit=autocommit, name=name)
  File "/usr/lib/python3/dist-packages/pscheduler/db.py", line 43, in pg_connection
    pg = psycopg2.connect(dsn)
  File "/usr/lib/python3/dist-packages/psycopg2/__init__.py", line 127, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: could not connect to server: No such file or directory
	Is the server running locally and accepting
	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?

2025-09-10 01:12:29,494 INFO exited: pscheduler-runner (exit status 1; not expected)
2025-09-10 01:12:30,495 INFO gave up: pscheduler-runner entered FATAL state, too many start retries too quickly
```

```
sed -i 's|14|13|g' /etc/supervisord.conf
```
