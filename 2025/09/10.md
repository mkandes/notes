# Setting up perfSONAR on JS2 + AraHaul

### Central Archive on JS2

```
mkandes@hardtack:~$ ssh ubuntu@149.165.154.129
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!
Someone could be eavesdropping on you right now (man-in-the-middle attack)!
It is also possible that a host key has just been changed.
The fingerprint for the ED25519 key sent by the remote host is
SHA256:KPdQYpv53hk5X4B31qFYcskKH+6LrMiWNDiuDDhZiAc.
Please contact your system administrator.
Add correct host key in /home/mkandes/.ssh/known_hosts to get rid of this message.
Offending ECDSA key in /home/mkandes/.ssh/known_hosts:41
  remove with:
  ssh-keygen -f '/home/mkandes/.ssh/known_hosts' -R '149.165.154.129'
Host key for 149.165.154.129 has changed and you have requested strict checking.
Host key verification failed.
mkandes@hardtack:~$ ssh-keygen -f '/home/mkandes/.ssh/known_hosts' -R '149.165.154.129'
# Host 149.165.154.129 found: line 39
# Host 149.165.154.129 found: line 40
# Host 149.165.154.129 found: line 41
/home/mkandes/.ssh/known_hosts updated.
Original contents retained as /home/mkandes/.ssh/known_hosts.old
mkandes@hardtack:~$ ssh ubuntu@149.165.154.129
The authenticity of host '149.165.154.129 (149.165.154.129)' can't be established.
ED25519 key fingerprint is SHA256:KPdQYpv53hk5X4B31qFYcskKH+6LrMiWNDiuDDhZiAc.
This key is not known by any other names.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added '149.165.154.129' (ED25519) to the list of known hosts.

 System information as of Wed Sep 10 17:26:11 UTC 2025

  System load:  0.14              Processes:               229
  Usage of /:   9.3% of 57.97GB   Users logged in:         0
  Memory usage: 1%                IPv4 address for enp1s0: 10.0.113.22
  Swap usage:   0%

══════════════════════════https://jetstream.status.io/══════════════════════════

Overall Jetstream2 Status:   Operational 

Active Status Items:
 ◦   Software packages fail to install or upgrade with APT 


════════════════════════════════════════════════════════════════════════════════

ubuntu@js2-perfsonar-archive:~$
```

```
mkandes@hardtack:~/Dropbox/projects/icicle/ara/code$ cat AraHaul.json 
{
    "archives": {
        "arahaul-archive":{
           "archiver":"http",
           "data":{
              "schema":3,
              "_url":"https://149.165.154.129/logstash",
              "verify-ssl":false,
              "op":"put",
              "_headers":{
                 "x-ps-observer":"{% scheduled_by_address %}",
                 "content-type":"application/json"
        }
      }
     }
    },
    "addresses": {
       "AgronomyFarm-Aviat": { "address": "192.168.0.2" },
       "WilsonHall-Aviat": { "address": "192.168.0.129" },
       "WilsonHall-OneWeb": { "address": "192.168.42.128" }
    },
    "groups": {
        "Mesh": {
            "type": "mesh",
            "addresses": [
		{ "name": "AgronomyFarm-Aviat" },
                { "name": "WilsonHall-Aviat" },
                { "name": "WilsonHall-OneWeb" }
            ]
         },
        "disjoint-mesh": {
            "type": "disjoint",
	    "unidirectional": true,
            "a-addresses": [
                { "name": "AgronomyFarm-Aviat" }
             ],
	    "b-addresses": [
                { "name": "WilsonHall-Aviat" },
                { "name": "WilsonHall-OneWeb" }
            ]
         }
     },
    "tests": {
       "test_rtt": {
            "type": "rtt",
            "spec": {
                "source": "{% address[0] %}",
                "dest": "{% address[1] %}",
                "count": 10,
                "interval": "PT1S",
                "length": 1000
            }
        },
       "test_latencybg": {
            "type": "latencybg",
            "spec": {
                "source": "{% address[0] %}",
                "dest": "{% address[1] %}",
 	        "packet-interval": 0.1,
 	        "packet-count": 600,
                "flip": "{% flip %}"
            }
        },
       "test_throughput": {
            "type": "throughput",
            "spec": {
                "source": "{% address[0] %}",
		"dest": "{% address[1] %}",
		"reverse": true,
                "duration": "PT20S"
            }
        },
       "test_trace": {
            "type": "trace",
            "spec": {
                "source": "{% address[0] %}",
                "dest": "{% address[1] %}"
            }
        }
    },
    "schedules": {
        "10Min_schedule_PT10M": {
            "repeat": "PT10M",
            "sliprand": true,
            "slip": "PT10M"
        },
        "5Min_schedule_PT5M": {
            "repeat": "PT5M",
            "sliprand": true,
            "slip": "PT5M"
        },
	"2Min_schedule_PT2M": {
            "repeat": "PT2M",
            "sliprand": true,
            "slip": "PT2M"
        },
	"1Min_schedule_PT1M": {
            "repeat": "PT1M",
            "sliprand": true,
            "slip": "PT1M"
        }
    },
    "tasks": {
        "test_rtt": {
            "group": "Mesh",
            "test": "test_rtt",
            "schedule": "1Min_schedule_PT1M",
            "archives": [
                 "arahaul-archive"
            ],
        "reference": {
            "display-task-name": "PS5-task_rtt",
            "display-task-group": [ "ps-arahaul" ]
            }
        },
        "test_latencybg": {
            "group": "Mesh",
            "test": "test_latencybg",
            "archives": [
                 "arahaul-archive"
            ],
        "reference": {
            "display-task-name": "PS5-task_latencybg",
            "display-task-group": [ "ps-arahaul" ]
            }
        },
        "test_throughput": {
            "group": "Mesh",
            "test": "test_throughput",
	    "tools": [ "iperf3" ],
            "schedule": "2Min_schedule_PT2M",
            "archives": [
                 "arahaul-archive"
            ],
        "reference": {
            "display-task-name": "PS5-task_throughput",
            "display-task-group": [ "ps-arahaul" ]
            }
        },
        "test_trace": {
            "group": "Mesh",
            "test": "test_trace",
            "schedule": "10Min_schedule_PT10M",
            "archives": [
                 "arahaul-archive"
            ],
        "reference": {
            "display-task-name": "PS5-task_trace",
            "display-task-group": [ "ps-arahaul" ]
            }
        },
        "test_rtt-dj": {
            "group": "disjoint-mesh",
            "test": "test_rtt",
            "schedule": "5Min_schedule_PT5M",
            "archives": [
                 "arahaul-archive"
            ],
        "reference": {
            "display-task-name": "PS5-DJ-task_rtt",
            "display-task-group": [ "ps-dj-1-3-1by2" ]
            }
        },
        "test_latencybg-dj": {
            "group": "disjoint-mesh",
            "test": "test_latencybg",
            "archives": [
                 "arahaul-archive"
            ],
        "reference": {
            "display-task-name": "PS5-DJ-task_latencybg",
            "display-task-group": [ "ps-dj-1-3-1by2" ]
            }
        },
        "test_throughput-dj": {
            "group": "disjoint-mesh",
            "test": "test_throughput",
	    "tools": [ "iperf3" ],
            "schedule": "2Min_schedule_PT2M",
            "archives": [
                 "arahaul-archive"
            ],
        "reference": {
            "display-task-name": "PS5-DJ-task_throughput",
            "display-task-group": [ "ps-dj-1-3-1by2" ]
            }
        },
        "test_trace-dj": {
            "group": "disjoint-mesh",
            "test": "test_trace",
            "schedule": "10Min_schedule_PT10M",
            "archives": [
                 "arahaul-archive"
            ],
        "reference": {
            "display-task-name": "PS5-DJ-task_trace",
            "display-task-group": [ "ps-dj-1-3-1by2" ]
            }
        }
     }
  }
mkandes@hardtack:~/Dropbox/projects/icicle/ara/code$
```

```
mkandes@hardtack:~/Dropbox/projects/icicle/ara/code$ sftp ubuntu@149.165.154.129
Connected to 149.165.154.129.
sftp> put AraHaul.json 
Uploading AraHaul.json to /home/ubuntu/AraHaul.json
AraHaul.json                                                                                                    100% 5745   121.6KB/s   00:00    
sftp>
```

# Reference(s):
- https://github.com/preese/Step-by-step-to-perfSONAR-TPs-Archive
- https://docs.perfsonar.net/multi_ma_install.html
