# Setting up perfSONAR on ARA

```
icicle@DataCenter-ComputeNode-Compute-000:~$ sudo apt-get install perfsonar-archive
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
perfsonar-archive is already the newest version (5.2.1-1).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
2 not fully installed or removed.
After this operation, 0 B of additional disk space will be used.
Do you want to continue? [Y/n] y
Setting up opensearch (2.18.0) ...
Running OpenSearch Post-Installation Script
ERROR: Something went wrong during demo configuration installation. Please see the logs in /var/log/opensearch/install_demo_configuration.log
dpkg: error processing package opensearch (--configure):
 installed opensearch package post-installation script subprocess returned error exit status 1
dpkg: dependency problems prevent configuration of perfsonar-archive:
 perfsonar-archive depends on opensearch; however:
  Package opensearch is not configured yet.

dpkg: error processing package perfsonar-archive (--configure):
 dependency problems - leaving unconfigured
No apport report written because the error message indicates its a followup error from a previous failure.
                          Processing triggers for libc-bin (2.35-0ubuntu3.10) ...
Errors were encountered while processing:
 opensearch
 perfsonar-archive
needrestart is being skipped since dpkg has failed
E: Sub-process /usr/bin/dpkg returned an error code (1)
icicle@DataCenter-ComputeNode-Compute-000:~$
```

```
icicle@DataCenter-ComputeNode-Compute-000:~$ cat /var/log/opensearch/install_demo_configuration.log
### OpenSearch Security Demo Installer
### ** Warning: Do not use on production or public reachable systems **
OpenSearch install type: rpm/deb on Linux 5.4.0-205-generic amd64
OpenSearch config dir: /etc/opensearch/
OpenSearch config file: /etc/opensearch/opensearch.yml
OpenSearch bin dir: /usr/share/opensearch/bin/
OpenSearch plugins dir: /usr/share/opensearch/plugins/
OpenSearch lib dir: /usr/share/opensearch/lib/
Detected OpenSearch Version: 2.18.0
Detected OpenSearch Security Version: 2.18.0.0
No custom admin password found. Please provide a password via the environment variable OPENSEARCH_INITIAL_ADMIN_PASSWORD.
icicle@DataCenter-ComputeNode-Compute-000:~$
```

```
icicle@DataCenter-ComputeNode-Compute-000:~$ sudo dpkg --configure -a
Setting up opensearch (2.18.0) ...
Running OpenSearch Post-Installation Script
System has not been booted with systemd as init system (PID 1). Can't operate.
Failed to connect to bus: Host is down
dpkg: error processing package opensearch (--configure):
 installed opensearch package post-installation script subprocess returned error exit status 1
dpkg: dependency problems prevent configuration of perfsonar-archive:
 perfsonar-archive depends on opensearch; however:
  Package opensearch is not configured yet.

dpkg: error processing package perfsonar-archive (--configure):
 dependency problems - leaving unconfigured
Processing triggers for libc-bin (2.35-0ubuntu3.10) ...
Errors were encountered while processing:
 opensearch
 perfsonar-archive
icicle@DataCenter-ComputeNode-Compute-000:~$
```

```
icicle@DataCenter-ComputeNode-Compute-000:~$  sudo apt install -f
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
2 not fully installed or removed.
After this operation, 0 B of additional disk space will be used.
Setting up opensearch (2.18.0) ...
Running OpenSearch Post-Installation Script
System has not been booted with systemd as init system (PID 1). Can't operate.
Failed to connect to bus: Host is down
dpkg: error processing package opensearch (--configure):
 installed opensearch package post-installation script subprocess returned error exit status 1
dpkg: dependency problems prevent configuration of perfsonar-archive:
 perfsonar-archive depends on opensearch; however:
  Package opensearch is not configured yet.

dpkg: error processing package perfsonar-archive (--configure):
 dependency problems - leaving unconfigured
No apport report written because the error message indicates its a followup error from a previous failure.
                                                                                                          Processing triggers for libc-bin (2.35-0ubuntu3.10) ...
Errors were encountered while processing:
 opensearch
 perfsonar-archive
needrestart is being skipped since dpkg has failed
E: Sub-process /usr/bin/dpkg returned an error code (1)
icicle@DataCenter-ComputeNode-Compute-000:~$

```
```
icicle@DataCenter-ComputeNode-Compute-000:~$ sudo psarchive troubleshoot
System has not been booted with systemd as init system (PID 1). Can't operate.
Failed to connect to bus: Host is down
OpenSearch running ...... FAIL
Service opensearch is not running according to systemctl. See 'systemctl status opensearch' for more details
icicle@DataCenter-ComputeNode-Compute-000:~$
```

# Reference(s):
- https://osg-htc.org/networking
- https://osg-htc.org/networking/perfsonar-in-osg/
- https://osg-htc.org/networking/perfsonar/deployment-models/
- https://osg-htc.org/networking/perfsonar/installation/
- https://osg-htc.org/networking/perfsonar/faq/
