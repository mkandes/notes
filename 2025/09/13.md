# Setting up perfSONAR on JS2 + AraHaul

### perfSONAR Central Archive on JetStream2 (JS2)

```
declare -xr TZ='UTC'
```

```
declare -xr LC_ALL='C'
```

```
 declare -xr DEBIAN_FRONTEND='noninteractive'
```

```
curl -s https://downloads.perfsonar.net/install | sh -s - --auto-updates --add perfsonar-grafana --add perfsonar-grafana-toolkit --add perfsonar-psconfig-hostmetrics --add perfsonar-psconfig-publisher archive /tmp/perfSONAR-pSConfig-AraHaul.json
```

```
apt-get -y install ntp
```

```
apt-get -y install perfsonar-toolkit-ntp
```

```
/usr/lib/perfsonar/scripts/configure_ntpd new
```

```
systemctl restart ntp
```

```
systemctl status ntp
```

```
systemctl restart apache2
```

```
systemctl status apache2
```

```
psconfig publish /tmp/perfSONAR-pSConfig-AraHaul.json
```

```
/usr/lib/perfsonar/archive/perfsonar-scripts/psconfig_archive.sh
```


```
icicle@WilsonHall-Host-000:~$ sudo -i
root@WilsonHall-Host-000:~# declare -xr ONEWEB_NETWORK_GATEWAY_IP='192.168.42.1';
root@WilsonHall-Host-000:~# ip addr
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
784: eth0@if785: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1350 qdisc noqueue state UP group default qlen 1000
    link/ether fa:16:3e:18:4b:34 brd ff:ff:ff:ff:ff:ff link-netnsid 0
    inet 10.0.4.210/24 brd 10.0.4.255 scope global eth0
       valid_lft forever preferred_lft forever
789: eth1@if11: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default 
    link/ether 02:42:c0:a8:2a:82 brd ff:ff:ff:ff:ff:ff link-netnsid 0
    inet 192.168.42.130/24 brd 192.168.42.255 scope global eth1
       valid_lft forever preferred_lft forever
791: eth2@if10: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UNKNOWN group default 
    link/ether 68:05:ca:fd:d7:68 brd ff:ff:ff:ff:ff:ff
    inet 192.168.0.130/24 brd 192.168.0.255 scope global eth2
       valid_lft forever preferred_lft forever
root@WilsonHall-Host-000:~#
```
